[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Uso de R para la investigación social",
    "section": "",
    "text": "Uso de R para la investigación social"
  },
  {
    "objectID": "index.html#datos-utilizados",
    "href": "index.html#datos-utilizados",
    "title": "Uso de R para la investigación social",
    "section": "Datos utilizados",
    "text": "Datos utilizados\nLo puedes descargar de acá"
  },
  {
    "objectID": "index.html#facilitadora",
    "href": "index.html#facilitadora",
    "title": "Uso de R para la investigación social",
    "section": "Facilitadora",
    "text": "Facilitadora\n\nAna Ruth Escoto Castillo\nProfesora de tiempo completo en la Facultad de Ciencias Políticas y Sociales, UNAM. Doctora en Estudios de Población por El Colegio de México, cuenta con el nivel I en el Sistema Nacional de Investigadores. Coorganizadora del capítulo de la CDMX de la iniciativa global Rladies. Le interesa el bienestar de la población, en el presente, analizando los procesos de desigualdad y exclusión en los mercados laborales latinoamericanos; y, en el futuro, a través del estudio de la sustentabilidad. Su experiencia en el ámbito académico se ha concentrado en el estudio de este bienestar, específicamente en el análisis sociodemográfico de las condiciones laborales y la vinculación del comercio exterior con el mercado de trabajo, en la relación del cambio climático y la distribución de ingresos, el consumo energético de los hogares y sus implicaciones ambientales. Posee experiencia en recolección de información estadística, diseño y control de procesos de recolección y su procesamiento. Ha aplicado diversos métodos y herramientas multivariadas, homologación de información y comparabilidad de fuentes en sus investigaciones, así como usa de diversos softwares estadísticos, y ha impartido clases de estadítica aplicada a nivel de licenciatura y posgrado."
  },
  {
    "objectID": "index.html#contenido-y-objetivos",
    "href": "index.html#contenido-y-objetivos",
    "title": "Uso de R para la investigación social",
    "section": "Contenido y objetivos",
    "text": "Contenido y objetivos\n\nObjetivo General: Que el estudiantado sea capaz de estudiar fenómenos sociales y aplicar conceptos estadísticos utilizando el paquete R a fuentes de información mexicanas y mundiales.\n\nObjetivos por unidad:\n\n1. Introducción a R y Rstudio (4 horas)\n\nObjetivo: que el estudiantado sea familiarice con la interfase de trabajo y la programación por objetos, del mismo modo que sean capaces de realizar tareas básicas tales como crear un script, un proyecto, objetos, ambientes e instalar paqueterías.\n\n\n\n2. Importación de información y primera revisión de fuentes estadísticas (8 horas)\n\nImportación de información a R en diferentes formatos\nImportación de información de INEGI\nRevisión de encuestas y ejemplos de importación de datos de acuerdo al tema de cada estudiante\n\n\nObjetivo: que el estudiantado sea capaz de importar información desde diferentes formatos (.txt, .csv, .xlsx, .dta, .dbf) a R, así como de exportar sus resultados en estos formatos. Del mismo modo que sean capaces de revisar de manera preliminar los objetos de tipo data.frame: funciones dplyr::glimpse(), skimr::skim(), manejo de etiquetas y hacer subconjuntos de información.\n\n\n\n3. Revisión de elementos estadísticos básicos desde “tidyverse” (12 horas)\n\nTabulados con janitor::tabyl() y uso de factores de expansión con pollster::topline(), pollster::crosstab. Lectura e interpretación de tablas de doble entrada\nEstadística descriptiva básica (medidas de tendencia central, dispersión y de posición) con el paquete {dplyr}\nGráficos univariados y bivariados usando {ggplot2} y extensiones de ggplot\n\n\nObjetivo: que el estudiantado sea capaz de realizar análisis estadísticos básicos utilizando las bases de datos más afines a sus temas de investigación.\n\n\n\n4. Inferencia con R (12 horas)\n\nEstimaciones por intervalo y diseño complejo muestral\nPruebas de Hipótesis\nDe una media y una proporción\n\n\n\nDe dos medias y dos proporciones\nPrueba chi-cuadrado\nPrueba ANOVA\n\n\nObjetivo: que el estudiantado sea capaz de realizar inferencia estadística de las variables de interés utilizando las bases de datos más afines a sus temas de investigación.\n\n\n\n5. Modelos estadísticos con R (16 horas)\n\nModelos de regresión lineal\nIntroducción a otros modelos generalizados\nModelo logit\n\n\n\nModelo multilogit\n\n\nObjetivo: que el estudiantado sea capaz de modelar variables dependientes contínuas y cualitativas, así como evaluar los modelos estadísticos de acuerdo a sus supuestos con R.\n\n\n\n6. Introducción al análisis de texto (8 horas)\n\nImportación de corpus desde .txt, pdf, epub, pdf\nLimpieza básica de cadenass\nTokenización, nubes y frecuencia de palabras\nAsociación entre palabras y modelos\n\n\nObjetivo: que el estudiantado sea capaz de manejar corpus de textos, tokenizar y dar estadísticas de palabras así como su asociación, utilizando los paquetes {tidytext} y {udpipe}.\n\n\n\n7. R para comunicar resultados con Quarto (4 horas)\n\nObjetivo: que el estudiantado sea capaz de comprender los elementos básicos para crear documentos desde R utilizando Quarto"
  },
  {
    "objectID": "instala.html#introducción-a-r",
    "href": "instala.html#introducción-a-r",
    "title": "Instalación de R y Rstudio",
    "section": "Introducción a R",
    "text": "Introducción a R"
  },
  {
    "objectID": "instala.html#instalación-en-os",
    "href": "instala.html#instalación-en-os",
    "title": "Instalación de R y Rstudio",
    "section": "Instalación en OS",
    "text": "Instalación en OS\n\nNecesito que instalen la versión más nueva de R: Download R-4.4.0 of MAC. The R-project for statistical computing. https://cran.r-project.org/bin/macosx/\n\nElije la versión de acuerdo a tu procesador, intel o ARM.\n\nInstalar también las herramientas Quartz, xcode y fortran\n\n\nhttps://www.xquartz.org/\nhttps://developer.apple.com/xcode/resources/\nhttps://mac.r-project.org/tools/gfortran-12.2-universal.pkg\n\n\nDespués de eso instalar el Rstudio, que hoy se encuentra alojado en el sitio posit, que vaya acorde con MAC\n\nhttps://posit.co/download/rstudio-desktop/\nAlgunas indicaciones en video, pero son algo viejitas y pueden cambiar las versiones de R.\n\nAlgunas indicaciones en video, pero son algo viejitas y pueden cambiar las versiones de R."
  },
  {
    "objectID": "instala.html#instalación-en-pc",
    "href": "instala.html#instalación-en-pc",
    "title": "Instalación de R y Rstudio",
    "section": "Instalación en PC",
    "text": "Instalación en PC\n\nNecesito que instalen la versión más nueva de R: Download R-4.4.0 for Windows. The R-project for statistical computing. https://cran.r-project.org/bin/windows/base/\nInstalar también la herramienta RTools https://cran.r-project.org/bin/windows/Rtools/rtools44/rtools.html\nDespués de eso instalar el Rstudio, que hoy se encuentra alojado en el sitio posit, que vaya acorde con Windows https://posit.co/download/rstudio-desktop/\n\nAlgunas indicaciones en video, pero son algo viejitas y pueden cambiar las versiones de R."
  },
  {
    "objectID": "instala.html#ojo",
    "href": "instala.html#ojo",
    "title": "Instalación de R y Rstudio",
    "section": "Ojo",
    "text": "Ojo\nDesde octubre de 2022, RStudio se volvió “Posit”"
  },
  {
    "objectID": "P1.html#introducción",
    "href": "P1.html#introducción",
    "title": "1  Primer acercamiento al uso del programa",
    "section": "1.1 Introducción",
    "text": "1.1 Introducción\nEn RStudio podemos tener varias ventanas que nos permiten tener más control de nuestro “ambiente”, el historial, los “scripts” o códigos que escribimos y por supuesto, tenemos nuestra consola, que también tiene el símbolo “&gt;” con R. Podemos pedir operaciones básicas\n\n2+5\n\n[1] 7\n\n5*3\n\n[1] 15\n\n#Para escribir comentarios y que no los lea como operaciones ponemos el símbolo de gato\n# Lo podemos hacer para un comentario en una línea o la par de una instrucción\n\n1:5               # Secuencia 1-5\n\n[1] 1 2 3 4 5\n\nseq(1, 10, 0.5)   # Secuencia con incrementos diferentes a 1\n\n [1]  1.0  1.5  2.0  2.5  3.0  3.5  4.0  4.5  5.0  5.5  6.0  6.5  7.0  7.5  8.0\n[16]  8.5  9.0  9.5 10.0\n\nc('a','b','c')  # Vector con caracteres\n\n[1] \"a\" \"b\" \"c\"\n\n1:7             # Entero\n\n[1] 1 2 3 4 5 6 7\n\n40 &lt; 80         # Valor logico\n\n[1] TRUE\n\n2 + 2 == 5      # Valor logico\n\n[1] FALSE\n\nT == TRUE       # T expresion corta de verdadero\n\n[1] TRUE\n\n\nR es un lenguaje de programación por objetos. Por lo cual vamos a tener objetos a los que se les asigna su contenido. Si usamos una flechita “&lt;-” o “-&gt;” le estamos asignando algo al objeto que apunta la felcha.\n\nx &lt;- 24         # Asignacion de valor 24 a la variable x para su uso posterior (OBJETO)\nx/2             # Uso posterior de variable u objeto x\n\n[1] 12\n\nx               # Imprime en pantalla el valor de la variable u objeto\n\n[1] 24\n\nx &lt;- TRUE       # Asigna el valor logico TRUE a la variable x OJO: x toma el ultimo valor que se le asigna\nx\n\n[1] TRUE"
  },
  {
    "objectID": "P1.html#vectores",
    "href": "P1.html#vectores",
    "title": "1  Primer acercamiento al uso del programa",
    "section": "1.2 Vectores",
    "text": "1.2 Vectores\nLos vectores son uno de los objetos más usados en R.\n\ny &lt;- c(2, 4, 6)     # Vector numerico\ny &lt;- c('Primaria', 'Secundaria') # Vector caracteres\n\nDado que poseen elementos, podemos también observar y hacer operaciones con sus elementos, usando “[ ]” para acceder a ellos\n\ny[2]              # Acceder al segundo valor del vector y\n\n[1] \"Secundaria\"\n\ny[3] &lt;- 'Preparatoria y más' # Asigna valor a la tercera componente del vector\nsex &lt;-1:2         # Asigna a la variable sex los valores 1 y 2\nnames(sex) &lt;- c(\"Femenino\", \"Masculino\") # Asigna nombres al vector de elementos sexo\nsex[2]            # Segundo elemento del vector sex\n\nMasculino \n        2"
  },
  {
    "objectID": "P1.html#matrices",
    "href": "P1.html#matrices",
    "title": "1  Primer acercamiento al uso del programa",
    "section": "1.3 Matrices",
    "text": "1.3 Matrices\nLas matrices son muy importantes, porque nos permiten hacer operaciones y casi todas nuestras bases de datos tendran un aspecto de matriz.\n\nm &lt;- matrix (nrow=2, ncol=3, 1:6, byrow = TRUE) # Matrices Ejemplo 1\nm\n\n     [,1] [,2] [,3]\n[1,]    1    2    3\n[2,]    4    5    6\n\nm &lt;- matrix (nrow=2, ncol=3, 1:6, byrow = FALSE) # Matrices Ejemplo 1\nm\n\n     [,1] [,2] [,3]\n[1,]    1    3    5\n[2,]    2    4    6\n\ndim(m)\n\n[1] 2 3\n\nattributes(m)\n\n$dim\n[1] 2 3\n\n\n¿Qué hace “byrow”?\n\nn &lt;- 1:6     # Matrices Ejemplo 2\ndim(n) &lt;- c(2,3)\nn\n\n     [,1] [,2] [,3]\n[1,]    1    3    5\n[2,]    2    4    6\n\n\n\nxx &lt;-10:12   # Matrices Ejemplo 3\nyy&lt;-14:16\ncbind(xx,yy) # Une vectores por Columnas\n\n     xx yy\n[1,] 10 14\n[2,] 11 15\n[3,] 12 16\n\nrbind(xx,yy) # Une vectores por Renglones\n\n   [,1] [,2] [,3]\nxx   10   11   12\nyy   14   15   16\n\nmi_matrix&lt;-cbind(xx,yy) # este resultado lo puedo asignar a un objeto"
  },
  {
    "objectID": "P1.html#data.frames-o-conjuntos-de-datos",
    "href": "P1.html#data.frames-o-conjuntos-de-datos",
    "title": "1  Primer acercamiento al uso del programa",
    "section": "1.4 data.frames o conjuntos de datos",
    "text": "1.4 data.frames o conjuntos de datos\n\nmi_dataframe&lt;-as.data.frame(m)\n\nEl formato matricial sigue sirviendo:\n\nmi_dataframe[2,]\n\n  V1 V2 V3\n2  2  4  6\n\nmi_dataframe[,2]\n\n[1] 3 4\n\n\nPero también podemos utilizar el símbolo de peso para cada variable:\n\nmi_dataframe$V2\n\n[1] 3 4\n\n\nPuedo agregar variables columnas:\n\ncbind(mi_dataframe, c(\"a\", \"b\"), c(T, F))\n\n  V1 V2 V3 c(\"a\", \"b\") c(T, F)\n1  1  3  5           a    TRUE\n2  2  4  6           b   FALSE\n\n\nQué pasa con las matrices\n\ncbind(m, c(\"a\", \"b\"),  c(T, F))\n\n     [,1] [,2] [,3] [,4] [,5]   \n[1,] \"1\"  \"3\"  \"5\"  \"a\"  \"TRUE\" \n[2,] \"2\"  \"4\"  \"6\"  \"b\"  \"FALSE\"\n\n\nCheca cómo cambian los elementos. En una matriz todos los elementos deben ser del mismo tipo.\nPodemos crear “a mano” dataframes:\n\ndata&lt;-data.frame(\n  \"entero\" = 1:4, \n  \"factor\" = as.factor(c(\"a\", \"b\", \"c\", \"d\")), \n  \"numero\" = c(1/1, 1/2, 1/3, 1/4),\n  \"cadena\" = as.character(c(\"a\", \"b\", \"c\", \"d\"))\n)\n\nLos data.frames tienen una estructura\n\nstr(data)\n\n'data.frame':   4 obs. of  4 variables:\n $ entero: int  1 2 3 4\n $ factor: Factor w/ 4 levels \"a\",\"b\",\"c\",\"d\": 1 2 3 4\n $ numero: num  1 0.5 0.333 0.25\n $ cadena: chr  \"a\" \"b\" \"c\" \"d\""
  },
  {
    "objectID": "P1.html#valores-y-perdidos",
    "href": "P1.html#valores-y-perdidos",
    "title": "1  Primer acercamiento al uso del programa",
    "section": "1.5 Valores y perdidos",
    "text": "1.5 Valores y perdidos\nAdemás de caracteres, numéricos y lógicos hay también valores perdidos. Y de varios tipos\n\nvector&lt;-c(1:5, # numérico\n          T, # lógico\n          NA, # perdido\n          \"a\", # caracter\n          5/0, # no es un número\n          sqrt(-1))\n\nWarning in sqrt(-1): Se han producido NaNs\n\n\nSi lo imprimimos vamos a ir viendo cómo se convierten ciertos valores a otros al quererlos incluir en un mismo conjunto:\n\nvector\n\n [1] \"1\"    \"2\"    \"3\"    \"4\"    \"5\"    \"TRUE\" NA     \"a\"    \"Inf\"  \"NaN\" \n\n\nQuitaremos el caracter\n\nvector&lt;-c(1:5, # numérico\n          T, # lógico\n          NA, # perdido\n          5/0, # Infinito\n          sqrt(-1))\n\nWarning in sqrt(-1): Se han producido NaNs\n\nvector\n\n[1]   1   2   3   4   5   1  NA Inf NaN\n\n\n¿Qué le pasó al valor lógico?\nHay unos operadores que nos señalan si los valores son perdidos o infinitos o “Not a number”\n\nis.na(vector)\n\n[1] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE  TRUE\n\nis.nan(vector)\n\n[1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE\n\nis.infinite(vector)\n\n[1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE"
  },
  {
    "objectID": "P1.html#funciones",
    "href": "P1.html#funciones",
    "title": "1  Primer acercamiento al uso del programa",
    "section": "1.6 Funciones",
    "text": "1.6 Funciones\nAlgunas funciones básicas son las siguientes. Vamos a ir viendo más funciones, pero para entender cómo funcionan, haremos unos ejemplos y cómo pedir ayuda sobre ellas.\n\nsum(10, 20, 30)    # Función suma\n\n[1] 60\n\nrep('R', times = 3) # Repite la letra R el numero de veces que se indica\n\n[1] \"R\" \"R\" \"R\"\n\nsqrt(9)           # Raiz cuadrada de 9\n\n[1] 3"
  },
  {
    "objectID": "P1.html#listas",
    "href": "P1.html#listas",
    "title": "1  Primer acercamiento al uso del programa",
    "section": "1.7 Listas",
    "text": "1.7 Listas\nLas listas son conjuntos de objetos y pueden ser de varios tipos\n\nmilista&lt;- list(data, m, xx, \"a\")\n\n\nmilista\n\n[[1]]\n  entero factor    numero cadena\n1      1      a 1.0000000      a\n2      2      b 0.5000000      b\n3      3      c 0.3333333      c\n4      4      d 0.2500000      d\n\n[[2]]\n     [,1] [,2] [,3]\n[1,]    1    3    5\n[2,]    2    4    6\n\n[[3]]\n[1] 10 11 12\n\n[[4]]\n[1] \"a\"\n\n\nOjo con los corchetes\n\nmilista[[1]]\n\n  entero factor    numero cadena\n1      1      a 1.0000000      a\n2      2      b 0.5000000      b\n3      3      c 0.3333333      c\n4      4      d 0.2500000      d\n\n\nSi queremos ponerle nombres a los elementos\n\nmilista&lt;- list(datos = data, \n               matriz = m, \n               vector = xx,\n               valor = \"a\")\n\nmilista\n\n$datos\n  entero factor    numero cadena\n1      1      a 1.0000000      a\n2      2      b 0.5000000      b\n3      3      c 0.3333333      c\n4      4      d 0.2500000      d\n\n$matriz\n     [,1] [,2] [,3]\n[1,]    1    3    5\n[2,]    2    4    6\n\n$vector\n[1] 10 11 12\n\n$valor\n[1] \"a\""
  },
  {
    "objectID": "P1.html#ayuda",
    "href": "P1.html#ayuda",
    "title": "1  Primer acercamiento al uso del programa",
    "section": "1.8 Ayuda",
    "text": "1.8 Ayuda\nPedir ayuda es indispensable para aprender a escribir nuestros códigos. A prueba y error, es el mejor sistema para aprender. Podemos usar la función help, example y ?\n\nhelp(sum)         # Ayuda sobre función sum\nexample(sum)      # Ejemplo de función sum\n\n\nsum&gt; ## Pass a vector to sum, and it will add the elements together.\nsum&gt; sum(1:5)\n[1] 15\n\nsum&gt; ## Pass several numbers to sum, and it also adds the elements.\nsum&gt; sum(1, 2, 3, 4, 5)\n[1] 15\n\nsum&gt; ## In fact, you can pass vectors into several arguments, and everything gets added.\nsum&gt; sum(1:2, 3:5)\n[1] 15\n\nsum&gt; ## If there are missing values, the sum is unknown, i.e., also missing, ....\nsum&gt; sum(1:5, NA)\n[1] NA\n\nsum&gt; ## ... unless  we exclude missing values explicitly:\nsum&gt; sum(1:5, NA, na.rm = TRUE)\n[1] 15"
  },
  {
    "objectID": "P1.html#mi-ambiente",
    "href": "P1.html#mi-ambiente",
    "title": "1  Primer acercamiento al uso del programa",
    "section": "1.9 Mi ambiente",
    "text": "1.9 Mi ambiente\nTodos los objetos que hemos declarado hasta ahora son parte de nuestro “ambiente” (environment). Para saber qué está en nuestro ambiente usamos el comando\n\nls()\n\n [1] \"data\"            \"has_annotations\" \"m\"               \"mi_dataframe\"   \n [5] \"mi_matrix\"       \"milista\"         \"n\"               \"pandoc_dir\"     \n [9] \"quarto_bin_path\" \"sex\"             \"vector\"          \"x\"              \n[13] \"xx\"              \"y\"               \"yy\"             \n\ngc()           # Garbage collection, reporta memoria en uso\n\n          used (Mb) gc trigger (Mb) limit (Mb) max used (Mb)\nNcells  642198 34.3    1354041 72.4         NA  1354041 72.4\nVcells 1204443  9.2    8388608 64.0      16384  2167578 16.6\n\n\nPara borrar todos nuestros objetos, usamos el siguiente comando, que equivale a usar la escobita de la venta de environment\n\nrm(list=ls())  # Borrar objetos actuales"
  },
  {
    "objectID": "P1.html#directorio-de-trabajo",
    "href": "P1.html#directorio-de-trabajo",
    "title": "1  Primer acercamiento al uso del programa",
    "section": "1.10 Directorio de trabajo",
    "text": "1.10 Directorio de trabajo\nEs muy útil saber dónde estamos trabajando y donde queremos trabajar. Por eso podemos utilizar los siguientes comandos para saberlo\nOjo, checa, si estás desdes una PC, cómo cambian las “” por”/” o por “\\”\n\ngetwd()           # Directorio actual\n\n[1] \"/Users/anaescoto/Dropbox/2025/r_ccss_2025\"\n\n#setwd(\"\")# Cambio de directorio\n\nlist.files()      # Lista de archivos en ese directorio\n\n [1] \"Mi_Exportación.xlsx\"     \"P1.qmd\"                 \n [3] \"P1.rmarkdown\"            \"P2.qmd\"                 \n [5] \"P3.qmd\"                  \"P4.qmd\"                 \n [7] \"P5.qmd\"                  \"P6.qmd\"                 \n [9] \"P7.qmd\"                  \"_quarto.yml\"            \n[11] \"datos\"                   \"docs\"                   \n[13] \"esquisse.png\"            \"index.html\"             \n[15] \"index.qmd\"               \"instala.html\"           \n[17] \"instala.qmd\"             \"r_ccss_2025.Rproj\"      \n[19] \"s3fusionado_ppt2023.pdf\" \"site_libs\"              \n\n\nChecar que esto también se puede hacer desde el menú:\n\n\n\ni0"
  },
  {
    "objectID": "P1.html#proyectos",
    "href": "P1.html#proyectos",
    "title": "1  Primer acercamiento al uso del programa",
    "section": "1.11 Proyectos",
    "text": "1.11 Proyectos\nPero… a veces preferimos trabajar en proyectos, sobre todo porque nos da más control.\nHay gente que lo dice mejor que yo, como Hadley Wickham: https://es.r4ds.hadley.nz/flujo-de-trabajo-proyectos.html"
  },
  {
    "objectID": "P1.html#instalación-de-paquetes",
    "href": "P1.html#instalación-de-paquetes",
    "title": "1  Primer acercamiento al uso del programa",
    "section": "1.12 Instalación de paquetes",
    "text": "1.12 Instalación de paquetes\nLos paquetes son útiles para realizar funciones especiales. La especialización de paquetes es más rápida en R que en otros programas por ser software libre.\nVamos a instalar el paquete {foreign}, como su nombre lo indica, nos permite leer elementos “extranjeros” en R.\nPara instalar las paqueterías usamos el siguiente comando install.packages() Checa que adentro del paréntesis va el nombre de la librería, con comillas.\nVamos a instalar dos librerías que nos permiten importar formatos.\n\n#install.packages(\"foreign\", dependencies = TRUE)\n#install.packages(\"haven\", dependencies = TRUE)\n\nEste proceso no hay que hacerlo siempre. Si no sólo la primera vez. Una vez instalado un paquete de librería, la llamamos con el comando “library”\n\nlibrary(haven)\nlibrary(foreign)\n\n{foreing} nos permite leer archivos en formato de dBase, con extensión “.dbf”. Si bien no es un formato muy común para los investigadores, sí para los que generan la información, puesto que dBase es uno de los principales programas de administración de bases de datos.\nHe puesto un ejemplo de una base de datos mexicana en dbf, en este formato.\n\nejemplo_dbf&lt;-foreign::read.dbf(\"datos/ejemplo_dbf.DBF\") #checa cómo nos vamos adentro de nuestro directorio\n\nLos :: sirven para tres cosas:\n\ncargar un comando de un paquete, sin haberlo cargado\npara identificar de qué paquete viene el comando.\npara especificar en caso que hayan dos comandos iguales en un paquete, usar el que tenemos de los paquetes."
  },
  {
    "objectID": "P1.html#paquete-pacman",
    "href": "P1.html#paquete-pacman",
    "title": "1  Primer acercamiento al uso del programa",
    "section": "1.13 Paquete {pacman}",
    "text": "1.13 Paquete {pacman}\nEn general, cuando hacemos nuestro código querremos verificar que nuestras librerías estén instaladas. Si actualizamos nuestro R y Rstudio es probable (sobre todo en MAC) que hayamos perdido alguno.\nEste es un ejemplo de un código. Y vamos a introducir un paquete muy útil llamado {pacman}\n\nif (!require(\"pacman\")) install.packages(\"pacman\") # instala pacman si se requiere\n\nCargando paquete requerido: pacman\n\npacman::p_load(tidyverse, readxl, writexl, haven, sjlabelled, foreign) #carga los paquetes necesarios para esta práctica\n\nHay muchos formatos de almacenamiento de bases de datos. Vamos a aprender a importar información desde ellos."
  },
  {
    "objectID": "P1.html#estilos",
    "href": "P1.html#estilos",
    "title": "1  Primer acercamiento al uso del programa",
    "section": "1.14 Estilos",
    "text": "1.14 Estilos\nEscribir código tiene su gramática. Por lo general en este curso seguiremos el estilo de Google\nhttps://google.github.io/styleguide/Rguide.html"
  },
  {
    "objectID": "P2.html#consejo-para-escribir-código",
    "href": "P2.html#consejo-para-escribir-código",
    "title": "2  Importación de conjuntos de datos",
    "section": "2.1 Consejo para escribir “código””",
    "text": "2.1 Consejo para escribir “código””\nEn general, cuando hacemos nuestro código querremos verificar que nuestras librerías estén instaladas. Si actualizamos nuestro R y Rstudio es probable que hayamos perdido alguno.\nEste es un ejemplo de un código. Y vamos a introducir un paquete muy útil llamado {pacman}\n\nif (!require(\"pacman\")) install.packages(\"pacman\") # instala pacman si se requiere\n\nCargando paquete requerido: pacman\n\npacman::p_load(tidyverse, \n               readxl,writexl, # importar hojas de cálculo\n               haven, foreign, # importación de dta y sab\n               sjlabelled, # etiquetas\n               janitor, skimr, #carga los paquetes necesarios para esta práctica\n               curl) # para que lea urls"
  },
  {
    "objectID": "P2.html#importación-de-datos",
    "href": "P2.html#importación-de-datos",
    "title": "2  Importación de conjuntos de datos",
    "section": "2.2 Importación de datos",
    "text": "2.2 Importación de datos\n\n2.2.1 Desde Excel\nEl paquete más compatible con RStudio es readxl. A veces, otros paquetes tienen más problemas de configuración entre R y el Java.\n\nejemploxl &lt;- readxl::read_excel(\"datos/ejemplo_xlsx.xlsx\", sheet = \"para_importar\")\n\nNew names:\n• `` -&gt; `...128`\n• `` -&gt; `...129`\n• `` -&gt; `...132`\n• `PIB (Paridad de Poder Adquisitivo)` -&gt; `PIB (Paridad de Poder\n  Adquisitivo)...135`\n• `PIB (Paridad de Poder Adquisitivo)` -&gt; `PIB (Paridad de Poder\n  Adquisitivo)...136`\n• `PIB per cápita (Paridad de Poder Adquisitivo)` -&gt; `PIB per cápita (Paridad\n  de Poder Adquisitivo)...137`\n• `PIB per cápita (Paridad de Poder Adquisitivo)` -&gt; `PIB per cápita (Paridad\n  de Poder Adquisitivo)...138`\n• `PIB per cápita` -&gt; `PIB per cápita...139`\n• `PIB per cápita` -&gt; `PIB per cápita...140`\n• `PIB` -&gt; `PIB...141`\n• `PIB` -&gt; `PIB...142`\n\n\nComo el nombre de paquete lo indica, sólo lee. Para escribir en este formato, recomiendo el paquete “writexl”. Lo instalamos anteriormente.\nSi quisiéramos exportar un objeto a Excel\n\nwritexl::write_xlsx(ejemploxl, path = \"Mi_Exportación.xlsx\")\n\n\n\n2.2.2 Desde STATA y SPSS\nSi bien también se puede realizar desde el paquete {foreign}. Pero este no importa algunas características como las etiquetas y tampoco funciona con las versiones más nuevas de STATA. Vamos a instalar otro paquete, compatible con el mundo tidyverse.\nRecuerda que no hay que instalarlo (viene adentro de tidyverse).\n\nconcentradohogar &lt;- haven::read_dta(\"datos/concentradohogar.dta\")\n\n!Importante, a R no le gustan los objetos con nombres que empiezan en números\nEl paquete haven sí exporta información.\n\nhaven::write_dta(concentradohogar, \"datos/mi_exportacion.dta\", version = 12)\n\nCon SSPS es muy parecido. Dentro de “haven” hay una función específica para ello.\n\ningresos&lt;- haven::read_sav(\"datos/ingresos.sav\")\n\nPara escribir\n\n#haven::write_sav(concentradohogar , \"mi_exportacion.sav\")\n\nCheca que en todas las exportaciones en los nombres hay que incluir la extensión del programa. Si quieres guardar en un lugar diferente al directorio del trabajo, hay que escribir toda la ruta dentro de la computadora."
  },
  {
    "objectID": "P2.html#desde-.dbf",
    "href": "P2.html#desde-.dbf",
    "title": "2  Importación de conjuntos de datos",
    "section": "2.3 Desde .dbf",
    "text": "2.3 Desde .dbf\n{foreing} nos permite leer archivos en formato de dBase, con extensión “.dbf”. Si bien no es un formato muy común para los investigadores, sí para los que generan la información, puesto que dBase es uno de los principales programas de administración de bases de datos.\nHe puesto un ejemplo de una base de datos mexicana en dbf, en este formato.\n\nejemplo_dbf&lt;-foreign::read.dbf(\"datos/ejemplo_dbf.DBF\") #checa cómo nos vamos adentro de nuestro directorio"
  },
  {
    "objectID": "P2.html#revisión-de-nuestro-data.frame",
    "href": "P2.html#revisión-de-nuestro-data.frame",
    "title": "2  Importación de conjuntos de datos",
    "section": "2.4 Revisión de nuestro data.frame",
    "text": "2.4 Revisión de nuestro data.frame\nVamos a revisar la data.frame,\n\nclass(concentradohogar) # tipo de objeto\n\n[1] \"tbl_df\"     \"tbl\"        \"data.frame\"\n\nnames(concentradohogar) # lista las variables\n\n  [1] \"folioviv\"   \"foliohog\"   \"ubica_geo\"  \"tam_loc\"    \"est_socio\" \n  [6] \"est_dis\"    \"upm\"        \"factor\"     \"clase_hog\"  \"sexo_jefe\" \n [11] \"edad_jefe\"  \"educa_jefe\" \"tot_integ\"  \"hombres\"    \"mujeres\"   \n [16] \"mayores\"    \"menores\"    \"p12_64\"     \"p65mas\"     \"ocupados\"  \n [21] \"percep_ing\" \"perc_ocupa\" \"ing_cor\"    \"ingtrab\"    \"trabajo\"   \n [26] \"sueldos\"    \"horas_extr\" \"comisiones\" \"aguinaldo\"  \"indemtrab\" \n [31] \"otra_rem\"   \"remu_espec\" \"negocio\"    \"noagrop\"    \"industria\" \n [36] \"comercio\"   \"servicios\"  \"agrope\"     \"agricolas\"  \"pecuarios\" \n [41] \"reproducc\"  \"pesca\"      \"otros_trab\" \"rentas\"     \"utilidad\"  \n [46] \"arrenda\"    \"transfer\"   \"jubilacion\" \"becas\"      \"donativos\" \n [51] \"remesas\"    \"bene_gob\"   \"transf_hog\" \"trans_inst\" \"estim_alqu\"\n [56] \"otros_ing\"  \"gasto_mon\"  \"alimentos\"  \"ali_dentro\" \"cereales\"  \n [61] \"carnes\"     \"pescado\"    \"leche\"      \"huevo\"      \"aceites\"   \n [66] \"tuberculo\"  \"verduras\"   \"frutas\"     \"azucar\"     \"cafe\"      \n [71] \"especias\"   \"otros_alim\" \"bebidas\"    \"ali_fuera\"  \"tabaco\"    \n [76] \"vesti_calz\" \"vestido\"    \"calzado\"    \"vivienda\"   \"alquiler\"  \n [81] \"pred_cons\"  \"agua\"       \"energia\"    \"limpieza\"   \"cuidados\"  \n [86] \"utensilios\" \"enseres\"    \"salud\"      \"atenc_ambu\" \"hospital\"  \n [91] \"medicinas\"  \"transporte\" \"publico\"    \"foraneo\"    \"adqui_vehi\"\n [96] \"mantenim\"   \"refaccion\"  \"combus\"     \"comunica\"   \"educa_espa\"\n[101] \"educacion\"  \"esparci\"    \"paq_turist\" \"personales\" \"cuida_pers\"\n[106] \"acces_pers\" \"otros_gas\"  \"transf_gas\" \"percep_tot\" \"retiro_inv\"\n[111] \"prestamos\"  \"otras_perc\" \"ero_nm_viv\" \"ero_nm_hog\" \"erogac_tot\"\n[116] \"cuota_viv\"  \"mater_serv\" \"material\"   \"servicio\"   \"deposito\"  \n[121] \"prest_terc\" \"pago_tarje\" \"deudas\"     \"balance\"    \"otras_erog\"\n[126] \"smg\"       \n\nhead(concentradohogar) # muestra las primeras 6 líneas\n\n# A tibble: 6 × 126\n  folioviv   foliohog ubica_geo tam_loc est_socio est_dis upm   factor clase_hog\n  &lt;chr&gt;      &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;    \n1 0100005002 1        01001     1       4         003     0000…    206 3        \n2 0100005003 1        01001     1       4         003     0000…    206 2        \n3 0100005004 1        01001     1       4         003     0000…    206 2        \n4 0100012002 1        01001     1       3         002     0000…    167 3        \n5 0100012002 2        01001     1       3         002     0000…    167 1        \n6 0100012004 1        01001     1       3         002     0000…    167 2        \n# ℹ 117 more variables: sexo_jefe &lt;chr&gt;, edad_jefe &lt;dbl&gt;, educa_jefe &lt;chr&gt;,\n#   tot_integ &lt;dbl&gt;, hombres &lt;dbl&gt;, mujeres &lt;dbl&gt;, mayores &lt;dbl&gt;,\n#   menores &lt;dbl&gt;, p12_64 &lt;dbl&gt;, p65mas &lt;dbl&gt;, ocupados &lt;dbl&gt;,\n#   percep_ing &lt;dbl&gt;, perc_ocupa &lt;dbl&gt;, ing_cor &lt;dbl&gt;, ingtrab &lt;dbl&gt;,\n#   trabajo &lt;dbl&gt;, sueldos &lt;dbl&gt;, horas_extr &lt;dbl&gt;, comisiones &lt;dbl&gt;,\n#   aguinaldo &lt;dbl&gt;, indemtrab &lt;dbl&gt;, otra_rem &lt;dbl&gt;, remu_espec &lt;dbl&gt;,\n#   negocio &lt;dbl&gt;, noagrop &lt;dbl&gt;, industria &lt;dbl&gt;, comercio &lt;dbl&gt;, …\n\ntable(concentradohogar$clase_hog) # un tabulado simple\n\n\n    1     2     3     4     5 \n11886 55540 21786   583   307"
  },
  {
    "objectID": "P2.html#revisión-con-dplyr",
    "href": "P2.html#revisión-con-dplyr",
    "title": "2  Importación de conjuntos de datos",
    "section": "2.5 Revisión con dplyr",
    "text": "2.5 Revisión con dplyr\nOperador de “pipe” o “tubería” %&gt;% (Ctrl+Shift+M) Antes de continuar, presentemos el operador “pipe” %&gt;%. dplyr importa este operador de otro paquete (magrittr). Este operador le permite canalizar la salida de una función a la entrada de otra función. En lugar de funciones de anidamiento (lectura desde adentro hacia afuera), la idea de la tubería es leer las funciones de izquierda a derecha.\n\nconcentradohogar %&gt;% \n    dplyr::select(sexo_jefe, edad_jefe) %&gt;% \n    head\n\n# A tibble: 6 × 2\n  sexo_jefe edad_jefe\n  &lt;chr&gt;         &lt;dbl&gt;\n1 2                91\n2 1                68\n3 1                56\n4 1                87\n5 1                27\n6 1                57\n\n\n\nconcentradohogar %&gt;% \n    dplyr::select(sexo_jefe, edad_jefe) %&gt;% \n    glimpse\n\nRows: 90,102\nColumns: 2\n$ sexo_jefe &lt;chr&gt; \"2\", \"1\", \"1\", \"1\", \"1\", \"1\", \"2\", \"2\", \"2\", \"1\", \"1\", \"1\", …\n$ edad_jefe &lt;dbl&gt; 91, 68, 56, 87, 27, 57, 47, 75, 70, 69, 48, 73, 64, 55, 58, …\n\n\n\n2.5.1 Ojeando\n\ndplyr::glimpse(concentradohogar)\n\nRows: 90,102\nColumns: 126\n$ folioviv   &lt;chr&gt; \"0100005002\", \"0100005003\", \"0100005004\", \"0100012002\", \"01…\n$ foliohog   &lt;chr&gt; \"1\", \"1\", \"1\", \"1\", \"2\", \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", \"1\",…\n$ ubica_geo  &lt;chr&gt; \"01001\", \"01001\", \"01001\", \"01001\", \"01001\", \"01001\", \"0100…\n$ tam_loc    &lt;chr&gt; \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", \"1\",…\n$ est_socio  &lt;chr&gt; \"4\", \"4\", \"4\", \"3\", \"3\", \"3\", \"3\", \"4\", \"4\", \"4\", \"4\", \"3\",…\n$ est_dis    &lt;chr&gt; \"003\", \"003\", \"003\", \"002\", \"002\", \"002\", \"002\", \"003\", \"00…\n$ upm        &lt;chr&gt; \"0000001\", \"0000001\", \"0000001\", \"0000002\", \"0000002\", \"000…\n$ factor     &lt;dbl&gt; 206, 206, 206, 167, 167, 167, 167, 212, 212, 212, 212, 184,…\n$ clase_hog  &lt;chr&gt; \"3\", \"2\", \"2\", \"3\", \"1\", \"2\", \"2\", \"1\", \"2\", \"2\", \"2\", \"1\",…\n$ sexo_jefe  &lt;chr&gt; \"2\", \"1\", \"1\", \"1\", \"1\", \"1\", \"2\", \"2\", \"2\", \"1\", \"1\", \"1\",…\n$ edad_jefe  &lt;dbl&gt; 91, 68, 56, 87, 27, 57, 47, 75, 70, 69, 48, 73, 64, 55, 58,…\n$ educa_jefe &lt;chr&gt; \"03\", \"08\", \"10\", \"11\", \"08\", \"08\", \"10\", \"06\", \"10\", \"04\",…\n$ tot_integ  &lt;dbl&gt; 3, 2, 3, 4, 1, 4, 4, 1, 3, 2, 5, 1, 4, 3, 1, 6, 4, 2, 3, 1,…\n$ hombres    &lt;dbl&gt; 0, 1, 2, 2, 1, 2, 2, 0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 3, 0,…\n$ mujeres    &lt;dbl&gt; 3, 1, 1, 2, 0, 2, 2, 1, 2, 1, 4, 0, 3, 2, 1, 5, 3, 1, 0, 1,…\n$ mayores    &lt;dbl&gt; 3, 2, 3, 4, 1, 3, 4, 1, 3, 2, 5, 1, 4, 2, 1, 4, 4, 2, 1, 1,…\n$ menores    &lt;dbl&gt; 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 2, 0, 0, 2, 0,…\n$ p12_64     &lt;dbl&gt; 2, 1, 3, 2, 1, 3, 4, 0, 2, 0, 5, 0, 4, 2, 1, 4, 3, 0, 1, 1,…\n$ p65mas     &lt;dbl&gt; 1, 1, 0, 2, 0, 0, 0, 1, 1, 2, 0, 1, 0, 0, 0, 0, 1, 2, 0, 0,…\n$ ocupados   &lt;dbl&gt; 1, 2, 2, 0, 1, 3, 1, 0, 3, 1, 1, 0, 1, 1, 0, 3, 1, 1, 1, 1,…\n$ percep_ing &lt;dbl&gt; 3, 2, 2, 2, 1, 4, 2, 1, 3, 2, 1, 1, 2, 2, 1, 3, 2, 2, 1, 1,…\n$ perc_ocupa &lt;dbl&gt; 1, 2, 2, 0, 1, 3, 1, 0, 3, 1, 1, 0, 1, 1, 0, 3, 1, 1, 1, 1,…\n$ ing_cor    &lt;dbl&gt; 56123.75, 108048.87, 133852.88, 105054.15, 24211.95, 121649…\n$ ingtrab    &lt;dbl&gt; 35706.51, 66766.28, 93081.50, 0.00, 22255.43, 40255.41, 333…\n$ trabajo    &lt;dbl&gt; 35706.51, 66766.28, 51603.24, 0.00, 17364.13, 40255.41, 327…\n$ sueldos    &lt;dbl&gt; 33749.99, 61630.42, 41086.95, 0.00, 17364.13, 36586.94, 246…\n$ horas_extr &lt;dbl&gt; 0.00, 0.00, 978.26, 0.00, 0.00, 0.00, 7092.39, 0.00, 0.00, …\n$ comisiones &lt;dbl&gt; 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00,…\n$ aguinaldo  &lt;dbl&gt; 1956.52, 4646.73, 5135.86, 0.00, 0.00, 3668.47, 1027.17, 0.…\n$ indemtrab  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ otra_rem   &lt;dbl&gt; 0.00, 489.13, 4402.17, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, …\n$ remu_espec &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ negocio    &lt;dbl&gt; 0.00, 0.00, 41478.26, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0…\n$ noagrop    &lt;dbl&gt; 0.00, 0.00, 41478.26, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0…\n$ industria  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ comercio   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ servicios  &lt;dbl&gt; 0.00, 0.00, 41478.26, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0…\n$ agrope     &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ agricolas  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ pecuarios  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ reproducc  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ pesca      &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ otros_trab &lt;dbl&gt; 0.00, 0.00, 0.00, 0.00, 4891.30, 0.00, 586.95, 0.00, 0.00, …\n$ rentas     &lt;dbl&gt; 0.00, 32282.60, 11739.13, 0.00, 0.00, 72684.78, 0.00, 0.00,…\n$ utilidad   &lt;dbl&gt; 0.00, 0.00, 0.00, 0.00, 0.00, 72684.78, 0.00, 0.00, 16007.2…\n$ arrenda    &lt;dbl&gt; 0.00, 32282.60, 11739.13, 0.00, 0.00, 0.00, 0.00, 0.00, 0.0…\n$ transfer   &lt;dbl&gt; 8804.34, 8999.99, 0.00, 90538.03, 1956.52, 0.00, 26902.17, …\n$ jubilacion &lt;dbl&gt; 0.00, 0.00, 0.00, 79239.13, 0.00, 0.00, 0.00, 73369.56, 440…\n$ becas      &lt;dbl&gt; 391.3, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.…\n$ donativos  &lt;dbl&gt; 0.00, 0.00, 0.00, 0.00, 1956.52, 0.00, 26902.17, 0.00, 0.00…\n$ remesas    &lt;dbl&gt; 978.26, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.0…\n$ bene_gob   &lt;dbl&gt; 7434.78, 0.00, 0.00, 11298.90, 0.00, 0.00, 0.00, 5649.45, 0…\n$ transf_hog &lt;dbl&gt; 0.00, 8999.99, 0.00, 0.00, 0.00, 0.00, 0.00, 2442.84, 0.00,…\n$ trans_inst &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ estim_alqu &lt;dbl&gt; 11612.90, 0.00, 29032.25, 14516.12, 0.00, 8709.67, 0.00, 14…\n$ otros_ing  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ gasto_mon  &lt;dbl&gt; 35091.17, 78670.73, 101647.27, 46702.31, 26927.85, 51176.07…\n$ alimentos  &lt;dbl&gt; 9514.19, 17524.25, 18321.36, 14759.90, 12458.47, 6351.40, 1…\n$ ali_dentro &lt;dbl&gt; 6814.20, 5181.41, 16907.08, 6274.20, 7315.63, 951.42, 11828…\n$ cereales   &lt;dbl&gt; 1465.70, 231.42, 1362.84, 1928.53, 308.56, 617.14, 1915.67,…\n$ carnes     &lt;dbl&gt; 617.14, 4114.28, 5142.85, 1928.57, 2442.84, 0.00, 6685.69, …\n$ pescado    &lt;dbl&gt; 0.00, 0.00, 0.00, 0.00, 1799.99, 0.00, 1414.28, 0.00, 0.00,…\n$ leche      &lt;dbl&gt; 269.99, 578.57, 0.00, 1414.26, 0.00, 334.28, 0.00, 565.70, …\n$ huevo      &lt;dbl&gt; 0.00, 257.14, 1028.57, 0.00, 321.42, 0.00, 0.00, 0.00, 1002…\n$ aceites    &lt;dbl&gt; 0.00, 0.00, 565.71, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.0…\n$ tuberculo  &lt;dbl&gt; 0.00, 0.00, 0.00, 0.00, 1028.56, 0.00, 321.42, 621.38, 0.00…\n$ verduras   &lt;dbl&gt; 2288.53, 0.00, 1735.69, 1002.84, 642.85, 0.00, 951.41, 2069…\n$ frutas     &lt;dbl&gt; 1954.27, 0.00, 0.00, 0.00, 0.00, 0.00, 539.99, 1234.27, 195…\n$ azucar     &lt;dbl&gt; 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00,…\n$ cafe       &lt;dbl&gt; 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00,…\n$ especias   &lt;dbl&gt; 218.57, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.0…\n$ otros_alim &lt;dbl&gt; 0.00, 0.00, 5142.85, 0.00, 0.00, 0.00, 0.00, 3857.14, 1928.…\n$ bebidas    &lt;dbl&gt; 0.00, 0.00, 1928.57, 0.00, 771.41, 0.00, 0.00, 462.84, 2378…\n$ ali_fuera  &lt;dbl&gt; 2699.99, 12342.84, 1414.28, 8485.70, 5142.84, 5399.98, 5528…\n$ tabaco     &lt;dbl&gt; 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00,…\n$ vesti_calz &lt;dbl&gt; 2445.64, 684.78, 0.00, 1369.56, 0.00, 1751.06, 9782.60, 489…\n$ vestido    &lt;dbl&gt; 2445.64, 684.78, 0.00, 1369.56, 0.00, 1751.06, 5380.43, 489…\n$ calzado    &lt;dbl&gt; 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 4402.17, 0.00, 0.00, 0.…\n$ vivienda   &lt;dbl&gt; 1736.75, 29649.66, 3232.25, 2850.00, 2700.00, 3660.00, 1822…\n$ alquiler   &lt;dbl&gt; 0.00, 24677.41, 0.00, 0.00, 0.00, 0.00, 13935.48, 0.00, 0.0…\n$ pred_cons  &lt;dbl&gt; 116.75, 2032.25, 2032.25, 150.00, 0.00, 150.00, 0.00, 750.0…\n$ agua       &lt;dbl&gt; 780, 540, 750, 450, 450, 1200, 1410, 420, 840, 420, 900, 87…\n$ energia    &lt;dbl&gt; 840.00, 2400.00, 450.00, 2250.00, 2250.00, 2310.00, 2876.61…\n$ limpieza   &lt;dbl&gt; 2075.80, 2816.11, 1422.55, 1228.04, 890.36, 3518.67, 2386.3…\n$ cuidados   &lt;dbl&gt; 2075.80, 2816.11, 1422.55, 1228.04, 792.54, 3518.67, 2386.3…\n$ utensilios &lt;dbl&gt; 0.00, 0.00, 0.00, 0.00, 97.82, 0.00, 0.00, 0.00, 489.13, 23…\n$ enseres    &lt;dbl&gt; 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00,…\n$ salud      &lt;dbl&gt; 2641.29, 0.00, 0.00, 0.00, 0.00, 1007.60, 8902.16, 3277.16,…\n$ atenc_ambu &lt;dbl&gt; 2641.29, 0.00, 0.00, 0.00, 0.00, 1007.60, 7923.90, 3277.16,…\n$ hospital   &lt;dbl&gt; 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00,…\n$ medicinas  &lt;dbl&gt; 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 978.26, 0.00, 978.26, 0…\n$ transporte &lt;dbl&gt; 6773.62, 6706.44, 23312.90, 23574.19, 5080.63, 20601.28, 84…\n$ publico    &lt;dbl&gt; 2314.28, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 771.42, 1157.1…\n$ foraneo    &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ adqui_vehi &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ mantenim   &lt;dbl&gt; 2903.22, 4354.83, 11612.90, 20322.58, 4064.51, 17709.67, 53…\n$ refaccion  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ combus     &lt;dbl&gt; 2903.22, 4354.83, 11612.90, 20322.58, 4064.51, 17709.67, 53…\n$ comunica   &lt;dbl&gt; 1556.12, 2351.61, 11700.00, 3251.61, 1016.12, 2891.61, 3033…\n$ educa_espa &lt;dbl&gt; 2903.22, 0.00, 34728.25, 0.00, 4209.66, 6967.74, 9058.05, 0…\n$ educacion  &lt;dbl&gt; 2903.22, 0.00, 0.00, 0.00, 0.00, 6967.74, 6735.47, 0.00, 0.…\n$ esparci    &lt;dbl&gt; 0.00, 0.00, 5380.43, 0.00, 4209.66, 0.00, 2322.58, 0.00, 0.…\n$ paq_turist &lt;dbl&gt; 0.00, 0.00, 29347.82, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0…\n$ personales &lt;dbl&gt; 4097.44, 3870.14, 13416.08, 2920.62, 1344.17, 812.90, 4918.…\n$ cuida_pers &lt;dbl&gt; 673.53, 3745.14, 1916.09, 2920.62, 1344.17, 812.90, 4708.95…\n$ acces_pers &lt;dbl&gt; 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00,…\n$ otros_gas  &lt;dbl&gt; 3423.91, 125.00, 11499.99, 0.00, 0.00, 0.00, 210.00, 0.00, …\n$ transf_gas &lt;dbl&gt; 2903.22, 17419.35, 7213.88, 0.00, 244.56, 6505.42, 73.36, 4…\n$ percep_tot &lt;dbl&gt; 0.00, 0.00, 0.00, 0.00, 3214.27, 0.00, 0.00, 0.00, 0.00, 0.…\n$ retiro_inv &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ prestamos  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ otras_perc &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ ero_nm_viv &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ ero_nm_hog &lt;dbl&gt; 0.00, 0.00, 0.00, 0.00, 3214.27, 0.00, 0.00, 0.00, 0.00, 0.…\n$ erogac_tot &lt;dbl&gt; 0.00, 19565.21, 0.00, 28124.99, 0.00, 5771.73, 360.97, 2445…\n$ cuota_viv  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ mater_serv &lt;dbl&gt; 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00,…\n$ material   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ servicio   &lt;dbl&gt; 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00,…\n$ deposito   &lt;dbl&gt; 0.00, 19565.21, 0.00, 28124.99, 0.00, 5771.73, 0.00, 2445.6…\n$ prest_terc &lt;dbl&gt; 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00,…\n$ pago_tarje &lt;dbl&gt; 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00,…\n$ deudas     &lt;dbl&gt; 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00,…\n$ balance    &lt;dbl&gt; 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00,…\n$ otras_erog &lt;dbl&gt; 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 360.97, 0.00, 0.00, 0.0…\n$ smg        &lt;dbl&gt; 15558.3, 15558.3, 15558.3, 15558.3, 15558.3, 15558.3, 15558…\n\ndplyr::glimpse(concentradohogar[,20:30]) # en corchete del lado derecho podemos ojear columnas \n\nRows: 90,102\nColumns: 11\n$ ocupados   &lt;dbl&gt; 1, 2, 2, 0, 1, 3, 1, 0, 3, 1, 1, 0, 1, 1, 0, 3, 1, 1, 1, 1,…\n$ percep_ing &lt;dbl&gt; 3, 2, 2, 2, 1, 4, 2, 1, 3, 2, 1, 1, 2, 2, 1, 3, 2, 2, 1, 1,…\n$ perc_ocupa &lt;dbl&gt; 1, 2, 2, 0, 1, 3, 1, 0, 3, 1, 1, 0, 1, 1, 0, 3, 1, 1, 1, 1,…\n$ ing_cor    &lt;dbl&gt; 56123.75, 108048.87, 133852.88, 105054.15, 24211.95, 121649…\n$ ingtrab    &lt;dbl&gt; 35706.51, 66766.28, 93081.50, 0.00, 22255.43, 40255.41, 333…\n$ trabajo    &lt;dbl&gt; 35706.51, 66766.28, 51603.24, 0.00, 17364.13, 40255.41, 327…\n$ sueldos    &lt;dbl&gt; 33749.99, 61630.42, 41086.95, 0.00, 17364.13, 36586.94, 246…\n$ horas_extr &lt;dbl&gt; 0.00, 0.00, 978.26, 0.00, 0.00, 0.00, 7092.39, 0.00, 0.00, …\n$ comisiones &lt;dbl&gt; 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00,…\n$ aguinaldo  &lt;dbl&gt; 1956.52, 4646.73, 5135.86, 0.00, 0.00, 3668.47, 1027.17, 0.…\n$ indemtrab  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n\n\nPodemos hacer un tipo “labelbook”, usando una función que viene de la librería {sjlabelled}, get_labels(). Funciona para toda la base o para columnas, o para variables.\n\n#print(sjlabelled::get_labels(concentradohogar)) #todas\nprint(sjlabelled::get_labels(concentradohogar[, 20:30])) #de las segundas 10 variables\n\n$ocupados\nNULL\n\n$percep_ing\nNULL\n\n$perc_ocupa\nNULL\n\n$ing_cor\nNULL\n\n$ingtrab\nNULL\n\n$trabajo\nNULL\n\n$sueldos\nNULL\n\n$horas_extr\nNULL\n\n$comisiones\nNULL\n\n$aguinaldo\nNULL\n\n$indemtrab\nNULL\n\n\nNo tienen :(\nEn singular nos da las etiquetas de las variables, no de los valores:\n\n#print(get_label(concentradohogar)) #todas\nprint(get_label(concentradohogar[, 1:10])) #de las primeras 10 variables\n\n                      folioviv                       foliohog \n\"Identificador de la vivienda\"      \"Identificador del hogar\" \n                     ubica_geo                        tam_loc \n        \"Ubicación geográfica\"          \"Tamaño de localidad\" \n                     est_socio                        est_dis \n      \"Estrato socioeconómico\"   \"Estrato de diseño muestral\" \n                           upm                         factor \n \"Unidad primaria de muestreo\"          \"Factor de expansión\" \n                     clase_hog                      sexo_jefe \n              \"Clase de hogar\"      \"Sexo del jefe del hogar\" \n\nprint(get_label(concentradohogar$clase_hog)) #\n\n[1] \"Clase de hogar\"\n\n\n\n\n2.5.2 Revisión con {skimr}\n\nskimr::skim(concentradohogar)\n\n\nData summary\n\n\nName\nconcentradohogar\n\n\nNumber of rows\n90102\n\n\nNumber of columns\n126\n\n\n_______________________\n\n\n\nColumn type frequency:\n\n\n\ncharacter\n10\n\n\nnumeric\n116\n\n\n________________________\n\n\n\nGroup variables\nNone\n\n\n\nVariable type: character\n\n\n\n\n\n\n\n\n\n\n\n\n\nskim_variable\nn_missing\ncomplete_rate\nmin\nmax\nempty\nn_unique\nwhitespace\n\n\n\n\nfolioviv\n0\n1\n10\n10\n0\n88823\n0\n\n\nfoliohog\n0\n1\n1\n1\n0\n5\n0\n\n\nubica_geo\n0\n1\n5\n5\n0\n1132\n0\n\n\ntam_loc\n0\n1\n1\n1\n0\n4\n0\n\n\nest_socio\n0\n1\n1\n1\n0\n4\n0\n\n\nest_dis\n0\n1\n3\n3\n0\n560\n0\n\n\nupm\n0\n1\n7\n7\n0\n10211\n0\n\n\nclase_hog\n0\n1\n1\n1\n0\n5\n0\n\n\nsexo_jefe\n0\n1\n1\n1\n0\n2\n0\n\n\neduca_jefe\n0\n1\n2\n2\n0\n11\n0\n\n\n\nVariable type: numeric\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nskim_variable\nn_missing\ncomplete_rate\nmean\nsd\np0\np25\np50\np75\np100\nhist\n\n\n\n\nfactor\n0\n1\n416.86\n419.41\n6.0\n156.00\n283.00\n530.00\n6470.00\n▇▁▁▁▁\n\n\nedad_jefe\n0\n1\n51.23\n15.91\n13.0\n39.00\n50.00\n63.00\n109.00\n▂▇▇▂▁\n\n\ntot_integ\n0\n1\n3.44\n1.78\n1.0\n2.00\n3.00\n4.00\n19.00\n▇▂▁▁▁\n\n\nhombres\n0\n1\n1.66\n1.12\n0.0\n1.00\n1.00\n2.00\n12.00\n▇▂▁▁▁\n\n\nmujeres\n0\n1\n1.78\n1.17\n0.0\n1.00\n2.00\n2.00\n11.00\n▇▂▁▁▁\n\n\nmayores\n0\n1\n2.78\n1.36\n1.0\n2.00\n3.00\n4.00\n15.00\n▇▃▁▁▁\n\n\nmenores\n0\n1\n0.65\n0.95\n0.0\n0.00\n0.00\n1.00\n9.00\n▇▂▁▁▁\n\n\np12_64\n0\n1\n2.45\n1.49\n0.0\n1.00\n2.00\n3.00\n15.00\n▇▂▁▁▁\n\n\np65mas\n0\n1\n0.33\n0.62\n0.0\n0.00\n0.00\n1.00\n4.00\n▇▂▁▁▁\n\n\nocupados\n0\n1\n1.66\n1.09\n0.0\n1.00\n2.00\n2.00\n11.00\n▇▂▁▁▁\n\n\npercep_ing\n0\n1\n2.26\n1.18\n0.0\n1.00\n2.00\n3.00\n16.00\n▇▁▁▁▁\n\n\nperc_ocupa\n0\n1\n1.61\n1.06\n0.0\n1.00\n1.00\n2.00\n12.00\n▇▂▁▁▁\n\n\ning_cor\n0\n1\n61489.96\n78324.84\n0.0\n28385.69\n46073.68\n74343.65\n7153770.46\n▇▁▁▁▁\n\n\ningtrab\n0\n1\n40359.54\n52327.25\n0.0\n12170.67\n29899.10\n54327.95\n5891913.57\n▇▁▁▁▁\n\n\ntrabajo\n0\n1\n33514.63\n44828.95\n0.0\n49.18\n23867.40\n47445.65\n3771994.00\n▇▁▁▁▁\n\n\nsueldos\n0\n1\n28866.79\n37377.13\n0.0\n0.00\n21130.43\n41086.95\n2655737.70\n▇▁▁▁▁\n\n\nhoras_extr\n0\n1\n292.47\n1995.00\n0.0\n0.00\n0.00\n0.00\n110543.47\n▇▁▁▁▁\n\n\ncomisiones\n0\n1\n879.37\n6484.49\n0.0\n0.00\n0.00\n0.00\n690491.80\n▇▁▁▁▁\n\n\naguinaldo\n0\n1\n1489.57\n3781.67\n0.0\n0.00\n0.00\n1475.40\n293478.25\n▇▁▁▁▁\n\n\nindemtrab\n0\n1\n129.04\n3639.71\n0.0\n0.00\n0.00\n0.00\n449999.99\n▇▁▁▁▁\n\n\notra_rem\n0\n1\n654.77\n3389.42\n0.0\n0.00\n0.00\n0.00\n225245.89\n▇▁▁▁▁\n\n\nremu_espec\n0\n1\n1202.61\n11869.30\n0.0\n0.00\n0.00\n0.00\n3015428.52\n▇▁▁▁▁\n\n\nnegocio\n0\n1\n5525.91\n28303.90\n0.0\n0.00\n0.00\n1549.18\n5712891.84\n▇▁▁▁▁\n\n\nnoagrop\n0\n1\n4374.96\n17327.48\n0.0\n0.00\n0.00\n0.00\n1114679.34\n▇▁▁▁▁\n\n\nindustria\n0\n1\n997.87\n8092.96\n0.0\n0.00\n0.00\n0.00\n1114679.34\n▇▁▁▁▁\n\n\ncomercio\n0\n1\n1466.54\n11309.68\n0.0\n0.00\n0.00\n0.00\n889369.06\n▇▁▁▁▁\n\n\nservicios\n0\n1\n1910.54\n10479.11\n0.0\n0.00\n0.00\n0.00\n889524.59\n▇▁▁▁▁\n\n\nagrope\n0\n1\n1150.96\n22407.72\n0.0\n0.00\n0.00\n0.00\n5712891.84\n▇▁▁▁▁\n\n\nagricolas\n0\n1\n584.18\n9493.09\n0.0\n0.00\n0.00\n0.00\n1473748.04\n▇▁▁▁▁\n\n\npecuarios\n0\n1\n489.26\n19957.84\n0.0\n0.00\n0.00\n0.00\n5712891.84\n▇▁▁▁▁\n\n\nreproducc\n0\n1\n29.05\n1651.04\n0.0\n0.00\n0.00\n0.00\n424032.78\n▇▁▁▁▁\n\n\npesca\n0\n1\n48.46\n1442.87\n0.0\n0.00\n0.00\n0.00\n154190.54\n▇▁▁▁▁\n\n\notros_trab\n0\n1\n1319.00\n7439.20\n0.0\n0.00\n0.00\n0.00\n1257295.08\n▇▁▁▁▁\n\n\nrentas\n0\n1\n3585.66\n51810.69\n0.0\n0.00\n0.00\n0.00\n6854754.09\n▇▁▁▁▁\n\n\nutilidad\n0\n1\n2922.56\n50880.21\n0.0\n0.00\n0.00\n0.00\n6854754.09\n▇▁▁▁▁\n\n\narrenda\n0\n1\n663.09\n7270.20\n0.0\n0.00\n0.00\n0.00\n733695.65\n▇▁▁▁▁\n\n\ntransfer\n0\n1\n10901.15\n21915.52\n0.0\n0.00\n3692.92\n12913.03\n1001867.40\n▇▁▁▁▁\n\n\njubilacion\n0\n1\n4722.85\n17245.75\n0.0\n0.00\n0.00\n0.00\n688524.59\n▇▁▁▁▁\n\n\nbecas\n0\n1\n105.17\n1548.61\n0.0\n0.00\n0.00\n0.00\n153831.51\n▇▁▁▁▁\n\n\ndonativos\n0\n1\n1305.04\n5071.83\n0.0\n0.00\n0.00\n0.00\n413114.75\n▇▁▁▁▁\n\n\nremesas\n0\n1\n848.70\n5791.98\n0.0\n0.00\n0.00\n0.00\n238524.59\n▇▁▁▁▁\n\n\nbene_gob\n0\n1\n1849.19\n3366.51\n0.0\n0.00\n0.00\n2611.22\n63195.64\n▇▁▁▁▁\n\n\ntransf_hog\n0\n1\n1512.32\n4697.95\n0.0\n0.00\n0.00\n771.42\n465000.00\n▇▁▁▁▁\n\n\ntrans_inst\n0\n1\n557.90\n7606.45\n0.0\n0.00\n0.00\n0.00\n978260.86\n▇▁▁▁▁\n\n\nestim_alqu\n0\n1\n6592.66\n8338.00\n0.0\n2903.22\n4500.00\n8709.67\n348387.09\n▇▁▁▁▁\n\n\notros_ing\n0\n1\n50.95\n973.27\n0.0\n0.00\n0.00\n0.00\n73369.56\n▇▁▁▁▁\n\n\ngasto_mon\n0\n1\n37615.18\n34649.23\n0.0\n18561.37\n29678.83\n45901.43\n1703575.17\n▇▁▁▁▁\n\n\nalimentos\n0\n1\n14046.16\n11010.37\n0.0\n7482.73\n11957.05\n17961.27\n849839.62\n▇▁▁▁▁\n\n\nali_dentro\n0\n1\n11533.55\n7834.39\n0.0\n6197.01\n10144.16\n15158.38\n302942.31\n▇▁▁▁▁\n\n\ncereales\n0\n1\n2052.96\n1570.90\n0.0\n977.12\n1761.40\n2751.39\n32631.39\n▇▁▁▁▁\n\n\ncarnes\n0\n1\n2493.10\n2847.37\n0.0\n359.99\n1774.27\n3689.96\n157448.49\n▇▁▁▁▁\n\n\npescado\n0\n1\n248.92\n857.41\n0.0\n0.00\n0.00\n0.00\n60685.70\n▇▁▁▁▁\n\n\nleche\n0\n1\n1011.34\n1277.08\n0.0\n0.00\n642.85\n1427.11\n32014.25\n▇▁▁▁▁\n\n\nhuevo\n0\n1\n515.33\n595.19\n0.0\n0.00\n385.71\n848.56\n9218.54\n▇▁▁▁▁\n\n\naceites\n0\n1\n214.21\n446.77\n0.0\n0.00\n0.00\n347.14\n13395.84\n▇▁▁▁▁\n\n\ntuberculo\n0\n1\n198.87\n337.12\n0.0\n0.00\n0.00\n321.42\n12857.14\n▇▁▁▁▁\n\n\nverduras\n0\n1\n1241.79\n1234.53\n0.0\n321.42\n977.12\n1810.20\n54784.26\n▇▁▁▁▁\n\n\nfrutas\n0\n1\n469.28\n841.42\n0.0\n0.00\n0.00\n642.85\n38571.42\n▇▁▁▁▁\n\n\nazucar\n0\n1\n109.78\n293.17\n0.0\n0.00\n0.00\n0.00\n25714.28\n▇▁▁▁▁\n\n\ncafe\n0\n1\n120.40\n377.98\n0.0\n0.00\n0.00\n0.00\n12471.42\n▇▁▁▁▁\n\n\nespecias\n0\n1\n108.18\n284.00\n0.0\n0.00\n0.00\n64.28\n13139.99\n▇▁▁▁▁\n\n\notros_alim\n0\n1\n1651.95\n2858.15\n0.0\n0.00\n321.42\n2314.28\n55028.54\n▇▁▁▁▁\n\n\nbebidas\n0\n1\n1097.43\n1570.63\n0.0\n218.57\n719.99\n1480.50\n128237.11\n▇▁▁▁▁\n\n\nali_fuera\n0\n1\n2445.31\n6907.11\n0.0\n0.00\n0.00\n2571.42\n802542.78\n▇▁▁▁▁\n\n\ntabaco\n0\n1\n67.31\n449.34\n0.0\n0.00\n0.00\n0.00\n19234.27\n▇▁▁▁▁\n\n\nvesti_calz\n0\n1\n1470.03\n2611.47\n0.0\n0.00\n684.77\n1858.68\n131191.33\n▇▁▁▁▁\n\n\nvestido\n0\n1\n906.82\n1863.60\n0.0\n0.00\n273.91\n1105.42\n96050.32\n▇▁▁▁▁\n\n\ncalzado\n0\n1\n563.21\n1092.30\n0.0\n0.00\n107.60\n733.69\n47739.11\n▇▁▁▁▁\n\n\nvivienda\n0\n1\n3361.12\n5429.41\n0.0\n1020.00\n2160.00\n3862.21\n604814.51\n▇▁▁▁▁\n\n\nalquiler\n0\n1\n1031.01\n4667.52\n0.0\n0.00\n0.00\n0.00\n581951.61\n▇▁▁▁▁\n\n\npred_cons\n0\n1\n180.63\n1100.52\n0.0\n0.00\n0.00\n87.50\n116400.00\n▇▁▁▁▁\n\n\nagua\n0\n1\n407.19\n776.34\n0.0\n0.00\n240.00\n540.00\n78000.00\n▇▁▁▁▁\n\n\nenergia\n0\n1\n1742.29\n1743.06\n0.0\n553.69\n1400.80\n2400.00\n113080.64\n▇▁▁▁▁\n\n\nlimpieza\n0\n1\n2345.68\n3932.56\n0.0\n771.00\n1379.01\n2481.43\n302696.82\n▇▁▁▁▁\n\n\ncuidados\n0\n1\n1745.97\n2833.03\n0.0\n678.00\n1158.36\n1896.00\n128197.70\n▇▁▁▁▁\n\n\nutensilios\n0\n1\n218.77\n1378.17\n0.0\n0.00\n0.00\n0.00\n294740.20\n▇▁▁▁▁\n\n\nenseres\n0\n1\n380.94\n1649.55\n0.0\n0.00\n0.00\n0.00\n90098.34\n▇▁▁▁▁\n\n\nsalud\n0\n1\n1270.55\n5662.22\n0.0\n0.00\n146.73\n841.29\n324547.74\n▇▁▁▁▁\n\n\natenc_ambu\n0\n1\n903.67\n4754.37\n0.0\n0.00\n0.00\n538.03\n283695.64\n▇▁▁▁▁\n\n\nhospital\n0\n1\n152.99\n2368.65\n0.0\n0.00\n0.00\n0.00\n241434.73\n▇▁▁▁▁\n\n\nmedicinas\n0\n1\n213.90\n1294.84\n0.0\n0.00\n0.00\n97.82\n127464.42\n▇▁▁▁▁\n\n\ntransporte\n0\n1\n7538.59\n12471.10\n0.0\n1975.75\n4803.31\n9299.92\n491168.39\n▇▁▁▁▁\n\n\npublico\n0\n1\n1365.08\n2596.60\n0.0\n0.00\n0.00\n1851.41\n137031.32\n▇▁▁▁▁\n\n\nforaneo\n0\n1\n205.99\n1200.95\n0.0\n0.00\n0.00\n0.00\n88011.04\n▇▁▁▁▁\n\n\nadqui_vehi\n0\n1\n1045.70\n9662.96\n0.0\n0.00\n0.00\n0.00\n489130.43\n▇▁▁▁▁\n\n\nmantenim\n0\n1\n3122.62\n4882.43\n0.0\n0.00\n929.03\n4770.49\n113684.95\n▇▁▁▁▁\n\n\nrefaccion\n0\n1\n275.12\n1029.55\n0.0\n0.00\n0.00\n0.00\n39130.43\n▇▁▁▁▁\n\n\ncombus\n0\n1\n2847.50\n4483.70\n0.0\n0.00\n870.96\n4354.83\n113225.80\n▇▁▁▁▁\n\n\ncomunica\n0\n1\n1799.20\n2322.07\n0.0\n580.64\n1380.00\n2409.98\n105366.77\n▇▁▁▁▁\n\n\neduca_espa\n0\n1\n3506.12\n8866.90\n0.0\n0.00\n753.00\n3641.60\n475717.08\n▇▁▁▁▁\n\n\neducacion\n0\n1\n2466.90\n7454.48\n0.0\n0.00\n0.00\n2177.41\n451161.26\n▇▁▁▁▁\n\n\nesparci\n0\n1\n718.84\n2310.87\n0.0\n0.00\n0.00\n747.00\n96406.00\n▇▁▁▁▁\n\n\npaq_turist\n0\n1\n320.39\n2610.74\n0.0\n0.00\n0.00\n0.00\n166304.34\n▇▁▁▁▁\n\n\npersonales\n0\n1\n2953.55\n4402.36\n0.0\n998.69\n1884.00\n3452.78\n296006.96\n▇▁▁▁▁\n\n\ncuida_pers\n0\n1\n2239.89\n2335.69\n0.0\n888.34\n1628.67\n2824.79\n69462.00\n▇▁▁▁▁\n\n\nacces_pers\n0\n1\n94.06\n433.90\n0.0\n0.00\n0.00\n0.00\n23996.72\n▇▁▁▁▁\n\n\notros_gas\n0\n1\n619.60\n3203.71\n0.0\n0.00\n0.00\n48.91\n295256.96\n▇▁▁▁▁\n\n\ntransf_gas\n0\n1\n1123.38\n5306.60\n0.0\n0.00\n0.00\n225.08\n737704.91\n▇▁▁▁▁\n\n\npercep_tot\n0\n1\n3940.89\n40469.54\n0.0\n0.00\n0.00\n2842.18\n8171344.09\n▇▁▁▁▁\n\n\nretiro_inv\n0\n1\n993.91\n14080.54\n0.0\n0.00\n0.00\n0.00\n3480662.98\n▇▁▁▁▁\n\n\nprestamos\n0\n1\n407.08\n4801.37\n0.0\n0.00\n0.00\n0.00\n540983.60\n▇▁▁▁▁\n\n\notras_perc\n0\n1\n877.86\n24750.31\n0.0\n0.00\n0.00\n0.00\n4402173.91\n▇▁▁▁▁\n\n\nero_nm_viv\n0\n1\n40.11\n2162.50\n0.0\n0.00\n0.00\n0.00\n440217.38\n▇▁▁▁▁\n\n\nero_nm_hog\n0\n1\n1621.92\n27703.08\n0.0\n0.00\n0.00\n1349.97\n8171344.09\n▇▁▁▁▁\n\n\nerogac_tot\n0\n1\n7659.37\n43226.39\n0.0\n0.00\n489.13\n6208.52\n5733149.15\n▇▁▁▁▁\n\n\ncuota_viv\n0\n1\n712.97\n3500.36\n0.0\n0.00\n0.00\n0.00\n150000.00\n▇▁▁▁▁\n\n\nmater_serv\n0\n1\n441.57\n4152.57\n0.0\n0.00\n0.00\n0.00\n391304.34\n▇▁▁▁▁\n\n\nmaterial\n0\n1\n267.11\n2604.68\n0.0\n0.00\n0.00\n0.00\n244565.21\n▇▁▁▁▁\n\n\nservicio\n0\n1\n174.46\n2301.69\n0.0\n0.00\n0.00\n0.00\n195652.17\n▇▁▁▁▁\n\n\ndeposito\n0\n1\n4006.25\n31415.73\n0.0\n0.00\n0.00\n1320.65\n4176795.57\n▇▁▁▁▁\n\n\nprest_terc\n0\n1\n125.48\n4000.35\n0.0\n0.00\n0.00\n0.00\n1100543.47\n▇▁▁▁▁\n\n\npago_tarje\n0\n1\n990.75\n9069.74\n0.0\n0.00\n0.00\n0.00\n1640883.97\n▇▁▁▁▁\n\n\ndeudas\n0\n1\n430.28\n2720.39\n0.0\n0.00\n0.00\n0.00\n122282.60\n▇▁▁▁▁\n\n\nbalance\n0\n1\n420.11\n4608.27\n0.0\n0.00\n0.00\n0.00\n496467.39\n▇▁▁▁▁\n\n\notras_erog\n0\n1\n531.96\n14050.93\n0.0\n0.00\n0.00\n0.00\n2934782.60\n▇▁▁▁▁\n\n\nsmg\n0\n1\n15558.30\n0.00\n15558.3\n15558.30\n15558.30\n15558.30\n15558.30\n▁▁▇▁▁\n\n\n\n\n\n\n\n2.5.3 Selección de casos y de variables\nPoco a poco vamos comprendiendo más la lógica de R. Hay varias “formas” de programar. Por lo que no te asustes si varios códigos llegan al mismo resultado\nPara revisar el contenido de un data frame podemos usar, como lo hicimos anteriormente, el formato dataframe$var o usar corchete, checa como estas cuatro formas tan el mismo resultado.\n\nx&lt;-concentradohogar$ing_cor\nx&lt;-concentradohogar[[\"ing_cor\"]]  # ¡Ojo con las comillas! \nx&lt;-concentradohogar[,23]\nx&lt;-concentradohogar[,\"ing_cor\"]\n\nAhora, con el formato de dplyr podemos llegar a lo mismo\n\nx&lt;-concentradohogar %&gt;% \n  select(ing_cor)"
  },
  {
    "objectID": "P2.html#subsetting",
    "href": "P2.html#subsetting",
    "title": "2  Importación de conjuntos de datos",
    "section": "2.6 “Subsetting”",
    "text": "2.6 “Subsetting”\nSelección “inversa” O sea no “botar algo”, es con el negativo. No funciona con todos los formatos\n\nx&lt;-concentradohogar %&gt;% \n  select(-ing_cor)\n\nrm(x) #rm sólo bota objetos\n\nPero con los otros formatos podemos “asignar” valores adentro de un data.frame, y uno de eso valores puede ser “la nada””\n\nconcentradohogar$ing_cor2&lt;-concentradohogar$ing_cor\nconcentradohogar$ing_cor2&lt;-NULL\n\nDe aquí viene esa cuesta en el aprendizaje; tenemos que comprender en qué forma programó el que hizo la librería e incluso a veces cómo aprendió quién te está enseñando o el foro que estás leyendo.\nRara vez utilizamos una base de datos completa, y rara vez queremos hacer operaciones completas con ellas.\nVamos a pedir cosas más específicas y podemos seleccionar observaciones o filas. Como nuestra base de datos es muy grande, guardaremos el filtro o selección en un objeto.\n\nsubset1&lt;-concentradohogar[concentradohogar$ing_cor&gt;5000,]\n\nTambién podemos seleccionar columnas\n\nsubset2&lt;- concentradohogar[, c(\"sexo_jefe\", \"edad_jefe\", \"ing_cor\")]\n\npodemos combinar los dos tipos de selección\n\nsubset3&lt;- concentradohogar[(concentradohogar$ing_cor&gt;5000 & concentradohogar$sexo_jefe==1 ), c(\"sexo_jefe\", \"edad_jefe\", \"ing_cor\")]\n\nCon dplyr, podemos usar “filter” y “select”\n\nsubset4&lt;-concentradohogar %&gt;% \n  dplyr::filter(ing_cor&gt;5000 & sexo_jefe==1) %&gt;%\n  dplyr::select(sexo_jefe, edad_jefe, ing_cor)"
  },
  {
    "objectID": "P3.html#paquetes",
    "href": "P3.html#paquetes",
    "title": "3  Análisis descriptivo",
    "section": "3.1 Paquetes",
    "text": "3.1 Paquetes\n\nif (!require(\"pacman\")) install.packages(\"pacman\") # instala pacman si se requiere\n\nCargando paquete requerido: pacman\n\npacman::p_load(tidyverse, \n               readxl,writexl,googlesheets4, # importar hojas de cálculo\n               haven, foreign, # importación de dta y sab\n               sjlabelled, # etiquetas\n               janitor, skimr, # limpieza y tabulados\n               dataMaid,  DataExplorer, SmartEDA) # paquetes EDA"
  },
  {
    "objectID": "P3.html#datos",
    "href": "P3.html#datos",
    "title": "3  Análisis descriptivo",
    "section": "3.2 Datos",
    "text": "3.2 Datos\n\nconcentradohogar &lt;- haven::read_dta(\"datos/concentradohogar.dta\")"
  },
  {
    "objectID": "P3.html#etiquetas-y-cómo-usarlas",
    "href": "P3.html#etiquetas-y-cómo-usarlas",
    "title": "3  Análisis descriptivo",
    "section": "3.3 Etiquetas y cómo usarlas",
    "text": "3.3 Etiquetas y cómo usarlas\nPodemos ver que los objetos “data.frame”(spoiler, ya hablaremos de ellos)\n\nclass(concentradohogar$sexo_jefe)\n\n[1] \"character\"\n\n\n\n3.3.1 Ejemplo de etiquetado\nPara que se vea mejor nuestro tabulado, sería bueno que nuestras variables tuvieran etiqueta. Para ello utilizaremos el paquete “sjlabelled”\n\netiqueta_sex&lt;-c(\"Hombre\", \"Mujer\")\n\nconcentradohogar&lt;-concentradohogar %&gt;% \n  mutate(sexo_jefe=as_numeric(sexo_jefe)) %&gt;% # para quitar el \"string\"\n  sjlabelled::set_labels(sexo_jefe, labels=etiqueta_sex) \n\nEtiquetemos también la variable “clase_hog”. Podemos checar cómo está estructurada esta base acá https://www.inegi.org.mx/rnm/index.php/catalog/685/data-dictionary\n\nconcentradohogar&lt;-concentradohogar %&gt;% \n  mutate(clase_hog=as_numeric(clase_hog)) %&gt;% # para quitar el \"string\"\n  sjlabelled::set_labels(clase_hog, labels=c(\"unipersonal\",\n                                             \"nuclear\", \n                                             \"ampliado\",\n                                             \"compuesto\",\n                                             \"corresidente\")) \n\n\ntable(concentradohogar$sexo_jefe)\n\n\n    1     2 \n61905 28197 \n\ntable(sjlabelled::as_label(concentradohogar$sexo_jefe))\n\n\nHombre  Mujer \n 61905  28197"
  },
  {
    "objectID": "P3.html#variables-nominales",
    "href": "P3.html#variables-nominales",
    "title": "3  Análisis descriptivo",
    "section": "3.4 Variables nominales",
    "text": "3.4 Variables nominales\nLa variable nominal “sexo_jefe”, se captura con “1” para hombres y con un “2” para mujeres en la base de datos. Podemos establecer una operación de igual y además sumar los casos que cumplan con esta condición:\n\nconcentradohogar %&gt;% \n  dplyr::count(sexo_jefe==2) # cuentan los casos que cumplen con la condición \"sexo_jefe==2\"\n\n# A tibble: 2 × 2\n  `sexo_jefe == 2`     n\n  &lt;lgl&gt;            &lt;int&gt;\n1 FALSE            61905\n2 TRUE             28197\n\n\nEsto es a lo que nos referimos con contar frecuencias. Podemos contar casos que cumplan con una operación de igualdad.\n\nconcentradohogar %&gt;%\n  with(\n    table(sexo_jefe)\n    )\n\nsexo_jefe\n    1     2 \n61905 28197 \n\n\n\n3.4.1 Recordemos nuestro etiquetado\n\netiqueta_sex&lt;-c(\"Hombre\", \"Mujer\")\n\nconcentradohogar&lt;-concentradohogar %&gt;% \n  mutate(sexo_jefe=as_numeric(sexo_jefe)) %&gt;% # para quitar el \"string\"\n  sjlabelled::set_labels(sexo_jefe, labels=etiqueta_sex) \n\n\nconcentradohogar&lt;-concentradohogar %&gt;% \n  mutate(clase_hog=as_numeric(clase_hog)) %&gt;% # para quitar el \"string\"\n  sjlabelled::set_labels(clase_hog, labels=c(\"unipersonal\",\n                                             \"nuclear\", \n                                             \"ampliado\",\n                                             \"compuesto\",\n                                             \"corresidente\")) \n\nCon “tabyl()”” de “janitor””\n\nconcentradohogar %&gt;%\n  dplyr::mutate(sexo_jefe=as_label(sexo_jefe))  %&gt;%\n  janitor::tabyl(sexo_jefe)\n\n sexo_jefe     n   percent\n    Hombre 61905 0.6870547\n     Mujer 28197 0.3129453\n\n\nPara ver que esto es una distribución de frecuencias sería muy útil ver la proporción total, ello se realiza agregando un elemento más en nuestro código con una “tubería”:\n\nconcentradohogar %&gt;% \n  dplyr::mutate(sexo_jefe=as_label(sexo_jefe))  %&gt;%\n  janitor::tabyl(sexo_jefe) %&gt;% \n  janitor::adorn_totals()\n\n sexo_jefe     n   percent\n    Hombre 61905 0.6870547\n     Mujer 28197 0.3129453\n     Total 90102 1.0000000\n\n\nHoy revisamos algunos tipos de variables\n\nclass(concentradohogar$sexo_jefe) # variable sin etiqueta\n\n[1] \"numeric\"\n\nclass(as_label(concentradohogar$sexo_jefe)) # variable con etiqueta\n\n[1] \"factor\"\n\nclass(as_label(concentradohogar$educa_jefe)) # variable ordinal\n\n[1] \"character\"\n\nclass(concentradohogar$ing_cor) # variable de intervalo/razón\n\n[1] \"numeric\"\n\n\nEn general, tendremos variables de factor que podrían ser consideradas como cualitativas y numéricas. Aunque en realidad, R tiene muchas formas de almacenamiento. Como mostramos con el comando “glimpse()” en la práctica anterior, podemos revisar una variable en específico:\n\ndplyr::glimpse(concentradohogar$sexo_jefe)\n\n num [1:90102] 2 1 1 1 1 1 2 2 2 1 ...\n - attr(*, \"labels\")= Named num [1:2] 1 2\n  ..- attr(*, \"names\")= chr [1:2] \"Hombre\" \"Mujer\"\n - attr(*, \"label\")= chr \"Sexo del jefe del hogar\"\n\n\n\nconcentradohogar %&gt;% mutate(sexo_jefe=as_label(sexo_jefe)) %&gt;% # cambia los valores de la variable a sus etiquetas\n                tabyl(sexo_jefe) %&gt;% # para hacer la tabla\n                adorn_totals() %&gt;% # añade totales\n                adorn_pct_formatting()  # nos da porcentaje en lugar de proporción\n\n sexo_jefe     n percent\n    Hombre 61905   68.7%\n     Mujer 28197   31.3%\n     Total 90102  100.0%\n\n\nLa tubería o “pipe” %&gt;% nos permite ir agregando elementos de manera sencilla nuestros comandos. En este caso decimos que dentro del objeto haga el cambio, luego la tabla, que le ponga porcentajes y finalmente que nos dé los totales. El total del 100% no aparece, por un elemento propio del programa."
  },
  {
    "objectID": "P3.html#variables-ordinales",
    "href": "P3.html#variables-ordinales",
    "title": "3  Análisis descriptivo",
    "section": "3.5 Variables ordinales",
    "text": "3.5 Variables ordinales\nSon variables que dan cuenta de cualidades o condiciones a través de categorías que guardan un orden entre sí.\nVamos a darle una “ojeada” a esta variable\n\nglimpse(concentradohogar$educa_jefe)\n\n chr [1:90102] \"03\" \"08\" \"10\" \"11\" \"08\" \"08\" \"10\" \"06\" \"10\" \"04\" \"06\" \"08\" ...\n - attr(*, \"label\")= chr \"Educación formal del jefe del hogar\"\n - attr(*, \"format.stata\")= chr \"%2s\"\n\n\nEtiquetemos también nuestra variable ordinal\n\nconcentradohogar &lt;-concentradohogar %&gt;% \n  mutate(educa_jefe=as.numeric(educa_jefe)) %&gt;% \n  set_labels(educa_jefe,\n             labels=c(\"Sin instrucción\", \n                      \"Preescolar\",\n                      \"Primaria incompleta\",\n                      \"Primaria completa\",\n                      \"Secundaria incompleta\",\n                      \"Secundaria completa\",\n                      \"Preparatoria incompleta\",\n                      \"Preparatoria completa\",\n                      \"Profesional incompleta\",\n                      \"Profesional completa\",\n                      \"Posgrado\"))\n\nHoy hacemos la tabla, con las etiquetas y vemos que se ve más bonita:\n\nconcentradohogar %&gt;%\n  mutate(educa_jefe=as_label(educa_jefe)) %&gt;% \n  tabyl(educa_jefe)\n\n              educa_jefe     n     percent\n         Sin instrucción  5495 0.060986438\n              Preescolar    32 0.000355153\n     Primaria incompleta 13328 0.147921245\n       Primaria completa 14928 0.165678897\n   Secundaria incompleta  2728 0.030276797\n     Secundaria completa 24581 0.272813034\n Preparatoria incompleta  3032 0.033650751\n   Preparatoria completa 11782 0.130762913\n  Profesional incompleta  2645 0.029355619\n    Profesional completa  9788 0.108632439\n                Posgrado  1763 0.019566713\n\n\nPara que no nos salgan las categorías sin datos podemos poner una opción dentro del comando “tabyl()”\n\nconcentradohogar %&gt;% \n  mutate(educa_jefe=as_label(educa_jefe)) %&gt;% \n  tabyl(educa_jefe, show_missing_levels=F ) %&gt;% # esta opción elimina los valores con 0\n  adorn_totals()  \n\n              educa_jefe     n     percent\n         Sin instrucción  5495 0.060986438\n              Preescolar    32 0.000355153\n     Primaria incompleta 13328 0.147921245\n       Primaria completa 14928 0.165678897\n   Secundaria incompleta  2728 0.030276797\n     Secundaria completa 24581 0.272813034\n Preparatoria incompleta  3032 0.033650751\n   Preparatoria completa 11782 0.130762913\n  Profesional incompleta  2645 0.029355619\n    Profesional completa  9788 0.108632439\n                Posgrado  1763 0.019566713\n                   Total 90102 1.000000000"
  },
  {
    "objectID": "P3.html#bivariado-cualitativo",
    "href": "P3.html#bivariado-cualitativo",
    "title": "3  Análisis descriptivo",
    "section": "3.6 Bivariado cualitativo",
    "text": "3.6 Bivariado cualitativo\n\n3.6.1 Cálculo de frecuencias\nLas tablas de doble entrada tiene su nombre porque en las columnas entran los valores de una variable categórica, y en las filas de una segunda. Basicamente es como hacer un conteo de todas las combinaciones posibles entre los valores de una variable con la otra.\nPor ejemplo, si quisiéramos combinar las dos variables que ya estudiamos lo podemos hacer, con una tabla de doble entrada:\n\nconcentradohogar %&gt;% \n  mutate(clase_hog=as_label(clase_hog)) %&gt;% \n  mutate(sexo_jefe=as_label(sexo_jefe)) %&gt;% # para que las lea como factor\n                tabyl(clase_hog, sexo_jefe, show_missing_levels=F ) %&gt;% # incluimos aquí \n                adorn_totals()  \n\n    clase_hog Hombre Mujer\n  unipersonal   6519  5367\n      nuclear  41919 13621\n     ampliado  12898  8888\n    compuesto    372   211\n corresidente    197   110\n        Total  61905 28197\n\n\nObservamos que en cada celda confluyen los casos que comparten las mismas características:\n\nconcentradohogar %&gt;%   \n    count(clase_hog==1 & sexo_jefe==1) # nos da la segunda celda de la izquierda\n\n# A tibble: 2 × 2\n  `clase_hog == 1 & sexo_jefe == 1`     n\n  &lt;lgl&gt;                             &lt;int&gt;\n1 FALSE                             83583\n2 TRUE                               6519\n\n\n\n\n3.6.2 Totales y porcentajes\nDe esta manera se colocan todos los datos. Si observa al poner la función “adorn_totals()” lo agregó como una nueva fila de totales, pero también podemos pedirle que agregue una columna de totales.\n\nconcentradohogar %&gt;% \n  mutate(clase_hog=as_label(clase_hog)) %&gt;% \n  mutate(sexo_jefe=as_label(sexo_jefe)) %&gt;% # para que las lea como factor\n  tabyl(clase_hog, sexo_jefe, show_missing_levels=F ) %&gt;% # incluimos aquí dos variables\n  adorn_totals(\"col\")  \n\n    clase_hog Hombre Mujer Total\n  unipersonal   6519  5367 11886\n      nuclear  41919 13621 55540\n     ampliado  12898  8888 21786\n    compuesto    372   211   583\n corresidente    197   110   307\n\n\nO bien agregar los dos, introduciendo en el argumento “c(”col”, “row”)” un vector de caracteres de las dos opciones requeridas:\n\nconcentradohogar %&gt;% \n  mutate(clase_hog=as_label(clase_hog)) %&gt;% \n  mutate(sexo_jefe=as_label(sexo_jefe)) %&gt;% # para que las lea como factor\n  tabyl(clase_hog, sexo_jefe, show_missing_levels=F ) %&gt;% # incluimos aquí dos variable\n  adorn_totals(c(\"col\", \"row\")) \n\n    clase_hog Hombre Mujer Total\n  unipersonal   6519  5367 11886\n      nuclear  41919 13621 55540\n     ampliado  12898  8888 21786\n    compuesto    372   211   583\n corresidente    197   110   307\n        Total  61905 28197 90102\n\n\nDel mismo modo, podemos calcular los porcentajes. Pero los podemos calcular de tres formas. Uno es que lo calculemos para los totales calculados para las filas, para las columnas o para el gran total poblacional.\nPara columnas tenemos el siguiente código y los siguientes resultados:\n\nconcentradohogar %&gt;% \n  mutate(clase_hog=as_label(clase_hog)) %&gt;% \n  mutate(sexo_jefe=as_label(sexo_jefe)) %&gt;% # para que las lea como factor\n  tabyl(clase_hog, sexo_jefe, show_missing_levels=F ) %&gt;% # incluimos aquí dos variable\n  adorn_totals(c(\"col\", \"row\")) %&gt;% \n  adorn_percentages(\"col\") %&gt;% # Divide los valores entre el total de la columna\n  adorn_pct_formatting() # lo vuelve porcentaje\n\n    clase_hog Hombre  Mujer  Total\n  unipersonal  10.5%  19.0%  13.2%\n      nuclear  67.7%  48.3%  61.6%\n     ampliado  20.8%  31.5%  24.2%\n    compuesto   0.6%   0.7%   0.6%\n corresidente   0.3%   0.4%   0.3%\n        Total 100.0% 100.0% 100.0%\n\n\nCuando se hagan cuadros de distribuciones (que todas sus partes suman 100), los porcentajes pueden ser una gran ayuda para la interpretación, sobre todos cuando se comparar poblaciones de categorías de diferente tamaño. Por lo general, queremos que los cuadros nos den información de donde están los totales y su 100%, de esta manera el lector se puede guiar de porcentaje con respecto a qué está leyendo. En este caso, vemos que el 100% es común en la última fila.\nVeamos la diferencia de cómo podemos leer la misma celda, pero hoy, hemos calculado los porcentajes a nivel de fila:\n\nconcentradohogar %&gt;% \n  mutate(clase_hog=as_label(clase_hog)) %&gt;% \n  mutate(sexo_jefe=as_label(sexo_jefe)) %&gt;% # para que las lea como factor\n  tabyl(clase_hog, sexo_jefe, show_missing_levels=F ) %&gt;% # incluimos aquí dos variable\n  adorn_totals(c(\"col\", \"row\")) %&gt;% \n  adorn_percentages(\"row\") %&gt;% # Divide los valores entre el total de la fila\n  adorn_pct_formatting() # lo vuelve porcentaje\n\n    clase_hog Hombre Mujer  Total\n  unipersonal  54.8% 45.2% 100.0%\n      nuclear  75.5% 24.5% 100.0%\n     ampliado  59.2% 40.8% 100.0%\n    compuesto  63.8% 36.2% 100.0%\n corresidente  64.2% 35.8% 100.0%\n        Total  68.7% 31.3% 100.0%\n\n\nFinalmente, podemos calcular los porcentajes con referencia a la población total en análisis. Es decir la celda en la esquina inferior derecha de nuestra tabla original.\n\nconcentradohogar %&gt;% \n  mutate(clase_hog=as_label(clase_hog)) %&gt;% \n  mutate(sexo_jefe=as_label(sexo_jefe)) %&gt;% # para que las lea como factor\n  tabyl(clase_hog, sexo_jefe, show_missing_levels=F ) %&gt;% # incluimos aquí dos variable\n  adorn_totals(c(\"col\", \"row\")) %&gt;% \n  adorn_percentages(\"all\") %&gt;% # Divide los valores entre el total de la población\n  adorn_pct_formatting() # lo vuelve porcentaje\n\n    clase_hog Hombre Mujer  Total\n  unipersonal   7.2%  6.0%  13.2%\n      nuclear  46.5% 15.1%  61.6%\n     ampliado  14.3%  9.9%  24.2%\n    compuesto   0.4%  0.2%   0.6%\n corresidente   0.2%  0.1%   0.3%\n        Total  68.7% 31.3% 100.0%"
  },
  {
    "objectID": "P4.html#presentación",
    "href": "P4.html#presentación",
    "title": "4  Fusionado",
    "section": "4.1 Presentación",
    "text": "4.1 Presentación\nAquí dejo la presentación"
  },
  {
    "objectID": "P4.html#fusionado-de-conjuntos-de-datos",
    "href": "P4.html#fusionado-de-conjuntos-de-datos",
    "title": "4  Fusionado",
    "section": "4.2 Fusionado de conjuntos de datos",
    "text": "4.2 Fusionado de conjuntos de datos\nVamos a trabajar con esta base de datos de la ENIGH 2022, que tiene tablas separadas.\n\nif (!require(\"pacman\")) install.packages(\"pacman\") # instala pacman si se requiere\n\nCargando paquete requerido: pacman\n\npacman::p_load(skimr,tidyverse, magrittr, # sobretodo para dplyr\n              haven, readxl, #importación\n              janitor, \n              sjlabelled) \n\nHoy cargamos la versión seccionada de la base\n\nviviendas &lt;- haven::read_sav(\"datos/viviendas.sav\")\nconcentrado &lt;- haven::read_sav(\"datos/concentradohogar.sav\")\npoblacion&lt;- haven::read_sav(\"datos/poblacion.sav\")"
  },
  {
    "objectID": "P4.html#juntando-bases",
    "href": "P4.html#juntando-bases",
    "title": "4  Fusionado",
    "section": "4.3 Juntando bases",
    "text": "4.3 Juntando bases\nMuchas bases de datos están organizadas en varias tablas. La ventaja de la programación por objetos de R, nos permite tener las bases cargadas en nuestro ambiente y llamarlas y juntarlas cuando sea necesario.\n\ndim(viviendas)\n\n[1] 88823    64\n\nnames(viviendas[,1:15])\n\n [1] \"folioviv\"   \"tipo_viv\"   \"mat_pared\"  \"mat_techos\" \"mat_pisos\" \n [6] \"antiguedad\" \"antigua_ne\" \"cocina\"     \"cocina_dor\" \"cuart_dorm\"\n[11] \"num_cuarto\" \"disp_agua\"  \"dotac_agua\" \"excusado\"   \"uso_compar\"\n\ndim(concentrado)\n\n[1] 90102   126\n\nnames(concentrado[,1:15])\n\n [1] \"folioviv\"   \"foliohog\"   \"ubica_geo\"  \"tam_loc\"    \"est_socio\" \n [6] \"est_dis\"    \"upm\"        \"factor\"     \"clase_hog\"  \"sexo_jefe\" \n[11] \"edad_jefe\"  \"educa_jefe\" \"tot_integ\"  \"hombres\"    \"mujeres\"   \n\ndim(poblacion)\n\n[1] 309684    188\n\nnames(poblacion[,1:15])\n\n [1] \"folioviv\"   \"foliohog\"   \"numren\"     \"parentesco\" \"sexo\"      \n [6] \"edad\"       \"madre_hog\"  \"madre_id\"   \"padre_hog\"  \"padre_id\"  \n[11] \"disc_camin\" \"disc_ver\"   \"disc_brazo\" \"disc_apren\" \"disc_oir\"  \n\n\nPara juntar bases usamos el comando merge()\nEn by = ponemos el id, correspondiente a la variable o variables que lo conforman, de manera entrecomillada o de vector. Cuando estamos mezclando bases del mismo nivel de análisis el id es igual en ambas bases. Cuando estamos incorporando información de bases de distinto nivel debemos escoger el nivel mayor.\nEn este caso, sabemos que a una vivienda corresponde más de un hogar (1 a muchos). Esto se puede revisar documentación, sabemos que el id de la tabla viviendas es folioviv\n\nmerge_data&lt;- merge(viviendas, concentrado, by=\"folioviv\")\n\nEsto es equivalente a left_join() de {dplyr}\n\nmerge_data &lt;- dplyr::left_join(viviendas, concentrado, by=\"folioviv\") \n\nmerge_data &lt;- viviendas %&gt;% \n  dplyr::left_join(concentrado, by=\"folioviv\") \n\nRevisemos la base creada\n\nnames(merge_data)\n\n  [1] \"folioviv\"    \"tipo_viv\"    \"mat_pared\"   \"mat_techos\"  \"mat_pisos\"  \n  [6] \"antiguedad\"  \"antigua_ne\"  \"cocina\"      \"cocina_dor\"  \"cuart_dorm\" \n [11] \"num_cuarto\"  \"disp_agua\"   \"dotac_agua\"  \"excusado\"    \"uso_compar\" \n [16] \"sanit_agua\"  \"biodigest\"   \"bano_comp\"   \"bano_excus\"  \"bano_regad\" \n [21] \"drenaje\"     \"disp_elect\"  \"focos_inca\"  \"focos_ahor\"  \"combustible\"\n [26] \"estufa_chi\"  \"eli_basura\"  \"tenencia\"    \"renta\"       \"estim_pago\" \n [31] \"pago_viv\"    \"pago_mesp\"   \"tipo_adqui\"  \"viv_usada\"   \"tipo_finan\" \n [36] \"num_dueno1\"  \"hog_dueno1\"  \"num_dueno2\"  \"hog_dueno2\"  \"escrituras\" \n [41] \"lavadero\"    \"fregadero\"   \"regadera\"    \"tinaco_azo\"  \"cisterna\"   \n [46] \"pileta\"      \"calent_sol\"  \"calent_gas\"  \"medidor_luz\" \"bomba_agua\" \n [51] \"tanque_gas\"  \"aire_acond\"  \"calefacc\"    \"tot_resid\"   \"tot_hom\"    \n [56] \"tot_muj\"     \"tot_hog\"     \"ubica_geo.x\" \"tam_loc.x\"   \"est_socio.x\"\n [61] \"est_dis.x\"   \"upm.x\"       \"factor.x\"    \"procaptar\"   \"foliohog\"   \n [66] \"ubica_geo.y\" \"tam_loc.y\"   \"est_socio.y\" \"est_dis.y\"   \"upm.y\"      \n [71] \"factor.y\"    \"clase_hog\"   \"sexo_jefe\"   \"edad_jefe\"   \"educa_jefe\" \n [76] \"tot_integ\"   \"hombres\"     \"mujeres\"     \"mayores\"     \"menores\"    \n [81] \"p12_64\"      \"p65mas\"      \"ocupados\"    \"percep_ing\"  \"perc_ocupa\" \n [86] \"ing_cor\"     \"ingtrab\"     \"trabajo\"     \"sueldos\"     \"horas_extr\" \n [91] \"comisiones\"  \"aguinaldo\"   \"indemtrab\"   \"otra_rem\"    \"remu_espec\" \n [96] \"negocio\"     \"noagrop\"     \"industria\"   \"comercio\"    \"servicios\"  \n[101] \"agrope\"      \"agricolas\"   \"pecuarios\"   \"reproducc\"   \"pesca\"      \n[106] \"otros_trab\"  \"rentas\"      \"utilidad\"    \"arrenda\"     \"transfer\"   \n[111] \"jubilacion\"  \"becas\"       \"donativos\"   \"remesas\"     \"bene_gob\"   \n[116] \"transf_hog\"  \"trans_inst\"  \"estim_alqu\"  \"otros_ing\"   \"gasto_mon\"  \n[121] \"alimentos\"   \"ali_dentro\"  \"cereales\"    \"carnes\"      \"pescado\"    \n[126] \"leche\"       \"huevo\"       \"aceites\"     \"tuberculo\"   \"verduras\"   \n[131] \"frutas\"      \"azucar\"      \"cafe\"        \"especias\"    \"otros_alim\" \n[136] \"bebidas\"     \"ali_fuera\"   \"tabaco\"      \"vesti_calz\"  \"vestido\"    \n[141] \"calzado\"     \"vivienda\"    \"alquiler\"    \"pred_cons\"   \"agua\"       \n[146] \"energia\"     \"limpieza\"    \"cuidados\"    \"utensilios\"  \"enseres\"    \n[151] \"salud\"       \"atenc_ambu\"  \"hospital\"    \"medicinas\"   \"transporte\" \n[156] \"publico\"     \"foraneo\"     \"adqui_vehi\"  \"mantenim\"    \"refaccion\"  \n[161] \"combus\"      \"comunica\"    \"educa_espa\"  \"educacion\"   \"esparci\"    \n[166] \"paq_turist\"  \"personales\"  \"cuida_pers\"  \"acces_pers\"  \"otros_gas\"  \n[171] \"transf_gas\"  \"percep_tot\"  \"retiro_inv\"  \"prestamos\"   \"otras_perc\" \n[176] \"ero_nm_viv\"  \"ero_nm_hog\"  \"erogac_tot\"  \"cuota_viv\"   \"mater_serv\" \n[181] \"material\"    \"servicio\"    \"deposito\"    \"prest_terc\"  \"pago_tarje\" \n[186] \"deudas\"      \"balance\"     \"otras_erog\"  \"smg\"        \n\ndim(merge_data)\n\n[1] 90102   189\n\n\nAlgunos elementos\n\nEl orden de las variables corresponde al orden que pusimos las bases en las opciones.\nTambién vemos que las variables que se repetían en ambas bases se repiten en la nueva base,con un sufijo .x, para lo que proviene de la primera base y con .y, lo que proviene de la segunda. R dejará las variables intactas y son coincidentes, en nuestro caso, porque las variables son iguales. R hace esto para prever que por error tengamos alguna variable con un nombre igual y no sea la misma en su contenido."
  },
  {
    "objectID": "P4.html#merge-con-id-compuesto",
    "href": "P4.html#merge-con-id-compuesto",
    "title": "4  Fusionado",
    "section": "4.4 Merge con id compuesto",
    "text": "4.4 Merge con id compuesto\nLos identificadores pueden estar compuestos de más de una variable:\n\nViviendas viviendas es folioviv\n\n\nviviendas %&gt;% \n  janitor::get_dupes(folioviv)\n\nNo duplicate combinations found of: folioviv\n\n\n# A tibble: 0 × 65\n# ℹ 65 variables: folioviv &lt;chr&gt;, dupe_count &lt;int&gt;, tipo_viv &lt;chr+lbl&gt;,\n#   mat_pared &lt;chr+lbl&gt;, mat_techos &lt;chr+lbl&gt;, mat_pisos &lt;chr+lbl&gt;,\n#   antiguedad &lt;dbl&gt;, antigua_ne &lt;chr+lbl&gt;, cocina &lt;chr+lbl&gt;,\n#   cocina_dor &lt;chr+lbl&gt;, cuart_dorm &lt;dbl&gt;, num_cuarto &lt;dbl&gt;,\n#   disp_agua &lt;chr+lbl&gt;, dotac_agua &lt;chr+lbl&gt;, excusado &lt;chr+lbl&gt;,\n#   uso_compar &lt;chr+lbl&gt;, sanit_agua &lt;chr+lbl&gt;, biodigest &lt;chr+lbl&gt;,\n#   bano_comp &lt;dbl&gt;, bano_excus &lt;dbl&gt;, bano_regad &lt;dbl&gt;, drenaje &lt;chr+lbl&gt;, …\n\n\n\nconcentrado concentrado es c(\"folioviv\", \"foliohog\")\n\n\nconcentrado %&gt;% \n  janitor::get_dupes(c(folioviv, foliohog))\n\nNo duplicate combinations found of: folioviv, foliohog\n\n\n# A tibble: 0 × 127\n# ℹ 127 variables: folioviv &lt;chr&gt;, foliohog &lt;chr&gt;, dupe_count &lt;int&gt;,\n#   ubica_geo &lt;chr+lbl&gt;, tam_loc &lt;chr+lbl&gt;, est_socio &lt;chr+lbl&gt;, est_dis &lt;chr&gt;,\n#   upm &lt;chr&gt;, factor &lt;dbl&gt;, clase_hog &lt;chr+lbl&gt;, sexo_jefe &lt;chr+lbl&gt;,\n#   edad_jefe &lt;dbl&gt;, educa_jefe &lt;chr+lbl&gt;, tot_integ &lt;dbl&gt;, hombres &lt;dbl&gt;,\n#   mujeres &lt;dbl&gt;, mayores &lt;dbl&gt;, menores &lt;dbl&gt;, p12_64 &lt;dbl&gt;, p65mas &lt;dbl&gt;,\n#   ocupados &lt;dbl&gt;, percep_ing &lt;dbl&gt;, perc_ocupa &lt;dbl&gt;, ing_cor &lt;dbl&gt;,\n#   ingtrab &lt;dbl&gt;, trabajo &lt;dbl&gt;, sueldos &lt;dbl&gt;, horas_extr &lt;dbl&gt;, …\n\n\n\nPoblacion individuos es c(\"folioviv\", \"foliohog\", \"numren\")\n\n\npoblacion %&gt;% \n  janitor::get_dupes(c(folioviv, foliohog, numren))\n\nNo duplicate combinations found of: folioviv, foliohog, numren\n\n\n# A tibble: 0 × 189\n# ℹ 189 variables: folioviv &lt;chr&gt;, foliohog &lt;chr&gt;, numren &lt;chr&gt;,\n#   dupe_count &lt;int&gt;, parentesco &lt;chr+lbl&gt;, sexo &lt;chr+lbl&gt;, edad &lt;dbl&gt;,\n#   madre_hog &lt;chr+lbl&gt;, madre_id &lt;chr&gt;, padre_hog &lt;chr+lbl&gt;, padre_id &lt;chr&gt;,\n#   disc_camin &lt;chr+lbl&gt;, disc_ver &lt;chr+lbl&gt;, disc_brazo &lt;chr+lbl&gt;,\n#   disc_apren &lt;chr+lbl&gt;, disc_oir &lt;chr+lbl&gt;, disc_vest &lt;chr+lbl&gt;,\n#   disc_habla &lt;chr+lbl&gt;, disc_acti &lt;chr+lbl&gt;, cau_camin &lt;chr+lbl&gt;,\n#   cau_ver &lt;chr+lbl&gt;, cau_brazo &lt;chr+lbl&gt;, cau_apren &lt;chr+lbl&gt;, …\n\n\nEsto es un id compuesto. No es una sola variable. Para esto modificamos ligeramente cómo ponemos el by =, pero siempre eligiendo el id de la base de mayor nivel. (Tené cuidado con los paréntesis)\n\nmerge_data2&lt;- merge(concentrado, poblacion, \n                    by = c(\"folioviv\", \"foliohog\"))\ndim(merge_data2)\n\n[1] 309684    312\n\n\nRevisemos la base\n\nmerge_data2 %&gt;% \n  tail()\n\n         folioviv foliohog ubica_geo tam_loc est_socio est_dis.x   upm.x\n309679 3260797909        1     32046       4         2       560 0010232\n309680 3260797910        1     32046       4         2       560 0010232\n309681 3260797910        1     32046       4         2       560 0010232\n309682 3260797912        1     32046       4         2       560 0010232\n309683 3260797912        1     32046       4         2       560 0010232\n309684 3260797912        1     32046       4         2       560 0010232\n       factor.x clase_hog sexo_jefe edad_jefe educa_jefe tot_integ hombres\n309679      123         2         1        37         04         4       2\n309680      123         2         1        63         06         2       1\n309681      123         2         1        63         06         2       1\n309682      123         2         1        29         10         3       1\n309683      123         2         1        29         10         3       1\n309684      123         2         1        29         10         3       1\n       mujeres mayores menores p12_64 p65mas ocupados percep_ing perc_ocupa\n309679       2       2       2      2      0        1          1          1\n309680       1       2       0      2      0        2          1          1\n309681       1       2       0      2      0        2          1          1\n309682       2       2       1      2      0        2          2          2\n309683       2       2       1      2      0        2          2          2\n309684       2       2       1      2      0        2          2          2\n         ing_cor   ingtrab  trabajo  sueldos horas_extr comisiones aguinaldo\n309679  27055.89  26413.04 26413.04 26413.04          0          0         0\n309680 159450.69 136709.99     0.00     0.00          0          0         0\n309681 159450.69 136709.99     0.00     0.00          0          0         0\n309682  43633.12  38739.12     0.00     0.00          0          0         0\n309683  43633.12  38739.12     0.00     0.00          0          0         0\n309684  43633.12  38739.12     0.00     0.00          0          0         0\n       indemtrab otra_rem remu_espec   negocio   noagrop industria comercio\n309679         0        0          0      0.00      0.00         0        0\n309680         0        0          0 136709.99 136709.99         0   136710\n309681         0        0          0 136709.99 136709.99         0   136710\n309682         0        0          0  38739.12  38739.12         0        0\n309683         0        0          0  38739.12  38739.12         0        0\n309684         0        0          0  38739.12  38739.12         0        0\n       servicios agrope agricolas pecuarios reproducc pesca otros_trab rentas\n309679      0.00      0         0         0         0     0          0      0\n309680      0.00      0         0         0         0     0          0      0\n309681      0.00      0         0         0         0     0          0      0\n309682  38739.12      0         0         0         0     0          0      0\n309683  38739.12      0         0         0         0     0          0      0\n309684  38739.12      0         0         0         0     0          0      0\n       utilidad arrenda transfer jubilacion becas donativos remesas bene_gob\n309679        0       0   642.85          0     0         0       0        0\n309680        0       0 14031.03          0     0         0       0        0\n309681        0       0 14031.03          0     0         0       0        0\n309682        0       0  2571.42          0     0         0       0        0\n309683        0       0  2571.42          0     0         0       0        0\n309684        0       0  2571.42          0     0         0       0        0\n       transf_hog trans_inst estim_alqu otros_ing gasto_mon alimentos\n309679     642.85          0       0.00         0  18702.34   6325.68\n309680   14031.03          0    8709.67         0 117455.55  59322.63\n309681   14031.03          0    8709.67         0 117455.55  59322.63\n309682    2571.42          0    2322.58         0  30166.09  13512.73\n309683    2571.42          0    2322.58         0  30166.09  13512.73\n309684    2571.42          0    2322.58         0  30166.09  13512.73\n       ali_dentro cereales  carnes pescado   leche   huevo aceites tuberculo\n309679    4204.26  1157.13 2057.14       0  989.99    0.00       0      0.00\n309680   51608.35 10697.09    0.00       0 2854.27 1028.56       0   2288.56\n309681   51608.35 10697.09    0.00       0 2854.27 1028.56       0   2288.56\n309682   11905.59  1414.26 1864.28       0 2455.69  321.42       0    488.57\n309683   11905.59  1414.26 1864.28       0 2455.69  321.42       0    488.57\n309684   11905.59  1414.26 1864.28       0 2455.69  321.42       0    488.57\n       verduras  frutas azucar    cafe especias otros_alim bebidas ali_fuera\n309679     0.00    0.00      0    0.00     0.00       0.00    0.00   2121.42\n309680  4847.08 1157.11      0 7328.57 13139.99    6377.13 1889.99   7714.28\n309681  4847.08 1157.11      0 7328.57 13139.99    6377.13 1889.99   7714.28\n309682  2121.39 1028.57      0    0.00     0.00    2211.41    0.00   1607.14\n309683  2121.39 1028.57      0    0.00     0.00    2211.41    0.00   1607.14\n309684  2121.39 1028.57      0    0.00     0.00    2211.41    0.00   1607.14\n       tabaco vesti_calz vestido calzado vivienda alquiler pred_cons  agua\n309679      0    1036.95    0.00 1036.95  4385.37  2322.58         0 181.5\n309680      0       0.00    0.00    0.00   501.00     0.00       100 200.0\n309681      0       0.00    0.00    0.00   501.00     0.00       100 200.0\n309682      0     273.91  273.91    0.00   410.00     0.00        50   0.0\n309683      0     273.91  273.91    0.00   410.00     0.00        50   0.0\n309684      0     273.91  273.91    0.00   410.00     0.00        50   0.0\n       energia limpieza cuidados utensilios enseres  salud atenc_ambu hospital\n309679 1881.29  3028.03  3028.03          0     0.0    0.0        0.0        0\n309680  201.00  5530.63  5530.63          0     0.0  782.6      782.6        0\n309681  201.00  5530.63  5530.63          0     0.0  782.6      782.6        0\n309682  360.00  1186.77   795.47          0   391.3 1956.5     1956.5        0\n309683  360.00  1186.77   795.47          0   391.3 1956.5     1956.5        0\n309684  360.00  1186.77   795.47          0   391.3 1956.5     1956.5        0\n       medicinas transporte publico foraneo adqui_vehi mantenim refaccion\n309679         0    2283.13       0       0          0  2283.13    831.52\n309680         0   16259.12       0       0          0 14516.12      0.00\n309681         0   16259.12       0       0          0 14516.12      0.00\n309682         0    4383.87       0       0          0  3483.87      0.00\n309683         0    4383.87       0       0          0  3483.87      0.00\n309684         0    4383.87       0       0          0  3483.87      0.00\n         combus comunica educa_espa educacion esparci paq_turist personales\n309679  1451.61        0       0.00         0    0.00          0    1643.18\n309680 14516.12     1743       0.00         0    0.00          0     435.48\n309681 14516.12     1743       0.00         0    0.00          0     435.48\n309682  3483.87      900    3913.04         0 3913.04          0    4529.27\n309683  3483.87      900    3913.04         0 3913.04          0    4529.27\n309684  3483.87      900    3913.04         0 3913.04          0    4529.27\n       cuida_pers acces_pers otros_gas transf_gas percep_tot retiro_inv\n309679    1643.18       0.00         0       0.00          0          0\n309680     435.48       0.00         0   34624.09          0          0\n309681     435.48       0.00         0   34624.09          0          0\n309682    3794.49     234.78       500       0.00          0          0\n309683    3794.49     234.78       500       0.00          0          0\n309684    3794.49     234.78       500       0.00          0          0\n       prestamos otras_perc ero_nm_viv ero_nm_hog erogac_tot cuota_viv\n309679         0          0          0          0       0.00         0\n309680         0          0          0          0   58451.08         0\n309681         0          0          0          0   58451.08         0\n309682         0          0          0          0    9538.04         0\n309683         0          0          0          0    9538.04         0\n309684         0          0          0          0    9538.04         0\n       mater_serv material servicio deposito prest_terc pago_tarje deudas\n309679          0        0        0     0.00          0          0      0\n309680          0        0        0 58451.08          0          0      0\n309681          0        0        0 58451.08          0          0      0\n309682          0        0        0  9538.04          0          0      0\n309683          0        0        0  9538.04          0          0      0\n309684          0        0        0  9538.04          0          0      0\n       balance otras_erog     smg numren parentesco sexo edad madre_hog\n309679       0          0 15558.3     04        301    1    5         1\n309680       0          0 15558.3     01        101    1   63         2\n309681       0          0 15558.3     02        201    2   59         2\n309682       0          0 15558.3     01        101    1   29         2\n309683       0          0 15558.3     02        201    2   30         2\n309684       0          0 15558.3     03        301    2    0         1\n       madre_id padre_hog padre_id disc_camin disc_ver disc_brazo disc_apren\n309679       02         1       01          4        4          4          4\n309680                  2                   4        3          4          4\n309681                  2                   4        3          4          4\n309682                  2                   4        4          4          4\n309683                  2                   4        4          4          4\n309684       02         1       01          4        4          4          4\n       disc_oir disc_vest disc_habla disc_acti cau_camin cau_ver cau_brazo\n309679        4         4          4         4                            \n309680        4         4          4         4                 2          \n309681        4         4          4         4                 2          \n309682        4         4          4         4                            \n309683        4         4          4         4                            \n309684        4         4          4         4                            \n       cau_apren cau_oir cau_vest cau_habla cau_acti hablaind lenguaind\n309679                                                      2          \n309680                                                      2          \n309681                                                      2          \n309682                                                      2          \n309683                                                      2          \n309684                                                                 \n       hablaesp comprenind etnia alfabetism asis_esc nivel grado tipoesc\n309679                   2     2          2        1    01     3       1\n309680                   2     2          1        2                    \n309681                   2     2          1        2                    \n309682                   2     2          1        2                    \n309683                   2     2          1        2                    \n309684                                                                  \n       tiene_b otorg_b forma_b tiene_c otorg_c forma_c nivelaprob gradoaprob\n309679       2                                                  1          2\n309680                                                          3          3\n309681                                                          3          3\n309682                                                          7          5\n309683                                                          7          5\n309684                                                                      \n       antec_esc residencia edo_conyug pareja_hog conyuge_id segsoc ss_aa ss_mm\n309679                   32                                            NA    NA\n309680                   32          2          1         02      2    NA    NA\n309681                   32          2          1         01      2    NA    NA\n309682         3         32          2          1         02      2    NA    NA\n309683         3         32          2          1         01      2    NA    NA\n309684                                                                 NA    NA\n       redsoc_1 redsoc_2 redsoc_3 redsoc_4 redsoc_5 redsoc_6 hor_1 min_1\n309679                                                          NA    NA\n309680        2        3        3        3        3             56     0\n309681                                                          NA    NA\n309682        3        3        3        3        2        3    48     0\n309683        3        2        3        4        2        2    10     0\n309684                                                          NA    NA\n       usotiempo1 hor_2 min_2 usotiempo2 hor_3 min_3 usotiempo3 hor_4 min_4\n309679               NA    NA               NA    NA               NA    NA\n309680               NA    NA          9    NA    NA          9    NA    NA\n309681               NA    NA               NA    NA               NA    NA\n309682               NA    NA          9    NA    NA          9    NA    NA\n309683               NA    NA          9    NA    NA          9    NA    NA\n309684               NA    NA               NA    NA               NA    NA\n       usotiempo4 hor_5 min_5 usotiempo5 hor_6 min_6 usotiempo6 hor_7 min_7\n309679               NA    NA               NA    NA               NA    NA\n309680          9    NA    NA          9    NA    NA          9    NA    NA\n309681               NA    NA               NA    NA               NA    NA\n309682          9     2     0               NA    NA          9    NA    NA\n309683          9    NA    NA          9    10     0               NA    NA\n309684               NA    NA               NA    NA               NA    NA\n       usotiempo7 hor_8 min_8 usotiempo8 pop_insabi atemed inst_1 inst_2 inst_3\n309679               NA    NA                     2      2                     \n309680          9    21     0                     2      2                     \n309681               NA    NA                     2      2                     \n309682          9    21     0                     2      2                     \n309683          9    10     0                     2      2                     \n309684               NA    NA                     2      2                     \n       inst_4 inst_5 inst_6 inscr_1 inscr_2 inscr_3 inscr_4 inscr_5 inscr_6\n309679                                                                     \n309680                                                                     \n309681                                                                     \n309682                                                                     \n309683                                                                     \n309684                                                                     \n       inscr_7 inscr_8 prob_anio prob_mes prob_sal aten_sal servmed_1 servmed_2\n309679                      2022       06        1        1                    \n309680                      2022       10        1        1                    \n309681                      2018       03        1        1                    \n309682                      2022       09        1        1                    \n309683                      2022       06        1        1                    \n309684                      2022       07        1        1                    \n       servmed_3 servmed_4 servmed_5 servmed_6 servmed_7 servmed_8 servmed_9\n309679                                                          08          \n309680                                                          08          \n309681                                                          08          \n309682                                                          08          \n309683                                                          08          \n309684                                                          08          \n       servmed_10 servmed_11 servmed_12 hh_lug mm_lug hh_esp mm_esp pagoaten_1\n309679                                       0     10      0     10          1\n309680                                       1      0      0      1           \n309681                                       0     30      1      0           \n309682                                       0      5      0     10          1\n309683                                       0     22      0      5          1\n309684                                       5      0      0      5          1\n       pagoaten_2 pagoaten_3 pagoaten_4 pagoaten_5 pagoaten_6 pagoaten_7\n309679          2                                                       \n309680                                                                 7\n309681                                                      6           \n309682          2                                                       \n309683          2                                                       \n309684          2                                                       \n       noatenc_1 noatenc_2 noatenc_3 noatenc_4 noatenc_5 noatenc_6 noatenc_7\n309679                                                                      \n309680                                                                      \n309681                                                                      \n309682                                                                      \n309683                                                                      \n309684                                                                      \n       noatenc_8 noatenc_9 noatenc_10 noatenc_11 noatenc_12 noatenc_13\n309679                                                                \n309680                                                                \n309681                                                                \n309682                                                                \n309683                                                                \n309684                                                                \n       noatenc_14 noatenc_15 noatenc_16 norecib_1 norecib_2 norecib_3 norecib_4\n309679                                                                         \n309680                                                                         \n309681                                                                         \n309682                                                                         \n309683                                                                         \n309684                                                                         \n       norecib_5 norecib_6 norecib_7 norecib_8 norecib_9 norecib_10 norecib_11\n309679                                                                        \n309680                                                                        \n309681                                                                        \n309682                                                                        \n309683                                                                        \n309684                                                                        \n       norecib_12 razon_1 razon_2 razon_3 razon_4 razon_5 razon_6 razon_7\n309679                                                                   \n309680                                                                   \n309681                                                                   \n309682                                                                   \n309683                                                                   \n309684                                                                   \n       razon_8 razon_9 razon_10 razon_11 diabetes pres_alta peso segvol_1\n309679                                                         1         \n309680                                          1         1    1         \n309681                                          1         1    1         \n309682                                          2         1    1         \n309683                                          2         1    1         \n309684                                                         1         \n       segvol_2 segvol_3 segvol_4 segvol_5 segvol_6 segvol_7 hijos_viv\n309679                                                              NA\n309680                                            6                 NA\n309681                                            6                  4\n309682                                            6                 NA\n309683                                            6                  1\n309684                                                              NA\n       hijos_mue hijos_sob trabajo_mp motivo_aus act_pnea1 act_pnea2 num_trabaj\n309679        NA        NA                                                     \n309680        NA        NA          1                                         1\n309681         0         4          1                                         1\n309682        NA        NA          1                                         1\n309683         0         1          1                                         1\n309684        NA        NA                                                     \n       c_futuro ct_futuro entidad est_dis.y   upm.y factor.y\n309679                         32       560 0010232      123\n309680                         32       560 0010232      123\n309681                         32       560 0010232      123\n309682                         32       560 0010232      123\n309683                         32       560 0010232      123\n309684                         32       560 0010232      123"
  },
  {
    "objectID": "P4.html#bases-de-distinto-tamaño",
    "href": "P4.html#bases-de-distinto-tamaño",
    "title": "4  Fusionado",
    "section": "4.5 Bases de distinto tamaño",
    "text": "4.5 Bases de distinto tamaño\nHasta ahorita hemos hecho merge que son de unidades de distinto nivel y son incluyentes. A veces tenemos bases de datos que son de distinto tamaño y del mismo nivel. A veces las dos aportan casos y a veces aportan variables, y a veces, las dos aportan las dos cosas.\nVamos a revisar qué pasaría si quisiéramos incorporar la información los ingresos\n\nrm(merge_data, merge_data2) # botamos otros ejemplos\n\ningresos&lt;- haven::read_sav(\"datos/ingresos.sav\")\n\nEsta base tiene otro ID\n\nIngresos ingresos es c(\"folioviv\", \"foliohog\", \"numren\", \"clave\")\n\n\ningresos %&gt;% \n  janitor::get_dupes(c(folioviv, foliohog, numren, clave))\n\nNo duplicate combinations found of: folioviv, foliohog, numren, clave\n\n\n# A tibble: 0 × 22\n# ℹ 22 variables: folioviv &lt;chr&gt;, foliohog &lt;chr&gt;, numren &lt;chr&gt;,\n#   clave &lt;chr+lbl&gt;, dupe_count &lt;int&gt;, mes_1 &lt;chr+lbl&gt;, mes_2 &lt;chr+lbl&gt;,\n#   mes_3 &lt;chr+lbl&gt;, mes_4 &lt;chr+lbl&gt;, mes_5 &lt;chr+lbl&gt;, mes_6 &lt;chr+lbl&gt;,\n#   ing_1 &lt;dbl&gt;, ing_2 &lt;dbl&gt;, ing_3 &lt;dbl&gt;, ing_4 &lt;dbl&gt;, ing_5 &lt;dbl&gt;,\n#   ing_6 &lt;dbl&gt;, ing_tri &lt;dbl&gt;, entidad &lt;chr+lbl&gt;, est_dis &lt;chr&gt;, upm &lt;chr&gt;,\n#   factor &lt;dbl&gt;\n\n\n¿Cuántas claves de ingreso hay?\n\ningresos %&gt;% \n  tabyl(clave)\n\n clave      n      percent\n  P001 105685 2.660871e-01\n  P002   2277 5.732888e-03\n  P003   7733 1.946966e-02\n  P004   7706 1.940168e-02\n  P005   3325 8.371477e-03\n  P006   8056 2.028289e-02\n  P007   6676 1.680842e-02\n  P008  18475 4.651520e-02\n  P009  50726 1.277148e-01\n  P011    371 9.340806e-04\n  P012   3296 8.298463e-03\n  P013      3 7.553212e-06\n  P014   4752 1.196429e-02\n  P015     47 1.183337e-04\n  P016    676 1.701991e-03\n  P018     11 2.769511e-05\n  P019    297 7.477680e-04\n  P020      1 2.517737e-06\n  P021   1477 3.718698e-03\n  P022  15569 3.919865e-02\n  P023    775 1.951247e-03\n  P024   2563 6.452961e-03\n  P025    194 4.884411e-04\n  P026    273 6.873423e-04\n  P027    240 6.042570e-04\n  P028    100 2.517737e-04\n  P029     13 3.273059e-05\n  P030      3 7.553212e-06\n  P031    142 3.575187e-04\n  P032  17420 4.385899e-02\n  P033    828 2.084687e-03\n  P034     38 9.567402e-05\n  P035    178 4.481573e-04\n  P036    912 2.296177e-03\n  P037    465 1.170748e-03\n  P038   3080 7.754631e-03\n  P039    473 1.190890e-03\n  P040  22391 5.637466e-02\n  P041   6290 1.583657e-02\n  P043   1612 4.058593e-03\n  P045    650 1.636529e-03\n  P048    793 1.996566e-03\n  P049   1732 4.360721e-03\n  P050     35 8.812081e-05\n  P051  11024 2.775554e-02\n  P052    860 2.165254e-03\n  P053   4842 1.219088e-02\n  P054    216 5.438313e-04\n  P055     10 2.517737e-05\n  P056      1 2.517737e-06\n  P057     87 2.190432e-04\n  P058    366 9.214919e-04\n  P059     64 1.611352e-04\n  P060    140 3.524832e-04\n  P061    209 5.262071e-04\n  P062    806 2.029296e-03\n  P063   2717 6.840693e-03\n  P064     23 5.790796e-05\n  P065     77 1.938658e-04\n  P066    223 5.614555e-04\n  P067   1761 4.433736e-03\n  P068   4882 1.229159e-02\n  P069   6976 1.756374e-02\n  P070   8075 2.033073e-02\n  P071   5079 1.278759e-02\n  P072   4113 1.035545e-02\n  P073    185 4.657814e-04\n  P074    198 4.985120e-04\n  P075    735 1.850537e-03\n  P076   1136 2.860150e-03\n  P077   1472 3.706110e-03\n  P078   1459 3.673379e-03\n  P079   1260 3.172349e-03\n  P080    105 2.643624e-04\n  P081     49 1.233691e-04\n  P101   7943 1.999839e-02\n  P102   5346 1.345982e-02\n  P103    647 1.628976e-03\n  P104  22933 5.773927e-02\n  P105   2036 5.126113e-03\n  P106    329 8.283356e-04\n  P107     66 1.661707e-04\n  P108    373 9.391161e-04\n\n\n\ningresos_sueldos&lt;-ingresos %&gt;% \n    filter(clave==\"P001\") \ndim(ingresos_sueldos)\n\n[1] 105685     21\n\n\nVamos a hacer el primer tipo de fusionado\n\nmerge_data3&lt;-merge(poblacion, ingresos_sueldos, by=c(\"folioviv\", \"foliohog\", \"numren\"))\ndim(merge_data3)\n\n[1] 105685    206\n\n\n¡La base nueva no tiene a todas las observaciones, solo la que tiene en la base más pequeña!"
  },
  {
    "objectID": "P4.html#cuatro-formas-de-hacer-un-fusionado",
    "href": "P4.html#cuatro-formas-de-hacer-un-fusionado",
    "title": "4  Fusionado",
    "section": "4.6 Cuatro formas de hacer un fusionado",
    "text": "4.6 Cuatro formas de hacer un fusionado\nEn realidad hay cuatro formas de hacer un “merge”\n\n4.6.1 Casos en ambas bases\nPor default, el comando tiene activado la opción “all = FALSE”, que nos deja los datos de ambas bases comunes. (tipo una intersección)\n\nmerge_data3&lt;-merge(poblacion, \n                   ingresos_sueldos,\n                   by=c(\"folioviv\", \"foliohog\", \"numren\"), \n                   all = F)\ndim(merge_data3)\n\n[1] 105685    206\n\n\n\n\n4.6.2 Todos los casos\nSi cambiamos la opción “all = TRUE”, que nos deja los datos comunes a ambas bases. (como una unión)\n\nmerge_data3&lt;-merge(poblacion,\n                   ingresos_sueldos, \n                   by=c(\"folioviv\", \"foliohog\", \"numren\"), \n                   all = T)\ndim(merge_data3)\n\n[1] 309684    206\n\n\n\n\n4.6.3 Casos en la base 1\nSi queremos quedarnos con todos los datos que hay en la primera base, x, vamos a usar a opción all.x = TRUE.\n\nmerge_data3&lt;-merge(poblacion, \n                   ingresos_sueldos,\n                   by=c(\"folioviv\", \"foliohog\", \"numren\"), \n                   all.x  = TRUE)\ndim(merge_data3)\n\n[1] 309684    206\n\n\n\n\n4.6.4 Casos de la base 2\nNotamos que hoy sí tenemos los datos de toda la población y hay missings en las variables aportadas por la base de trabajo\nSi queremos lo contrario, quedarnos con los datos aportados por la segunda base, y, vamos a usar la opción all.y=TRUE\n\nmerge_data3&lt;-merge(poblacion, \n                   ingresos_sueldos,\n                   by=c(\"folioviv\", \"foliohog\", \"numren\"),\n                   all.y  = TRUE)\ndim(merge_data3)\n\n[1] 105685    206"
  },
  {
    "objectID": "P4.html#las-cuatro-formas-en-dplyr",
    "href": "P4.html#las-cuatro-formas-en-dplyr",
    "title": "4  Fusionado",
    "section": "4.7 Las cuatro formas en dplyr",
    "text": "4.7 Las cuatro formas en dplyr\nEl caso 1:\n\nmerge_data3&lt;-dplyr::inner_join(poblacion,\n                               ingresos_sueldos,\n                               by=c(\"folioviv\", \"foliohog\", \"numren\"))\ndim(merge_data3)\n\n[1] 105685    206\n\n\nEl caso 2:\n\nmerge_data3&lt;-dplyr::full_join(poblacion, \n                              ingresos_sueldos, \n                              by=c(\"folioviv\", \"foliohog\", \"numren\"))\ndim(merge_data3)\n\n[1] 309684    206\n\n\nEl caso 3:\n\nmerge_data3&lt;-dplyr::left_join(poblacion,\n                              ingresos_sueldos, \n                              by=c(\"folioviv\", \"foliohog\", \"numren\"))\ndim(merge_data3)\n\n[1] 309684    206\n\n\nEl caso 4:\n\nmerge_data3&lt;-dplyr::right_join(poblacion, \n                               ingresos_sueldos,\n                               by=c(\"folioviv\", \"foliohog\", \"numren\"))\ndim(merge_data3)\n\n[1] 105685    206\n\n\nTambién se puede usar con pipes, cualquier opción de dplyr\n\nmerge_data3&lt;-poblacion %&gt;% # pongo el conjunto que será la \"izquierda\n  dplyr::right_join(ingresos_sueldos, \n                    by=c(\"folioviv\", \"foliohog\", \"numren\"))\ndim(merge_data3)\n\n[1] 105685    206"
  },
  {
    "objectID": "P4.html#cheatsheet-de-dplyr",
    "href": "P4.html#cheatsheet-de-dplyr",
    "title": "4  Fusionado",
    "section": "4.8 Cheatsheet de {dplyr}",
    "text": "4.8 Cheatsheet de {dplyr}\nLa puedes descargar de aquí"
  },
  {
    "objectID": "P4.html#ejercicio",
    "href": "P4.html#ejercicio",
    "title": "4  Fusionado",
    "section": "4.9 Ejercicio",
    "text": "4.9 Ejercicio\n¡Junta tu base!"
  },
  {
    "objectID": "P5.html#datos",
    "href": "P5.html#datos",
    "title": "5  Ponderación y otros",
    "section": "5.1 Datos",
    "text": "5.1 Datos\nE importamos la base\n\nconcentradohogar &lt;- haven::read_dta(\"datos/concentradohogar.dta\") \n\nTambién importemos la base de población\n\npoblacion &lt;- haven::read_sav(\"datos/poblacion.sav\")  \n\n\n5.1.1 Recordemos nuestro etiquetado\n\netiqueta_sex&lt;-c(\"Hombre\", \"Mujer\")\n\nconcentradohogar&lt;-concentradohogar %&gt;% \n  mutate(sexo_jefe=as.numeric(sexo_jefe)) %&gt;% # para quitar el \"string\"\n  sjlabelled::set_labels(sexo_jefe, labels=etiqueta_sex) \n\n\nconcentradohogar&lt;-concentradohogar %&gt;% \n  mutate(clase_hog=as.numeric(clase_hog)) %&gt;% # para quitar el \"string\"\n  sjlabelled::set_labels(clase_hog, labels=c(\"unipersonal\",\n                                             \"nuclear\", \n                                             \"ampliado\",\n                                             \"compuesto\",\n                                             \"corresidente\")) \n\nCon “tabyl()”” de “janitor””\n\nconcentradohogar %&gt;%\n  dplyr::mutate(sexo_jefe=as_label(sexo_jefe))  %&gt;%\n  janitor::tabyl(sexo_jefe)\n\n sexo_jefe     n   percent\n    Hombre 61905 0.6870547\n     Mujer 28197 0.3129453"
  },
  {
    "objectID": "P5.html#factores-de-expansión-y-algunas-otras-medidas",
    "href": "P5.html#factores-de-expansión-y-algunas-otras-medidas",
    "title": "5  Ponderación y otros",
    "section": "5.2 Factores de expansión y algunas otras medidas",
    "text": "5.2 Factores de expansión y algunas otras medidas\n\n5.2.1 La función tally()\nEl comando tabyl() del paquete {janitor} es muy útil pero no es compatible con los factores del expansión. En realidad, tabyl() nos ahorra un poco el hecho de tener que agrupar nuestra base en categorías y luego hacer un conteo para cada una de ellas. tally() es un comando que nos hace ese conteo y group_by() nos agrupa las observaciones de nuestra base de datos para hacer cualquier operación.\n\nconcentradohogar %&gt;% \n group_by(as_label(sexo_jefe)) %&gt;% \n  tally(factor) %&gt;% #nombre del factor\n  adorn_totals()  # Agrega total\n\n as_label(sexo_jefe)        n\n              Hombre 25397559\n               Mujer 12162564\n               Total 37560123\n\n\nPodemos usar funciones de adorns... de `{janitor}\n\nconcentradohogar %&gt;% \n group_by(as_label(sexo_jefe)) %&gt;% \n  tally(factor) %&gt;% #nombre del factor\n  adorn_totals() %&gt;% # Agrega total\n  adorn_percentages(\"all\")  %&gt;% \n  adorn_pct_formatting()\n\n as_label(sexo_jefe)      n\n              Hombre  67.6%\n               Mujer  32.4%\n               Total 100.0%\n\n\n\n\n5.2.2 Con dplyr::count()\nLa función count() también permite dar pesos a la operaciones de frecuencias, con el argumento wt =\n\nconcentradohogar %&gt;% \n  count(sexo_jefe, clase_hog,  wt = factor) \n\n# A tibble: 10 × 3\n   sexo_jefe clase_hog        n\n       &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;\n 1         1         1  2560548\n 2         1         2 17303329\n 3         1         3  5324985\n 4         1         4   132517\n 5         1         5    76180\n 6         2         1  2316541\n 7         2         2  5769256\n 8         2         3  3932043\n 9         2         4    96921\n10         2         5    47803\n\n\nEs compatible con etiquetas\n\nconcentradohogar %&gt;% \n  count(as_label(sexo_jefe), as_label(clase_hog),  wt = factor) \n\n# A tibble: 10 × 3\n   `as_label(sexo_jefe)` `as_label(clase_hog)`        n\n   &lt;fct&gt;                 &lt;fct&gt;                    &lt;dbl&gt;\n 1 Hombre                unipersonal            2560548\n 2 Hombre                nuclear               17303329\n 3 Hombre                ampliado               5324985\n 4 Hombre                compuesto               132517\n 5 Hombre                corresidente             76180\n 6 Mujer                 unipersonal            2316541\n 7 Mujer                 nuclear                5769256\n 8 Mujer                 ampliado               3932043\n 9 Mujer                 compuesto                96921\n10 Mujer                 corresidente             47803\n\n\n\n\n5.2.3 con {pollster}\nPara una variable\n\n# tabulado simple con factor de expansión\n\nconcentradohogar %&gt;% \n  dplyr::mutate(sexo_jefe = sjlabelled::as_label(sexo_jefe)) %&gt;% \n  pollster::topline(sexo_jefe , weight = factor)\n\n# A tibble: 2 × 5\n  Response Frequency Percent `Valid Percent` `Cumulative Percent`\n  &lt;fct&gt;        &lt;dbl&gt;   &lt;dbl&gt;           &lt;dbl&gt;                &lt;dbl&gt;\n1 Hombre    25397559    67.6            67.6                 67.6\n2 Mujer     12162564    32.4            32.4                100  \n\n\nPara dos variables\n\n# tabulado simple con factor de expansión\n\nconcentradohogar %&gt;% \n  dplyr::mutate(sexo_jefe = sjlabelled::as_label(sexo_jefe)) %&gt;% \n  dplyr::mutate(clase_hog = sjlabelled::as_label(clase_hog)) %&gt;% \n  pollster::crosstab(sexo_jefe, clase_hog, weight = factor)\n\n# A tibble: 2 × 7\n  sexo_jefe unipersonal nuclear ampliado compuesto corresidente        n\n  &lt;fct&gt;           &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;        &lt;dbl&gt;    &lt;dbl&gt;\n1 Hombre           10.1    68.1     21.0     0.522        0.300 25397559\n2 Mujer            19.0    47.4     32.3     0.797        0.393 12162564"
  },
  {
    "objectID": "P5.html#diseño-complejo",
    "href": "P5.html#diseño-complejo",
    "title": "5  Ponderación y otros",
    "section": "5.3 Diseño complejo",
    "text": "5.3 Diseño complejo\nHay muchos diseños muestrales, asumiremos el diseño simple, pero hay que revisar la documentación de la base\n\n# Muestreo aleatorio\nconcentradohogar_srvy &lt;- concentradohogar %&gt;%\n  as_survey_design(weights = factor)\n\nSi revisamos las encuestas tiene un diseño complejo, hay estratos y unidades primarias de muestreo\n\n# Muestreo estratificado\nconcentradohogar_srvy &lt;- concentradohogar %&gt;%\n  as_survey_design(\n    upm = upm,\n    strata = est_dis,\n    weights = factor,\n    nest = TRUE)\n\nComo vemos esto es un archivo bien grande, por lo que mejor vamos a seleccionar un par de variables:\n\n# simple random sample\nconcentradohogar_srvy &lt;- concentradohogar %&gt;%\n  select(upm, est_dis, factor, clase_hog,\n         sexo_jefe, edad_jefe, educa_jefe,ing_cor, factor) %&gt;% \n  as_survey_design(\n    upm=upm,\n    strata = est_dis,\n    weights = factor,\n    nest = TRUE)\n\nPara una media ponderada\n\nconcentradohogar_srvy %&gt;%\n  filter(ing_cor&gt;0) %&gt;% # sólo con ingresos\n  summarise(\n    media_ponderada = survey_mean(ing_cor, na.rm=T))\n\n# A tibble: 1 × 2\n  media_ponderada media_ponderada_se\n            &lt;dbl&gt;              &lt;dbl&gt;\n1          63708.               321.\n\n\nSi queremos los intervalos de confianza (spoiler):\n\nconcentradohogar_srvy %&gt;%\n  summarize(\n    media_ponderada = survey_mean(ing_cor,\n                                  vartype = \"ci\") )\n\n# A tibble: 1 × 3\n  media_ponderada media_ponderada_low media_ponderada_upp\n            &lt;dbl&gt;               &lt;dbl&gt;               &lt;dbl&gt;\n1          63695.              63067.              64324.\n\n\n\nconcentradohogar_srvy %&gt;%\n  summarize(\n    mediana_ponderada = survey_median(ing_cor,\n                                  vartype = \"ci\") )\n\n# A tibble: 1 × 3\n  mediana_ponderada mediana_ponderada_low mediana_ponderada_upp\n              &lt;dbl&gt;                 &lt;dbl&gt;                 &lt;dbl&gt;\n1            47329.                46978.                47693.\n\n\n\nconcentradohogar_srvy %&gt;%\n  mutate(sexo_jefe=as_label(sexo_jefe)) %&gt;% \n  group_by(sexo_jefe) %&gt;% #variables cuali\n  summarize(proportion = survey_mean(), # proporción\n            total = survey_total() ) # totales\n\n# A tibble: 2 × 5\n  sexo_jefe proportion proportion_se    total total_se\n  &lt;fct&gt;          &lt;dbl&gt;         &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;\n1 Hombre         0.676       0.00221 25397559   85407.\n2 Mujer          0.324       0.00221 12162564   83300."
  },
  {
    "objectID": "P5.html#creación-de-intervalos-con-cortes",
    "href": "P5.html#creación-de-intervalos-con-cortes",
    "title": "5  Ponderación y otros",
    "section": "5.4 Creación de intervalos con cortes",
    "text": "5.4 Creación de intervalos con cortes\nUno de los elementos más comunes es crear grupos. Por ejemplo, la función cut(), nos ayuda a crear variables con ciertos cortes. Por ejemplo, para recodificar por grupos etarios\n\nconcentradohogar %&lt;&gt;% \n  mutate(grupo=cut(edad_jefe,\n                   breaks=c(0, 25, 50, 75, 100)))\n  \n       \nconcentradohogar %&gt;% \n  tabyl(grupo)\n\n    grupo     n      percent valid_percent\n   (0,25]  3297 0.0365918626    0.03659633\n  (25,50] 42220 0.4685800537    0.46863727\n  (50,75] 37664 0.4180151384    0.41806618\n (75,100]  6910 0.0766908615    0.07670023\n     &lt;NA&gt;    11 0.0001220839            NA\n\n\nAlgunas opciones se pueden modificar dentro de la función cut()\n\nconcentradohogar %&lt;&gt;% \n  mutate(grupo=cut(edad_jefe,\n                   breaks=c(0, 25, 50, 75, 100),\n                   include.lowest=T,\n                   right= F))\n  \n       \nconcentradohogar %&gt;% \n  tabyl(grupo)\n\n    grupo     n      percent valid_percent\n   [0,25)  2503 0.0277796275    0.02778302\n  [25,50) 40578 0.4503562629    0.45041125\n  [50,75) 39197 0.4350291891    0.43508231\n [75,100]  7813 0.0867128366    0.08672342\n     &lt;NA&gt;    11 0.0001220839            NA\n\n\nEsto nos puede ayudar para hacer variables de rangos de cualquier tipo."
  },
  {
    "objectID": "P5.html#selecciones-y-filtros-avanzados",
    "href": "P5.html#selecciones-y-filtros-avanzados",
    "title": "5  Ponderación y otros",
    "section": "5.5 Selecciones y filtros avanzados",
    "text": "5.5 Selecciones y filtros avanzados\nEn prácticas pasadas ya revisamos las selecciones y los filtros pero avanzaremos.\n\n5.5.1 Selecciones con “ayudadores” y Wildcards\nTenemos a veces variables que inician o terminan igual porque son parte de una sección, podemos elegir las variables de esa forma:\n\nconcentradohogar %&gt;% \n  select(starts_with(\"ing\"))\n\n# A tibble: 90,102 × 2\n   ing_cor ingtrab\n     &lt;dbl&gt;   &lt;dbl&gt;\n 1  56124.  35707.\n 2 108049.  66766.\n 3 133853.  93082.\n 4 105054.      0 \n 5  24212.  22255.\n 6 121650.  40255.\n 7  60261.  33359.\n 8  95978.      0 \n 9 158399.  80951.\n10  61343.  31182.\n# ℹ 90,092 more rows\n\n\nQue tenga la cadena en cualquier parte del nombre\n\nconcentradohogar %&gt;% \n  select(matches(\"ing\"))\n\n# A tibble: 90,102 × 4\n   percep_ing ing_cor ingtrab otros_ing\n        &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;\n 1          3  56124.  35707.         0\n 2          2 108049.  66766.         0\n 3          2 133853.  93082.         0\n 4          2 105054.      0          0\n 5          1  24212.  22255.         0\n 6          4 121650.  40255.         0\n 7          2  60261.  33359.         0\n 8          1  95978.      0          0\n 9          3 158399.  80951.         0\n10          2  61343.  31182.         0\n# ℹ 90,092 more rows\n\n\nQue tenga la cadena en la parte final\n\nconcentradohogar %&gt;% \n  select(matches(\"hog\"))\n\n# A tibble: 90,102 × 4\n   foliohog clase_hog transf_hog ero_nm_hog\n   &lt;chr&gt;        &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;\n 1 1                3         0          0 \n 2 1                2      9000.         0 \n 3 1                2         0          0 \n 4 1                3         0          0 \n 5 2                1         0       3214.\n 6 1                2         0          0 \n 7 1                2         0          0 \n 8 1                1      2443.         0 \n 9 1                2         0          0 \n10 1                2      1286.         0 \n# ℹ 90,092 more rows\n\n\n\n\n5.5.2 Filtros con %in% y operadores de negación\nSi queremos seleccionar varios elementos en un solo comando, podemos utilizar %in% seguido de un vector de las opciones a señalar.\nSupongamos que nos queremos quedar con los datos de dos entidades. Con esta excusa también aprenderemos a usar una función para extraer de las cadenas\n\nconcentradohogar %&lt;&gt;% \n  mutate(ent=stringr::str_sub(folioviv, start=1, end=2 ))\n\nMás del paquete {stringr} aquí\n\nconcentradohogar %&gt;% \n  filter(ent%in%c(\"09\", \"15\"))\n\n# A tibble: 6,112 × 128\n   folioviv  foliohog ubica_geo tam_loc est_socio est_dis upm   factor clase_hog\n   &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;  &lt;dbl&gt;     &lt;dbl&gt;\n 1 09000069… 1        09002     1       3         141     0003…   1578         3\n 2 09000069… 1        09002     1       3         141     0003…   1578         2\n 3 09000069… 1        09002     1       3         141     0003…   1578         3\n 4 09000069… 1        09002     1       3         141     0003…   1578         3\n 5 09000069… 1        09002     1       3         141     0003…   1578         3\n 6 09000069… 1        09002     1       3         141     0003…   1578         2\n 7 09000092… 1        09002     1       3         141     0003…   1474         2\n 8 09000092… 1        09002     1       3         141     0003…   1474         3\n 9 09000092… 1        09002     1       3         141     0003…   1474         1\n10 09000092… 1        09002     1       3         141     0003…   1474         2\n# ℹ 6,102 more rows\n# ℹ 119 more variables: sexo_jefe &lt;dbl&gt;, edad_jefe &lt;dbl&gt;, educa_jefe &lt;chr&gt;,\n#   tot_integ &lt;dbl&gt;, hombres &lt;dbl&gt;, mujeres &lt;dbl&gt;, mayores &lt;dbl&gt;,\n#   menores &lt;dbl&gt;, p12_64 &lt;dbl&gt;, p65mas &lt;dbl&gt;, ocupados &lt;dbl&gt;,\n#   percep_ing &lt;dbl&gt;, perc_ocupa &lt;dbl&gt;, ing_cor &lt;dbl&gt;, ingtrab &lt;dbl&gt;,\n#   trabajo &lt;dbl&gt;, sueldos &lt;dbl&gt;, horas_extr &lt;dbl&gt;, comisiones &lt;dbl&gt;,\n#   aguinaldo &lt;dbl&gt;, indemtrab &lt;dbl&gt;, otra_rem &lt;dbl&gt;, remu_espec &lt;dbl&gt;, …\n\n\nSi queremos negar esta relación o casi cualquier otro filtro:\n\nconcentradohogar %&gt;% \n  filter(!ent%in%c(\"09\", \"15\"))\n\n# A tibble: 83,990 × 128\n   folioviv  foliohog ubica_geo tam_loc est_socio est_dis upm   factor clase_hog\n   &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;  &lt;dbl&gt;     &lt;dbl&gt;\n 1 01000050… 1        01001     1       4         003     0000…    206         3\n 2 01000050… 1        01001     1       4         003     0000…    206         2\n 3 01000050… 1        01001     1       4         003     0000…    206         2\n 4 01000120… 1        01001     1       3         002     0000…    167         3\n 5 01000120… 2        01001     1       3         002     0000…    167         1\n 6 01000120… 1        01001     1       3         002     0000…    167         2\n 7 01000120… 1        01001     1       3         002     0000…    167         2\n 8 01000193… 1        01001     1       4         003     0000…    212         1\n 9 01000193… 1        01001     1       4         003     0000…    212         2\n10 01000193… 1        01001     1       4         003     0000…    212         2\n# ℹ 83,980 more rows\n# ℹ 119 more variables: sexo_jefe &lt;dbl&gt;, edad_jefe &lt;dbl&gt;, educa_jefe &lt;chr&gt;,\n#   tot_integ &lt;dbl&gt;, hombres &lt;dbl&gt;, mujeres &lt;dbl&gt;, mayores &lt;dbl&gt;,\n#   menores &lt;dbl&gt;, p12_64 &lt;dbl&gt;, p65mas &lt;dbl&gt;, ocupados &lt;dbl&gt;,\n#   percep_ing &lt;dbl&gt;, perc_ocupa &lt;dbl&gt;, ing_cor &lt;dbl&gt;, ingtrab &lt;dbl&gt;,\n#   trabajo &lt;dbl&gt;, sueldos &lt;dbl&gt;, horas_extr &lt;dbl&gt;, comisiones &lt;dbl&gt;,\n#   aguinaldo &lt;dbl&gt;, indemtrab &lt;dbl&gt;, otra_rem &lt;dbl&gt;, remu_espec &lt;dbl&gt;, …"
  },
  {
    "objectID": "P5.html#agregados",
    "href": "P5.html#agregados",
    "title": "5  Ponderación y otros",
    "section": "5.6 Agregados",
    "text": "5.6 Agregados\n\n5.6.1 Agregados como nuevo dataframe\nEl paquete {collapse} tiene muchas funciones para agregar datos. Esta es una operación que puede ser útil cuando queremos pasar de unidades más pequeñas a más grandes.\nSupongamos que necesitamos el total de personas mayores de 64 en cada hogar para pegárselo al concentrado:\n\npoblacion %&gt;% \n  mutate(p65m=edad&gt;64) %&gt;% \n  select(folioviv, foliohog, p65m) %&gt;% \n  group_by(folioviv, foliohog) %&gt;% \n  collapse::fsum() -&gt;p65m_hog\n\nfsum() permite utilizar pesos y además hará la suma para cualquier variable. Por ejemplo podríamos dejar crear una variable para el tamaño del hogar\n\npoblacion %&gt;% \n  mutate(p65m=edad&gt;64) %&gt;% \n  mutate(residente=1) %&gt;% \n  select(folioviv, foliohog, p65m, residente) %&gt;% \n  group_by(folioviv, foliohog) %&gt;% \n  collapse::fsum() -&gt;pob_hog\n\nTambién hay otros comandos para hacer promedios y más\n\npoblacion %&gt;% \n  select(folioviv, foliohog, edad, ) %&gt;% \n  group_by(folioviv, foliohog) %&gt;% \n  collapse::fmean() -&gt;eda_hog\n\n\n\n5.6.2 Agregados dentro del mismo dataframe\nEn sociodemografía es muy muy común que nos importen algunas condiciones e interrelaciones entre los miembros de un hogar. Entonces a veces estudiamos los atributos del hogar como variables de cada individuo, por lo que necesitamos que estén en la misma base.\nPodríamos hacer el merge de los dataframes creados en el apartado anterior y los de población, pero también podemos hacer los estimados dentro de la misma base, así que crearemos variables nuevas\n\npoblacion %&lt;&gt;% \n  group_by(folioviv, foliohog) %&gt;% \n  mutate(mean_edad=mean(edad)) %&gt;% \n  ungroup() # esto es importante\n\nEquivalente\n\npoblacion %&lt;&gt;% \n  mutate(mean_edad=mean(edad), .by= c(folioviv, foliohog))\n\nEl puntito en .by es fundamental, sin eso queda agrupado\nPodemos hacer también más operaciones\n\npoblacion %&lt;&gt;% \n  group_by(folioviv, foliohog) %&gt;% \n  mutate(mean_edad=mean(edad)) %&gt;% \n  ungroup()"
  },
  {
    "objectID": "P5.html#creación-de-quintiles",
    "href": "P5.html#creación-de-quintiles",
    "title": "5  Ponderación y otros",
    "section": "5.7 Creación de quintiles",
    "text": "5.7 Creación de quintiles\nOtro tipo de variables de intervalos muy importante son los quintiles y otras medidas de posición.\n\nconcentradohogar %&lt;&gt;%\n  mutate(quintil0=ntile(ing_cor, n=5))\n\nconcentradohogar %&gt;% \n  tabyl(quintil0)\n\n quintil0     n   percent\n        1 18021 0.2000067\n        2 18021 0.2000067\n        3 18020 0.1999956\n        4 18020 0.1999956\n        5 18020 0.1999956\n\n\nPero quizás nos interesa más los quintiles que toman en cuenta el factor de expansión, por eso usamos el paquete {dineq}\n\nconcentradohogar %&lt;&gt;%\n  mutate(quintil1=dineq::ntiles.wtd(ing_cor, # variable a utilizar\n                                    n=5, # número de grupos equitativos\n                                    weights=factor)) # factor\n\nconcentradohogar %&gt;% \n  tabyl(quintil1)\n\n quintil1     n   percent\n        1 19000 0.2108721\n        2 18418 0.2044128\n        3 17933 0.1990300\n        4 17744 0.1969324\n        5 17007 0.1887527\n\nconcentradohogar %&gt;% \n  count(quintil1, wt=factor) %&gt;% \n  mutate(p=n/sum(n)*100) %&gt;%\n  adorn_totals()\n\n quintil1        n         p\n        1  7512196  20.00046\n        2  7512080  20.00015\n        3  7512216  20.00051\n        4  7511606  19.99889\n        5  7512025  20.00000\n    Total 37560123 100.00000\n\n\nPodemos también ver la diferencia en los máximos y mínimos de ambas variables\n\nconcentradohogar %&gt;% \n  group_by(quintil0) %&gt;% \n  summarise(min=min(ing_cor),\n            max=max(ing_cor))\n\n# A tibble: 5 × 3\n  quintil0    min      max\n     &lt;int&gt;  &lt;dbl&gt;    &lt;dbl&gt;\n1        1     0    25159.\n2        2 25159.   38361.\n3        3 38361.   55235.\n4        4 55235.   83845.\n5        5 83850. 7153770.\n\n\nVeamos con la ponderación:\n\nconcentradohogar %&gt;% \n  group_by(quintil1) %&gt;% \n  summarise(min=min(ing_cor),\n            max=max(ing_cor))\n\n# A tibble: 5 × 3\n  quintil1    min      max\n     &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;\n1        1     0    25883.\n2        2 25883.   39448.\n3        3 39448.   56680.\n4        4 56681.   86372.\n5        5 86373. 7153770.\n\n\nLa flexibilidad de dplyr nos permite además hacer quintiles fácilmente adentro de grupos. Por ejemplo si quisiéramos hacer quintiles estatales… Claro para eso debemos tener la variable.\nLa variable “ubica_geo”, nos da esa información pero junta\n\nconcentradohogar %&gt;% \n  select(ubica_geo) %&gt;% \n  head\n\n# A tibble: 6 × 1\n  ubica_geo\n  &lt;chr&gt;    \n1 01001    \n2 01001    \n3 01001    \n4 01001    \n5 01001    \n6 01001    \n\n\nVamos a crear dos variables, uan que nos diga la entidad y la otra el municipio\n\nconcentradohogar %&lt;&gt;%\n  mutate(ent=stringr::str_sub(ubica_geo, start = 1, end = 2)) %&gt;% \n  mutate(mun=stringr::str_sub(ubica_geo, start = 3, end = 5))\n\nconcentradohogar %&gt;% tabyl(ent)\n\n ent    n    percent\n  01 2669 0.02962198\n  02 4141 0.04595902\n  03 2776 0.03080953\n  04 2204 0.02446117\n  05 4125 0.04578145\n  06 3031 0.03363965\n  07 2112 0.02344010\n  08 4555 0.05055382\n  09 2585 0.02868971\n  10 2713 0.03011032\n  11 3076 0.03413909\n  12 2538 0.02816808\n  13 2135 0.02369537\n  14 2625 0.02913365\n  15 3527 0.03914453\n  16 2215 0.02458325\n  17 2461 0.02731349\n  18 2130 0.02363987\n  19 3612 0.04008790\n  20 2620 0.02907816\n  21 2175 0.02413931\n  22 3822 0.04241859\n  23 2418 0.02683625\n  24 2630 0.02918914\n  25 3479 0.03861180\n  26 2548 0.02827906\n  27 2167 0.02405052\n  28 2322 0.02577079\n  29 2307 0.02560432\n  30 2915 0.03235222\n  31 2947 0.03270738\n  32 2522 0.02799050\n\nconcentradohogar %&gt;% tabyl(mun)\n\n mun    n      percent\n 001 5079 5.636945e-02\n 002 4679 5.193003e-02\n 003 3080 3.418348e-02\n 004 3700 4.106457e-02\n 005 3685 4.089809e-02\n 006 2928 3.249650e-02\n 007 2792 3.098710e-02\n 008 2300 2.552663e-02\n 009 1987 2.205278e-02\n 010 2043 2.267430e-02\n 011 1998 2.217487e-02\n 012 1787 1.983308e-02\n 013 1356 1.504961e-02\n 014 2375 2.635902e-02\n 015 1062 1.178664e-02\n 016 1183 1.312956e-02\n 017 2600 2.885619e-02\n 018 1659 1.841247e-02\n 019 1466 1.627045e-02\n 020 1387 1.539366e-02\n 021  847 9.400457e-03\n 022  611 6.781204e-03\n 023  423 4.694679e-03\n 024  630 6.992076e-03\n 025  641 7.114160e-03\n 026  697 7.735677e-03\n 027  803 8.912122e-03\n 028 1075 1.193092e-02\n 029  703 7.802269e-03\n 030 1916 2.126479e-02\n 031  749 8.312801e-03\n 032  886 9.833300e-03\n 033 1366 1.516060e-02\n 034  450 4.994340e-03\n 035 1466 1.627045e-02\n 036  392 4.350625e-03\n 037 1694 1.880091e-02\n 038  947 1.051031e-02\n 039 1405 1.559344e-02\n 040  491 5.449380e-03\n 041  754 8.368294e-03\n 042  424 4.705778e-03\n 043  469 5.205212e-03\n 044  307 3.407250e-03\n 045  339 3.762403e-03\n 046  508 5.638055e-03\n 047  200 2.219707e-03\n 048  623 6.914386e-03\n 049  221 2.452776e-03\n 050 1293 1.435040e-02\n 051  447 4.961044e-03\n 052  534 5.926617e-03\n 053  830 9.211782e-03\n 054  310 3.440545e-03\n 055  438 4.861157e-03\n 056  356 3.951078e-03\n 057  275 3.052097e-03\n 058  386 4.284034e-03\n 059  292 3.240772e-03\n 060   88 9.766709e-04\n 061  176 1.953342e-03\n 062  258 2.863421e-03\n 063   84 9.322768e-04\n 064  103 1.143149e-03\n 065  154 1.709174e-03\n 066  156 1.731371e-03\n 067  355 3.939979e-03\n 068  217 2.408382e-03\n 069  118 1.309627e-03\n 070  106 1.176444e-03\n 071  123 1.365120e-03\n 072   83 9.211782e-04\n 073  185 2.053229e-03\n 074   72 7.990944e-04\n 075  195 2.164214e-03\n 076  221 2.452776e-03\n 077  220 2.441677e-03\n 078  148 1.642583e-03\n 079  187 2.075426e-03\n 080  106 1.176444e-03\n 081  199 2.208608e-03\n 082  103 1.143149e-03\n 083  110 1.220839e-03\n 084   87 9.655724e-04\n 085  186 2.064327e-03\n 086  109 1.209740e-03\n 087  212 2.352889e-03\n 088  103 1.143149e-03\n 089  244 2.708042e-03\n 090  129 1.431711e-03\n 091   28 3.107589e-04\n 092   58 6.437149e-04\n 093   85 9.433753e-04\n 094   95 1.054361e-03\n 095    9 9.988679e-05\n 096  122 1.354021e-03\n 097  263 2.918914e-03\n 098  268 2.974407e-03\n 099   93 1.032164e-03\n 100   60 6.659120e-04\n 101  489 5.427183e-03\n 102  384 4.261837e-03\n 103   87 9.655724e-04\n 104  230 2.552663e-03\n 105   59 6.548134e-04\n 106  271 3.007702e-03\n 107   73 8.101929e-04\n 108  301 3.340658e-03\n 109  166 1.842356e-03\n 110   36 3.995472e-04\n 111   34 3.773501e-04\n 112  127 1.409514e-03\n 113   84 9.322768e-04\n 114  553 6.137489e-03\n 115   13 1.442809e-04\n 116   39 4.328428e-04\n 117   62 6.881090e-04\n 118   70 7.768973e-04\n 119   65 7.214046e-04\n 120  366 4.062063e-03\n 121  160 1.775765e-03\n 122   51 5.660252e-04\n 123  108 1.198642e-03\n 124   84 9.322768e-04\n 125   40 4.439413e-04\n 128   41 4.550398e-04\n 130   26 2.885619e-04\n 131   54 5.993208e-04\n 132  123 1.365120e-03\n 133    6 6.659120e-05\n 134   21 2.330692e-04\n 135   32 3.551530e-04\n 136   30 3.329560e-04\n 138   41 4.550398e-04\n 140    8 8.878826e-05\n 141   61 6.770105e-04\n 142   45 4.994340e-04\n 144   17 1.886751e-04\n 145   20 2.219707e-04\n 146   20 2.219707e-04\n 148   62 6.881090e-04\n 149   66 7.325032e-04\n 152   23 2.552663e-04\n 153   39 4.328428e-04\n 154   21 2.330692e-04\n 155   40 4.439413e-04\n 156   96 1.065459e-03\n 157   24 2.663648e-04\n 159   17 1.886751e-04\n 160   61 6.770105e-04\n 161   90 9.988679e-04\n 162   21 2.330692e-04\n 163   60 6.659120e-04\n 164   64 7.103061e-04\n 166   18 1.997736e-04\n 167   18 1.997736e-04\n 171   20 2.219707e-04\n 172   42 4.661384e-04\n 174  140 1.553795e-03\n 175   61 6.770105e-04\n 176   18 1.997736e-04\n 177   25 2.774633e-04\n 179   23 2.552663e-04\n 181   20 2.219707e-04\n 183   66 7.325032e-04\n 184  109 1.209740e-03\n 186   41 4.550398e-04\n 188   23 2.552663e-04\n 189   71 7.879958e-04\n 193  183 2.031031e-03\n 194   23 2.552663e-04\n 195   19 2.108721e-04\n 197   63 6.992076e-04\n 198   38 4.217442e-04\n 199   20 2.219707e-04\n 201   65 7.214046e-04\n 202   39 4.328428e-04\n 204   21 2.330692e-04\n 205   42 4.661384e-04\n 206   17 1.886751e-04\n 207   20 2.219707e-04\n 208   58 6.437149e-04\n 211   21 2.330692e-04\n 213   21 2.330692e-04\n 216   23 2.552663e-04\n 232   45 4.994340e-04\n 276   21 2.330692e-04\n 277   18 1.997736e-04\n 278   20 2.219707e-04\n 280   22 2.441677e-04\n 288   22 2.441677e-04\n 291   23 2.552663e-04\n 293    9 9.988679e-05\n 307   21 2.330692e-04\n 309   22 2.441677e-04\n 311   23 2.552663e-04\n 318   20 2.219707e-04\n 321   19 2.108721e-04\n 324   78 8.656856e-04\n 327   59 6.548134e-04\n 334   38 4.217442e-04\n 350    9 9.988679e-05\n 364   23 2.552663e-04\n 375    5 5.549266e-05\n 385   31 3.440545e-04\n 390   33 3.662516e-04\n 397   18 1.997736e-04\n 399    5 5.549266e-05\n 407   23 2.552663e-04\n 409    4 4.439413e-05\n 412   21 2.330692e-04\n 413   22 2.441677e-04\n 415   22 2.441677e-04\n 429   24 2.663648e-04\n 433   19 2.108721e-04\n 437   16 1.775765e-04\n 439   42 4.661384e-04\n 444   20 2.219707e-04\n 448   24 2.663648e-04\n 449   21 2.330692e-04\n 458   23 2.552663e-04\n 466   21 2.330692e-04\n 469   17 1.886751e-04\n 474   17 1.886751e-04\n 484   20 2.219707e-04\n 494   19 2.108721e-04\n 500   22 2.441677e-04\n 504   22 2.441677e-04\n 515   62 6.881090e-04\n 525   22 2.441677e-04\n 530   23 2.552663e-04\n 531   23 2.552663e-04\n 537   13 1.442809e-04\n 547   22 2.441677e-04\n 551   17 1.886751e-04\n 554   19 2.108721e-04\n 557   43 4.772369e-04\n 560   24 2.663648e-04\n 565   20 2.219707e-04\n\n\nHoy sí podemos hacer nuestras variables dentro de cada entidad federativa\n\nconcentradohogar %&lt;&gt;%\n  group_by(ent) %&gt;% \n  mutate(quintil2=dineq::ntiles.wtd(ing_cor, n=5, weights=factor)) %&gt;% \n  ungroup()\n\n¿Discreparán muchos los hogares en sus distribuciones a nivel nacional y por entidad?\n\nconcentradohogar %&gt;% \n  tabyl(quintil1,quintil2) %&gt;% \n  adorn_totals(c(\"row\", \"col\"))\n\n quintil1     1     2     3     4     5 Total\n        1 15746  3086   168     0     0 19000\n        2  4888  9425  3785   320     0 18418\n        3   119  5936  8122  3712    44 17933\n        4     0   304  5628  9191  2621 17744\n        5     0     0     0  3731 13276 17007\n    Total 20753 18751 17703 16954 15941 90102\n\n\nY si queremos este tabulado más bonito\n\nconcentradohogar %&gt;% \n  tabyl(quintil1,quintil2) %&gt;% \n  adorn_totals(c(\"row\", \"col\")) %&gt;% \n  gt()\n\n\n\n\n\n  \n    \n      quintil1\n      1\n      2\n      3\n      4\n      5\n      Total\n    \n  \n  \n    1\n15746\n3086\n168\n0\n0\n19000\n    2\n4888\n9425\n3785\n320\n0\n18418\n    3\n119\n5936\n8122\n3712\n44\n17933\n    4\n0\n304\n5628\n9191\n2621\n17744\n    5\n0\n0\n0\n3731\n13276\n17007\n    Total\n20753\n18751\n17703\n16954\n15941\n90102\n  \n  \n  \n\n\n\n\nconcentradohogar %&gt;%\ntabyl(quintil1,quintil2) %&gt;%\nadorn_totals(c(\"row\", \"col\")) %&gt;% \ngt() %&gt;% \ntab_header( title = md(\"Distribución de los hogares en **México**\"),\n            subtitle = md(\"Según quintiles y *quintiles*\")) %&gt;%\ntab_footnote( footnote = paste(get_label(concentradohogar\\$ing_cor)))\n\n5.7.1 is.na y sus primos\nSi intentamos por ejemplo hacer un filtro para quitar los valores perdidos, no se puede hacer con var==NA\nHay un operador especial para decirnos si un valor es perdido o no.\n\nvector&lt;-c(1:5, NA, sqrt(-1), 5/0, -5/0)\n\nWarning in sqrt(-1): Se han producido NaNs\n\nvector\n\n[1]    1    2    3    4    5   NA  NaN  Inf -Inf\n\n\n\nis.na(vector)\n\n[1] FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE FALSE\n\n\n\nis.nan(vector)\n\n[1] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE\n\n\n\nis.infinite(vector)\n\n[1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE\n\n\nComo son condiciones, funcionan como filtros, esto es útil para quitarnos algunos valores perdidos de análisis\n\nconcentradohogar %&gt;% \n  filter(!is.na(ing_cor)) # no hay perdidos, hay 0\n\n# A tibble: 90,102 × 132\n   folioviv  foliohog ubica_geo tam_loc est_socio est_dis upm   factor clase_hog\n   &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;  &lt;dbl&gt;     &lt;dbl&gt;\n 1 01000050… 1        01001     1       4         003     0000…    206         3\n 2 01000050… 1        01001     1       4         003     0000…    206         2\n 3 01000050… 1        01001     1       4         003     0000…    206         2\n 4 01000120… 1        01001     1       3         002     0000…    167         3\n 5 01000120… 2        01001     1       3         002     0000…    167         1\n 6 01000120… 1        01001     1       3         002     0000…    167         2\n 7 01000120… 1        01001     1       3         002     0000…    167         2\n 8 01000193… 1        01001     1       4         003     0000…    212         1\n 9 01000193… 1        01001     1       4         003     0000…    212         2\n10 01000193… 1        01001     1       4         003     0000…    212         2\n# ℹ 90,092 more rows\n# ℹ 123 more variables: sexo_jefe &lt;dbl&gt;, edad_jefe &lt;dbl&gt;, educa_jefe &lt;chr&gt;,\n#   tot_integ &lt;dbl&gt;, hombres &lt;dbl&gt;, mujeres &lt;dbl&gt;, mayores &lt;dbl&gt;,\n#   menores &lt;dbl&gt;, p12_64 &lt;dbl&gt;, p65mas &lt;dbl&gt;, ocupados &lt;dbl&gt;,\n#   percep_ing &lt;dbl&gt;, perc_ocupa &lt;dbl&gt;, ing_cor &lt;dbl&gt;, ingtrab &lt;dbl&gt;,\n#   trabajo &lt;dbl&gt;, sueldos &lt;dbl&gt;, horas_extr &lt;dbl&gt;, comisiones &lt;dbl&gt;,\n#   aguinaldo &lt;dbl&gt;, indemtrab &lt;dbl&gt;, otra_rem &lt;dbl&gt;, remu_espec &lt;dbl&gt;, …"
  },
  {
    "objectID": "P5.html#at-muchas-operaciones-de-dplyr",
    "href": "P5.html#at-muchas-operaciones-de-dplyr",
    "title": "5  Ponderación y otros",
    "section": "5.8 _at muchas operaciones de {dplyr}",
    "text": "5.8 _at muchas operaciones de {dplyr}\nEste es un sufijo que funciona en algunos verbos de {dplyr} y permite hacer una operación en varias variables al mismo tiempo, funciona con vars()\n\n5.8.1 dplyr::mutate_at()\n\nconcentradohogar %&gt;% \n  dplyr::mutate_at(vars(clase_hog, sexo_jefe), ~ as_label(.x)) %&gt;% # ojo con la coma y con el punto\n  tabyl(clase_hog, sexo_jefe)\n\n    clase_hog Hombre Mujer\n  unipersonal   6519  5367\n      nuclear  41919 13621\n     ampliado  12898  8888\n    compuesto    372   211\n corresidente    197   110\n\n\n\n\n5.8.2 dplyr::rename_at()\nPrimero revisemos la opción paste y paste0\n\npaste(\"a\",\"b\", sep=\"_\")\n\n[1] \"a_b\"\n\npaste(\"a\",\"b\")\n\n[1] \"a b\"\n\npaste0(\"a\",\"b\")\n\n[1] \"ab\"\n\n\n\nconcentradohogar %&gt;% \n  dplyr::rename_at(vars(clase_hog, sexo_jefe), ~ paste0(.x, \"_\")) %&gt;% # sufijo\n  select(clase_hog_, sexo_jefe_)\n\n# A tibble: 90,102 × 2\n   clase_hog_ sexo_jefe_\n        &lt;dbl&gt;      &lt;dbl&gt;\n 1          3          2\n 2          2          1\n 3          2          1\n 4          3          1\n 5          1          1\n 6          2          1\n 7          2          2\n 8          1          2\n 9          2          2\n10          2          1\n# ℹ 90,092 more rows\n\n\n\nconcentradohogar %&gt;% \n  dplyr::rename_at(vars(clase_hog, sexo_jefe), ~ paste0(\"desc_\", .x)) %&gt;% # prefijo\n  select(starts_with(\"desc\"))\n\n# A tibble: 90,102 × 2\n   desc_clase_hog desc_sexo_jefe\n            &lt;dbl&gt;          &lt;dbl&gt;\n 1              3              2\n 2              2              1\n 3              2              1\n 4              3              1\n 5              1              1\n 6              2              1\n 7              2              2\n 8              1              2\n 9              2              2\n10              2              1\n# ℹ 90,092 more rows"
  },
  {
    "objectID": "P5.html#descriptivos-para-variables-cuantitativas",
    "href": "P5.html#descriptivos-para-variables-cuantitativas",
    "title": "5  Ponderación y otros",
    "section": "5.9 Descriptivos para variables cuantitativas",
    "text": "5.9 Descriptivos para variables cuantitativas\nVamos a empezar a revisar los gráficos para variables cuantitativas.\n\nconcentradohogar %&gt;% \n  dplyr::summarise_at(vars(contains(\"ing\")), ~ mean(.x)) # las funciones también pueden tener atributos\n\n# A tibble: 1 × 4\n  percep_ing ing_cor ingtrab otros_ing\n       &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;\n1       2.26  61490.  40360.      50.9"
  },
  {
    "objectID": "P6.html#paquetes",
    "href": "P6.html#paquetes",
    "title": "6  Análisis descriptivo II",
    "section": "6.1 Paquetes",
    "text": "6.1 Paquetes\nVamos a llamar algunas paquetes que nos ayudarán en esta práctica\n\nif (!require(\"pacman\")) install.packages(\"pacman\") # instala pacman si se requiere\n\nCargando paquete requerido: pacman\n\npacman::p_load(tidyverse,\n               writexl, \n               haven,\n               sjlabelled, \n               janitor,\n               magrittr,\n               GGally,\n               wesanderson,\n               RColorBrewer,\n               viridis,\n               ggthemes,\n               esquisse\n)"
  },
  {
    "objectID": "P6.html#datos",
    "href": "P6.html#datos",
    "title": "6  Análisis descriptivo II",
    "section": "6.2 Datos",
    "text": "6.2 Datos\nE importamos la base e incluimos los cambios anteriores\n\netiqueta_sex&lt;-c(\"Hombre\", \"Mujer\")\n\nconcentradohogar &lt;- haven::read_dta(\"datos/concentradohogar.dta\")  %&gt;% \n  mutate(sexo_jefe=as.numeric(sexo_jefe)) %&gt;% # para quitar el \"string\"\n  sjlabelled::set_labels(sexo_jefe, labels=etiqueta_sex) %&gt;% \n  mutate(clase_hog=as.numeric(clase_hog)) %&gt;% # para quitar el \"string\"\n  sjlabelled::set_labels(clase_hog, labels=c(\"unipersonal\",\n                                             \"nuclear\", \n                                             \"ampliado\",\n                                             \"compuesto\",\n                                             \"corresidente\")) %&gt;% \n  mutate(educa_jefe=as.numeric(educa_jefe)) %&gt;% \n  set_labels(educa_jefe,\n             labels=c(\"Sin instrucción\", \n                      \"Preescolar\",\n                      \"Primaria incompleta\",\n                      \"Primaria completa\",\n                      \"Secundaria incompleta\",\n                      \"Secundaria completa\",\n                      \"Preparatoria incompleta\",\n                      \"Preparatoria completa\",\n                      \"Profesional incompleta\",\n                      \"Profesional completa\",\n                      \"Posgrado\")) %&gt;% \n  mutate(educa_jefe=as.numeric(educa_jefe)) %&gt;% \n  set_labels(educa_jefe,\n             labels=c(\"Sin instrucción\", \n                      \"Preescolar\",\n                      \"Primaria incompleta\",\n                      \"Primaria completa\",\n                      \"Secundaria incompleta\",\n                      \"Secundaria completa\",\n                      \"Preparatoria incompleta\",\n                      \"Preparatoria completa\",\n                      \"Profesional incompleta\",\n                      \"Profesional completa\",\n                      \"Posgrado\")) %&gt;% \n    mutate(ent=stringr::str_sub(ubica_geo, \n                                start = 1,\n                                end = 2 ))"
  },
  {
    "objectID": "P6.html#descriptivos-para-variables-cuantitativas",
    "href": "P6.html#descriptivos-para-variables-cuantitativas",
    "title": "6  Análisis descriptivo II",
    "section": "6.3 Descriptivos para variables cuantitativas",
    "text": "6.3 Descriptivos para variables cuantitativas\nVamos a empezar a revisar los gráficos para variables cuantitativas.\n\n6.3.1 Medidas numéricas básicas\n5 números\n\nsummary(concentradohogar$ing_cor) ## ingresos\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n      0   28386   46074   61490   74344 7153770 \n\n\nCon pipes se pueden crear “indicadores” de nuestras variables es un tibble, tal como lo hicimos con el diseño complejo\n\nconcentradohogar %&gt;% \n  dplyr::summarise(nombre_indicador=mean(ing_cor, na.rm=T)) # las funciones también pueden tener atributos\n\n# A tibble: 1 × 1\n  nombre_indicador\n             &lt;dbl&gt;\n1           61490.\n\n\nFunciona con group_by() y con .by()\n\nconcentradohogar %&gt;% \n  dplyr::summarise(nombre_indicador=mean(ing_cor, na.rm=T), .by=ent) # las funciones también pueden tener atributos\n\n# A tibble: 32 × 2\n   ent   nombre_indicador\n   &lt;chr&gt;            &lt;dbl&gt;\n 1 01              73162.\n 2 02              80341.\n 3 03              87777.\n 4 04              57921.\n 5 05              69761.\n 6 06              63841.\n 7 07              40765.\n 8 08              73981.\n 9 09              77909.\n10 10              53608.\n# ℹ 22 more rows\n\n\n\nconcentradohogar %&gt;% \n  dplyr::summarise_at(vars(contains(\"ing\")), ~ mean(.x)) # las funciones también pueden tener atributos\n\n# A tibble: 1 × 4\n  percep_ing ing_cor ingtrab otros_ing\n       &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;\n1       2.26  61490.  40360.      50.9\n\n\n\n\n6.3.2 Gráficas básicas\n\nhist(concentradohogar$ing_cor)\n\n\n\nboxplot(concentradohogar$ing_cor)\n\n\n\n\nLe podemos modificar el título del eje de las x y de las y\n\nhist(concentradohogar$ing_cor, \n     main=\"Histograma de los ingresos corrientes\", \n     xlab=\"pesos mexicanos\", ylab=\"Frecuencia\") \n\n\n\n\n¡A ponerle colorcitos! Aquí hay una lista https://r-charts.com/es/colores/\n\nhist(concentradohogar$ing_cor, \n     main=\"Histograma de los ingresos corrientes\", \n     xlab=\"pesos mexicanos\", ylab=\"Frecuencia\",\n     col=\"deeppink1\") \n\n\n\n\nCon pipes:\n\nconcentradohogar %&gt;% \n    with(hist(ing_cor)) # con with, para que entienda\n\n\n\n\nCuando usamos pipes, se debe de recordar que no es necesario escribir el nombre del data.frame en el filtro porque es lo primero que colocamos en nuestro “pipe”.\nCheca que cualquier aditamiento debe ir en el pipe donde está el comando de hist(). Ten cuidado con los paréntesis.\n\nconcentradohogar %&gt;% \n  filter(!is.na(ing_cor)) %&gt;% # la ventaja de esta forma es que podemos hacer más operaciones\n    with(hist(ing_cor, main= \"histograma\"))"
  },
  {
    "objectID": "P6.html#intro-a-la-correlación",
    "href": "P6.html#intro-a-la-correlación",
    "title": "6  Análisis descriptivo II",
    "section": "6.4 Intro a la correlación",
    "text": "6.4 Intro a la correlación\n\nplot(concentradohogar$ing_cor, concentradohogar$gasto_mon)\n\n\n\n\n\ncor(concentradohogar$ing_cor, concentradohogar$gasto_mon)\n\n[1] 0.5339345"
  },
  {
    "objectID": "P6.html#cuál-es-el-mejor-gráfico",
    "href": "P6.html#cuál-es-el-mejor-gráfico",
    "title": "6  Análisis descriptivo II",
    "section": "6.5 ¿Cuál es el mejor gráfico?",
    "text": "6.5 ¿Cuál es el mejor gráfico?\nHay cursos específicos de visualización de datos. Es maravilloso pero también requiere que estudiemos bien qué tipo de datos tenemos y cuáles son nuestros objetivos.\nMe gusta mucho este recurso: https://www.data-to-viz.com/"
  },
  {
    "objectID": "P6.html#gráficos-de-graphics",
    "href": "P6.html#gráficos-de-graphics",
    "title": "6  Análisis descriptivo II",
    "section": "6.6 Gráficos de {graphics}",
    "text": "6.6 Gráficos de {graphics}\n“plot()” Es la función más simple. Y es otro comando “listo”\n\n  plot(as_label(concentradohogar$sexo_jefe))\n\n\n\n\nEsto es igual que:\n\nbarplot(table(as_label(concentradohogar$sexo_jefe)))"
  },
  {
    "objectID": "P6.html#gráficos-con-ggplot2",
    "href": "P6.html#gráficos-con-ggplot2",
    "title": "6  Análisis descriptivo II",
    "section": "6.7 Gráficos con {ggplot2}",
    "text": "6.7 Gráficos con {ggplot2}\nHoy vamos a presentar a un gran paquete ¡Es de los famosos! Y tiene más de diez años.\n\nhttps://qz.com/1007328/all-hail-ggplot2-the-code-powering-all-those-excellent-charts-is-10-years-old/\n\n“gg” proviene de “Grammar of Graphics”, funciona un poco como sintácticamente, de ahí su nombre.\nAlgunos recursos para aprender ggplot\n\nhttps://ggplot2-book.org/ hecha por el mero mero.\nhttp://sape.inf.usi.ch/quick-reference/ggplot2\nhttps://raw.githubusercontent.com/rstudio/cheatsheets/master/data-visualization-2.1.pdf\n\nVamos a revisar una presentación que es muy interesante\n\nhttps://evamaerey.github.io/ggplot2_grammar_guide/ggplot2_grammar_guide.html\nhttps://huygens.science.uva.nl/ggPlotteR/ Hace gráficos de ggplot con la base de datos de Gapminder"
  },
  {
    "objectID": "P6.html#un-lienzo-para-dibujar",
    "href": "P6.html#un-lienzo-para-dibujar",
    "title": "6  Análisis descriptivo II",
    "section": "6.8 Un lienzo para dibujar",
    "text": "6.8 Un lienzo para dibujar\nPara hacer un gráfico, {ggplot2} tiene el comando ggplot(). Hacer gráficos con esta función tiene una lógica aditiva. Lo ideal es que iniciemos estableciendo el mapeo estético de nuestro gráfico, con el comando aes()\n\nconcentradohogar %&gt;%\n  ggplot2::ggplot() + # ojo es un +\n  aes(x= as_label(sexo_jefe))\n\n\n\ng1&lt;-concentradohogar %&gt;%\n  ggplot2::ggplot() + # ojo es un +\n  aes(x= as_label(sexo_jefe))\n\ng1 ## imprime el lienzo"
  },
  {
    "objectID": "P6.html#gráficos-univariados",
    "href": "P6.html#gráficos-univariados",
    "title": "6  Análisis descriptivo II",
    "section": "6.9 Gráficos univariados",
    "text": "6.9 Gráficos univariados\n\n6.9.1 Para cualitativas\nSabemos que la mejor son las barras\n\ng1 +\n  geom_bar()\n\n\n\n\n\ng1 +  geom_bar(aes(\n  fill = as_label(sexo_jefe)\n  )) ## colorea la geometría\n\n\n\n## Esto es equivalente\n\nconcentradohogar %&gt;%\n  ggplot(aes(as_label(sexo_jefe),\n             fill = as_label(sexo_jefe)\n             )\n         ) + geom_bar()\n\n\n\n\n\n\n6.9.2 Para variables cuantitativas\nPodemos hacer histogramas y gráficos de densidad, de manera fácil. La idea es agregar en nuestro “lienzo” una geometría, un valor para dibujar en él. Esto se agrega con un “+” y con la figura que se añadirá a nuestro gráfico.\n\ng2&lt;-concentradohogar %&gt;%\n  ggplot(aes(ing_cor))\n\ng2 ## imprime el lienzo\n\n\n\n\n\n6.9.2.1 Histograma\n\ng2 + geom_histogram() \n\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n\n\n\n\n\n\n\n6.9.2.2 Densidad\n\ng2 + geom_density()"
  },
  {
    "objectID": "P6.html#gráficos-bivariados",
    "href": "P6.html#gráficos-bivariados",
    "title": "6  Análisis descriptivo II",
    "section": "6.10 Gráficos bivariados",
    "text": "6.10 Gráficos bivariados\n\n6.10.1 Cuali-cuali\n\ng1 +  geom_bar(aes(fill = as_label(clase_hog)),\n              position=\"dodge\") #pone las categorías lado a lado y no apiladas\n\n\n\n\nOtra manera interesante de observar estas variables, es que estando apiladas, cada categoría de escolaridad se entendiera como una unidad:\n\ng_bivariado &lt;- g1 +  \n  geom_bar(aes(fill = as_label(clase_hog)),\n              position=\"fill\") ## cada categoría \"llena\" a una unidad\n\ng_bivariado"
  },
  {
    "objectID": "P6.html#escalas-de-color",
    "href": "P6.html#escalas-de-color",
    "title": "6  Análisis descriptivo II",
    "section": "6.11 Escalas de color",
    "text": "6.11 Escalas de color\n\n6.11.1 {RcolorBrewer}\n\nRColorBrewer::display.brewer.all()\n\n\n\n\n\ng_bivariado + scale_fill_brewer(palette = \"Dark2\")\n\n\n\n\n\n\n6.11.2 {viridis}\n\ng_bivariado + scale_fill_viridis_d()\n\n\n\n\n\n\n6.11.3 {wesanderson}\n\nwesanderson::wes_palettes\n\n$BottleRocket1\n[1] \"#A42820\" \"#5F5647\" \"#9B110E\" \"#3F5151\" \"#4E2A1E\" \"#550307\" \"#0C1707\"\n\n$BottleRocket2\n[1] \"#FAD510\" \"#CB2314\" \"#273046\" \"#354823\" \"#1E1E1E\"\n\n$Rushmore1\n[1] \"#E1BD6D\" \"#EABE94\" \"#0B775E\" \"#35274A\" \"#F2300F\"\n\n$Rushmore\n[1] \"#E1BD6D\" \"#EABE94\" \"#0B775E\" \"#35274A\" \"#F2300F\"\n\n$Royal1\n[1] \"#899DA4\" \"#C93312\" \"#FAEFD1\" \"#DC863B\"\n\n$Royal2\n[1] \"#9A8822\" \"#F5CDB4\" \"#F8AFA8\" \"#FDDDA0\" \"#74A089\"\n\n$Zissou1\n[1] \"#3B9AB2\" \"#78B7C5\" \"#EBCC2A\" \"#E1AF00\" \"#F21A00\"\n\n$Zissou1Continuous\n [1] \"#3A9AB2\" \"#6FB2C1\" \"#91BAB6\" \"#A5C2A3\" \"#BDC881\" \"#DCCB4E\" \"#E3B710\"\n [8] \"#E79805\" \"#EC7A05\" \"#EF5703\" \"#F11B00\"\n\n$Darjeeling1\n[1] \"#FF0000\" \"#00A08A\" \"#F2AD00\" \"#F98400\" \"#5BBCD6\"\n\n$Darjeeling2\n[1] \"#ECCBAE\" \"#046C9A\" \"#D69C4E\" \"#ABDDDE\" \"#000000\"\n\n$Chevalier1\n[1] \"#446455\" \"#FDD262\" \"#D3DDDC\" \"#C7B19C\"\n\n$FantasticFox1\n[1] \"#DD8D29\" \"#E2D200\" \"#46ACC8\" \"#E58601\" \"#B40F20\"\n\n$Moonrise1\n[1] \"#F3DF6C\" \"#CEAB07\" \"#D5D5D3\" \"#24281A\"\n\n$Moonrise2\n[1] \"#798E87\" \"#C27D38\" \"#CCC591\" \"#29211F\"\n\n$Moonrise3\n[1] \"#85D4E3\" \"#F4B5BD\" \"#9C964A\" \"#CDC08C\" \"#FAD77B\"\n\n$Cavalcanti1\n[1] \"#D8B70A\" \"#02401B\" \"#A2A475\" \"#81A88D\" \"#972D15\"\n\n$GrandBudapest1\n[1] \"#F1BB7B\" \"#FD6467\" \"#5B1A18\" \"#D67236\"\n\n$GrandBudapest2\n[1] \"#E6A0C4\" \"#C6CDF7\" \"#D8A499\" \"#7294D4\"\n\n$IsleofDogs1\n[1] \"#9986A5\" \"#79402E\" \"#CCBA72\" \"#0F0D0E\" \"#D9D0D3\" \"#8D8680\"\n\n$IsleofDogs2\n[1] \"#EAD3BF\" \"#AA9486\" \"#B6854D\" \"#39312F\" \"#1C1718\"\n\n$FrenchDispatch\n[1] \"#90D4CC\" \"#BD3027\" \"#B0AFA2\" \"#7FC0C6\" \"#9D9C85\"\n\n$AsteroidCity1\n[1] \"#0A9F9D\" \"#CEB175\" \"#E54E21\" \"#6C8645\" \"#C18748\"\n\n$AsteroidCity2\n[1] \"#C52E19\" \"#AC9765\" \"#54D8B1\" \"#b67c3b\" \"#175149\" \"#AF4E24\"\n\n$AsteroidCity3\n[1] \"#FBA72A\" \"#D3D4D8\" \"#CB7A5C\" \"#5785C1\"\n\n\n\nwesanderson::wes_palette(\"IsleofDogs1\", n=5)\n\n\n\nmi_paleta &lt;- wesanderson::wes_palette(\"IsleofDogs1\", n=5)\n\n\ng_bivariado + scale_fill_manual(values=mi_paleta)"
  },
  {
    "objectID": "P6.html#temas",
    "href": "P6.html#temas",
    "title": "6  Análisis descriptivo II",
    "section": "6.12 Temas",
    "text": "6.12 Temas\nCambiamos el tema:\n\ng_bivariado + scale_fill_brewer(palette = \"Dark2\") + theme_minimal()\n\n\n\n\nSi queremos que sean horizontales (como debe ser)\n\ng_bivariado + \n  scale_fill_brewer(palette = \"Dark2\") +\n  theme_minimal() +\n  coord_flip()"
  },
  {
    "objectID": "P6.html#un-atajo-esquisse",
    "href": "P6.html#un-atajo-esquisse",
    "title": "6  Análisis descriptivo II",
    "section": "6.13 Un atajo {esquisse}",
    "text": "6.13 Un atajo {esquisse}\nSi la lógica de las capas y lienzos parece un poco complicada para graficar con {ggplot2}, el paquete “esquisse” tiene un complemento. Cuando lo instalamos con pacman más arriba, se puede observar el complemento:\nHoy desde el complemento podemos acceder a el siguiente menú y seleccionar nuestra base.\n\n\n\nEn tu barra de íconos de Rstudio\n\n\nUna vez seleccionada, puedes hacer “drag and drop” de las variables y elegir el tipo de gráfico, incluso puedes hacer filtro con las variables disponibles\nPuedes exportar esto a una imagen, a Powerpoint o como código a ejecutar en RStudio. Esta herramienta es muy útil para irnos acostumbrando al código de ggplot que puede ser bastante complicado en los primeros acercamientos"
  },
  {
    "objectID": "P6.html#ejercicio",
    "href": "P6.html#ejercicio",
    "title": "6  Análisis descriptivo II",
    "section": "6.14 Ejercicio",
    "text": "6.14 Ejercicio\nRealiza dos gráficos.\n\nUno de una sola variable\nOtro con dos variables, el que sea de tu agrado, con las variables que te sientes cómoda o cómodo, en la base de datos de tu elección\nPuedes modificarlo usando el paquete {esquisse}.\n\nEnvía las imágenes\nEnvía el script"
  },
  {
    "objectID": "P7.html#paquetes",
    "href": "P7.html#paquetes",
    "title": "7  Cont bivariado e intro a inferencia estadística",
    "section": "7.1 Paquetes",
    "text": "7.1 Paquetes\n\nif (!require(\"pacman\")) install.packages(\"pacman\") ## instala pacman si se requiere\n\nCargando paquete requerido: pacman\n\npacman::p_load(tidyverse,\n               writexl, \n               haven,\n               sjlabelled, \n               janitor,\n               magrittr,\n               viridis,\n               ggthemes,\n               ggpubr,\n               GGally,\n               DescTools, ## Paquete con pruebas estadísticas\n               infer, ## inferencia compatible con formato tidy\n               broom ## paquete para volver _tidy_ resultados\n)"
  },
  {
    "objectID": "P7.html#datos",
    "href": "P7.html#datos",
    "title": "7  Cont bivariado e intro a inferencia estadística",
    "section": "7.2 Datos",
    "text": "7.2 Datos\nE importamos la base e incluimos los cambios anteriores y una variable de remesas\n\netiqueta_sex&lt;-c(\"Hombre\", \"Mujer\")\n\nconcentradohogar &lt;- haven::read_dta(\"datos/concentradohogar.dta\")  %&gt;% \n  mutate(sexo_jefe=as.numeric(sexo_jefe)) %&gt;% ## para quitar el \"string\"\n  sjlabelled::set_labels(sexo_jefe, labels=etiqueta_sex) %&gt;% \n  mutate(clase_hog=as.numeric(clase_hog)) %&gt;% ## para quitar el \"string\"\n  sjlabelled::set_labels(clase_hog, labels=c(\"unipersonal\",\n                                             \"nuclear\", \n                                             \"ampliado\",\n                                             \"compuesto\",\n                                             \"corresidente\")) %&gt;% \n  mutate(educa_jefe=as.numeric(educa_jefe)) %&gt;% \n  set_labels(educa_jefe,\n             labels=c(\"Sin instrucción\", \n                      \"Preescolar\",\n                      \"Primaria incompleta\",\n                      \"Primaria completa\",\n                      \"Secundaria incompleta\",\n                      \"Secundaria completa\",\n                      \"Preparatoria incompleta\",\n                      \"Preparatoria completa\",\n                      \"Profesional incompleta\",\n                      \"Profesional completa\",\n                      \"Posgrado\")) %&gt;% \n    mutate(ent=stringr::str_sub(folioviv, start=1, end=2 )) %&gt;% \n    mutate(ing_per=ing_cor/tot_integ) %&gt;% \n    mutate(recibe_rem=remesas&gt;0)"
  },
  {
    "objectID": "P7.html#atajo-ggally",
    "href": "P7.html#atajo-ggally",
    "title": "7  Cont bivariado e intro a inferencia estadística",
    "section": "7.3 Atajo {GGally}",
    "text": "7.3 Atajo {GGally}\nDe acuerdo con sus creadores\n\n{ggplot2} es un sistema de trazado para R basado en la gramática de los gráficos. {GGally} extiende {ggplot2} agregando varias funciones para reducir la complejidad de combinar geoms con datos transformados. Algunas de estas funciones incluyen una matriz de gráficos por pares, una matriz de diagramas de dispersión, un gráfico de coordenadas paralelas, un gráfico de supervivencia y varias funciones para trazar redes.\n\nVamos a ver un par de ejemplos\n\nconcentradohogar %&gt;% \n  dplyr::select(ing_cor, gasto_mon, tot_integ) %&gt;% \n  GGally::ggpairs()\n\n\n\n\n\nconcentradohogar %&gt;% \n  dplyr::mutate_at(vars(sexo_jefe,educa_jefe), ~ as_label(.x)) %&gt;% \n  dplyr::select(ing_cor, tot_integ, sexo_jefe, educa_jefe) %&gt;% \n  GGally::ggpairs()\n\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n\n\n\n\n\n\nconcentradohogar %&gt;% \n  dplyr::mutate_at(vars(sexo_jefe,educa_jefe), ~ as_label(.x)) %&gt;% \n  dplyr::select(ing_cor, gasto_mon, tot_integ, sexo_jefe) %&gt;% \n  GGally::ggpairs(columns = 1:3, # las primeras tres van en la cuadrícula\n                  ggplot2::aes(color = sexo_jefe,\n                               fill = sexo_jefe, # aquí van colores\n                               alpha = I(0.4))) # aquí la transparencia"
  },
  {
    "objectID": "P7.html#hipótesis-e-intervalos-de-confianza",
    "href": "P7.html#hipótesis-e-intervalos-de-confianza",
    "title": "7  Cont bivariado e intro a inferencia estadística",
    "section": "7.4 Hipótesis e intervalos de confianza",
    "text": "7.4 Hipótesis e intervalos de confianza\n\n7.4.1 stats::t.test()\nEste comando nos sirve para calcular diferentes tipos de test, que tienen como base la distribución t\n\\[H_o: \\mu = \\mu_0  \\] \\[H_{a1}: \\mu ≠ \\mu_0  \\]\n\n\n\n\n\n\\[H_{a2}: \\mu &gt; \\mu_0  \\] \\[H_{a3}: \\mu &lt; \\mu_0  \\]\nUnivariado para estimación\n\nt.test(concentradohogar$ing_per)\n\n\n    One Sample t-test\n\ndata:  concentradohogar$ing_per\nt = 206.84, df = 90101, p-value &lt; 2.2e-16\nalternative hypothesis: true mean is not equal to 0\n95 percent confidence interval:\n 21591.31 22004.41\nsample estimates:\nmean of x \n 21797.86 \n\n\nUnivariado para hipótesis específica\n\nt.test(concentradohogar$ing_per, mu=4105.11*3)\n\n\n    One Sample t-test\n\ndata:  concentradohogar$ing_per\nt = 89.98, df = 90101, p-value &lt; 2.2e-16\nalternative hypothesis: true mean is not equal to 12315.33\n95 percent confidence interval:\n 21591.31 22004.41\nsample estimates:\nmean of x \n 21797.86 \n\nt.test(concentradohogar$ing_per, mu=4105.11*3, alternative = \"two.sided\") #default y de dos colas\n\n\n    One Sample t-test\n\ndata:  concentradohogar$ing_per\nt = 89.98, df = 90101, p-value &lt; 2.2e-16\nalternative hypothesis: true mean is not equal to 12315.33\n95 percent confidence interval:\n 21591.31 22004.41\nsample estimates:\nmean of x \n 21797.86 \n\nt.test(concentradohogar$ing_per, mu=4105.11*3, alternative = \"less\") ## cola izquierda\n\n\n    One Sample t-test\n\ndata:  concentradohogar$ing_per\nt = 89.98, df = 90101, p-value = 1\nalternative hypothesis: true mean is less than 12315.33\n95 percent confidence interval:\n     -Inf 21971.21\nsample estimates:\nmean of x \n 21797.86 \n\nt.test(concentradohogar$ing_per, mu=4105.11*3, alternative = \"greater\") #cola derecha \n\n\n    One Sample t-test\n\ndata:  concentradohogar$ing_per\nt = 89.98, df = 90101, p-value &lt; 2.2e-16\nalternative hypothesis: true mean is greater than 12315.33\n95 percent confidence interval:\n 21624.52      Inf\nsample estimates:\nmean of x \n 21797.86 \n\n\n\n\n7.4.2 Enchulando un poquito\nLos resultados tienen la info, pero la podemos almacenar en un objeto. Con los cálculos de modelos es muy útil guardarlos para compararlos.\n\nt.test0&lt;-t.test(concentradohogar$ing_per, mu=4105.11*3, alternative = \"less\")\n\nVeamos si lo imprimimos\n\nt.test0\n\n\n    One Sample t-test\n\ndata:  concentradohogar$ing_per\nt = 89.98, df = 90101, p-value = 1\nalternative hypothesis: true mean is less than 12315.33\n95 percent confidence interval:\n     -Inf 21971.21\nsample estimates:\nmean of x \n 21797.86 \n\n\n\nbroom::tidy(t.test0)\n\n# A tibble: 1 × 8\n  estimate statistic p.value parameter conf.low conf.high method     alternative\n     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      \n1   21798.      90.0       1     90101     -Inf    21971. One Sampl… less       \n\n\nLa función broom::tidy() hace que el resultado se vuelva un “tibble”, una tabla muy compatible con el tidyverse. Esto puede ser útil cuando queremos ir comparando estimaciones o exportarlas a Excel.\nAnteriormente vimos con {stats} cómo hacer inferencia. El paquete {infer} tiene también elementos para inferencia, pero en formato más compatible con tidyverse.\n\nconcentradohogar %&gt;% \n  filter(tam_loc==1) %&gt;% # para quedarnos solo con lo urbano\n  infer::t_test( response = ing_per, mu = 4105.11*3)\n\n# A tibble: 1 × 7\n  statistic  t_df p_value alternative estimate lower_ci upper_ci\n      &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;\n1      84.2 33030       0 two.sided     28513.   28136.   28890.\n\n\nComo vemos nos da el mismo resultado anterior, pero nos da directamente el resultado en formato tidy.\n\n\n7.4.3 Proporciones\nPara una proporción en realidad el comando de base es muy sencillo, puesto que necesita\n\ntable(concentradohogar$sexo_jefe)\n\n\n    1     2 \n61905 28197 \n\nprop.test(table(concentradohogar$sexo_jefe))\n\n\n    1-sample proportions test with continuity correction\n\ndata:  table(concentradohogar$sexo_jefe), null probability 0.5\nX-squared = 12610, df = 1, p-value &lt; 2.2e-16\nalternative hypothesis: true p is not equal to 0.5\n95 percent confidence interval:\n 0.6840135 0.6900799\nsample estimates:\n        p \n0.6870547 \n\n\nOjo, R no utiliza el estadístico Z para las proporciones. ¿Qué usará?"
  },
  {
    "objectID": "P7.html#estimaciones-bivariadas",
    "href": "P7.html#estimaciones-bivariadas",
    "title": "7  Cont bivariado e intro a inferencia estadística",
    "section": "7.5 Estimaciones bivariadas",
    "text": "7.5 Estimaciones bivariadas\n\n7.5.1 Diferencias de medias por grupos\n¿Podemos decir, con significancia estadística que los valores medios de una variable son diferentes entre los grupos?\n\nconcentradohogar %&gt;% \n  summarise(avg_hrs = mean(ing_per, na.rm=T), .by = sexo_jefe)\n\n# A tibble: 2 × 2\n  sexo_jefe avg_hrs\n      &lt;dbl&gt;   &lt;dbl&gt;\n1         2  21865.\n2         1  21767.\n\nconcentradohogar %&gt;% \n  with(t.test(ing_per~sexo_jefe))\n\n\n    Welch Two Sample t-test\n\ndata:  ing_per by sexo_jefe\nt = -0.49258, df = 75565, p-value = 0.6223\nalternative hypothesis: true difference in means between group 1 and group 2 is not equal to 0\n95 percent confidence interval:\n -489.4237  292.8300\nsample estimates:\nmean in group 1 mean in group 2 \n        21767.1         21865.4 \n\n\nCon {infer} sería:\n\nconcentradohogar %&gt;% \n  mutate(sexo_jefe=as_label(sexo_jefe)) %&gt;% \n  infer::t_test(ing_per ~ sexo_jefe, \n                order = c(\"Hombre\", \"Mujer\") )\n\n# A tibble: 1 × 7\n  statistic   t_df p_value alternative estimate lower_ci upper_ci\n      &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;\n1    -0.493 75565.   0.622 two.sided      -98.3    -489.     293.\n\n\n\n\n7.5.2 Prueba Wilcoxon Rank\n\nconcentradohogar %&gt;% \n  with(\n  stats::wilcox.test(ing_per ~ sexo_jefe)\n  )\n\n\n    Wilcoxon rank sum test with continuity correction\n\ndata:  ing_per by sexo_jefe\nW = 821831224, p-value &lt; 2.2e-16\nalternative hypothesis: true location shift is not equal to 0"
  },
  {
    "objectID": "P7.html#estimación-de-varianzas-y-sus-pruebas-de-hipótesis",
    "href": "P7.html#estimación-de-varianzas-y-sus-pruebas-de-hipótesis",
    "title": "7  Cont bivariado e intro a inferencia estadística",
    "section": "7.6 Estimación de varianzas y sus pruebas de hipótesis",
    "text": "7.6 Estimación de varianzas y sus pruebas de hipótesis\nPara poder hacer inferencia sobre la varianza utilizamos el comando VarTest() del paquete {DescTools}\n[Por alguna razón no funciona]\n\nconcentradohogar %&gt;% \n  with(\n    DescTools::VarTest(ing_cor)\n  )\n\nPodemos también decir algo sobre el valor objetivo de nuestra hipótesis\n\nconcentradohogar %&gt;% \n      with(\n        DescTools::VarTest(ing_per, \n                sigma.squared = 10000)\n        )\n\nGuardar como objeto nuestros resultados, siempres muy conveniente para pedir después o para realizar operaciones con ellos\n\ntest2&lt;-concentradohogar %&gt;% \n    filter(recibe_rem==1) %&gt;% \n      with(VarTest(ing_per))\ntest2$conf.int\nsqrt(test2$conf.int) ### sacamos la raíz cuadrada para tener las\n#desviaciones estándar y sea más fácil de interpretar\n\nCon tidy de “broom”\n\ntidy(test2)"
  },
  {
    "objectID": "P7.html#estimación-de-diferencias-de-varianzas-y-sus-pruebas-de-hipótesis",
    "href": "P7.html#estimación-de-diferencias-de-varianzas-y-sus-pruebas-de-hipótesis",
    "title": "7  Cont bivariado e intro a inferencia estadística",
    "section": "7.7 Estimación de diferencias de varianzas y sus pruebas de hipótesis",
    "text": "7.7 Estimación de diferencias de varianzas y sus pruebas de hipótesis\nPara comparar varianza, usamos su “ratio”, esto nos da un estadístico de prueba F, para comparar dos muestras de poblaciones normales.\nSi lo que queremos es comparar la varianza entre dos grupos, usamos el signo ~\n\nconcentradohogar %&gt;% \n      with(var.test(ing_per ~ as_label(sexo_jefe), \n                    ratio=1))\n\n\n    F test to compare two variances\n\ndata:  ing_per by as_label(sexo_jefe)\nF = 2.0568, num df = 61904, denom df = 28196, p-value &lt; 2.2e-16\nalternative hypothesis: true ratio of variances is not equal to 1\n95 percent confidence interval:\n 2.016164 2.098089\nsample estimates:\nratio of variances \n          2.056796"
  },
  {
    "objectID": "P7.html#prueba-chi-cuadrado-chi-sq.-una-aplicación-más-común",
    "href": "P7.html#prueba-chi-cuadrado-chi-sq.-una-aplicación-más-común",
    "title": "7  Cont bivariado e intro a inferencia estadística",
    "section": "7.8 Prueba chi-cuadrado chi-sq. Una aplicación más común",
    "text": "7.8 Prueba chi-cuadrado chi-sq. Una aplicación más común\nCuando tenemos dos variables cualitativas o nominales podemos hacer esta la prueba chi-cuadrado, o prueba de independencia. Esta tiene una lógica un poco diferente a las pruebas que hacemos, porque proviene de comparar la distribución de los datos dado que no hay independencia entre las variables y los datos que tenemos.\nLa hipótesis nula postula una distribución de probabilidad totalmente especificada como el modelo matemático de la población que ha generado la muestra, por lo que si la rechazamos hemos encontrado evidencia estadística sobre la dependencia de las dos variables.\n\ntable(concentradohogar$recibe_rem, concentradohogar$sexo_jefe)\n\n       \n            1     2\n  FALSE 59284 25610\n  TRUE   2621  2587\n\nchisq.test(concentradohogar$recibe_rem, concentradohogar$sexo_jefe)\n\n\n    Pearson's Chi-squared test with Yates' continuity correction\n\ndata:  concentradohogar$recibe_rem and concentradohogar$sexo_jefe\nX-squared = 867.48, df = 1, p-value &lt; 2.2e-16\n\n\nCon {janitor}\n\nconcentradohogar %&gt;% \n  mutate_at(vars(recibe_rem, sexo_jefe), ~ as_label(.x)) %&gt;% \n  janitor::tabyl(recibe_rem, sexo_jefe) %&gt;% \n  janitor::chisq.test() #ojo\n\n\n    Pearson's Chi-squared test with Yates' continuity correction\n\ndata:  .\nX-squared = 867.48, df = 1, p-value &lt; 2.2e-16"
  },
  {
    "objectID": "P7.html#análisis-de-varianza",
    "href": "P7.html#análisis-de-varianza",
    "title": "7  Cont bivariado e intro a inferencia estadística",
    "section": "7.9 Análisis de varianza",
    "text": "7.9 Análisis de varianza\nAnálisis de varianza. Haremos la versión más simple. Para ver el efecto de un factor sobre una variable cualitativa (oneway).\nRevisaremos si la región de residencia de los hogares tiene un efecto en la distribución de los ingresos por.\n\n7.9.1 Primero un gráfico\nla ANOVA se basa en que nuestra variable es normal. Quitaremos los outliers\n\nconcentradohogar %&gt;% \n  ggplot() +\n  aes(x=log(ing_per), fill=as_factor(tam_loc), \n      color=as_factor(tam_loc),\n      alpha=I(0.5)) +\n  geom_density()\n\nWarning: Removed 9 rows containing non-finite outside the scale range\n(`stat_density()`).\n\n\n\n\n\nLa prueba ANOVA o análisis de varianza, nos dice cuánto de nuestra variable se ve explicado por un factor.\nEn los modelos es mul útil guardar nuestros resultados como un objeto\n\nanova&lt;-concentradohogar %&gt;% \n  with(aov(ing_per ~ as_factor(tam_loc)))\n\nsummary(anova)\n\n                      Df    Sum Sq   Mean Sq F value Pr(&gt;F)    \nas_factor(tam_loc)     3 2.667e+12 8.889e+11   915.4 &lt;2e-16 ***\nResiduals          90098 8.749e+13 9.711e+08                   \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n\nCon {broom}\n\nbroom::tidy(anova)\n\n# A tibble: 2 × 6\n  term                  df   sumsq        meansq statistic p.value\n  &lt;chr&gt;              &lt;dbl&gt;   &lt;dbl&gt;         &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;\n1 as_factor(tam_loc)     3 2.67e12 888913110401.      915.       0\n2 Residuals          90098 8.75e13    971103583.       NA       NA\n\n\n\n7.9.1.1 Comparación entre grupos\n¿si es significativo cuáles diferencias entre los grupos lo son?\n\nTukeyHSD(anova)\n\n  Tukey multiple comparisons of means\n    95% family-wise confidence level\n\nFit: aov(formula = ing_per ~ as_factor(tam_loc))\n\n$`as_factor(tam_loc)`\n          diff        lwr        upr p adj\n2-1  -6251.184  -7117.966  -5384.403     0\n3-1 -10042.730 -10908.480  -9176.979     0\n4-1 -12261.867 -12880.224 -11643.510     0\n3-2  -3791.545  -4846.420  -2736.670     0\n4-2  -6010.683  -6874.166  -5147.200     0\n4-3  -2219.138  -3081.585  -1356.690     0\n\n\n\n\n\n7.9.2 Supuestos de ANOVA\n\nLas observaciones se obtienen de forma independiente y aleatoria de la población definida por los niveles del factor\nLos datos de cada nivel de factor se distribuyen normalmente.\nEstas poblaciones normales tienen una varianza común.\n\n\n#Prueba Bartlett para ver si las varianzas son iguales\n\nconcentradohogar %&gt;% \n  with(\n    bartlett.test(ing_per ~ as_factor(tam_loc))\n    )\n\n\n    Bartlett test of homogeneity of variances\n\ndata:  ing_per by as_factor(tam_loc)\nBartlett's K-squared = 2897.1, df = 3, p-value &lt; 2.2e-16\n\n\nLa prueba tiene una Ho “Las varianzas son iguales”\n\n#Test Normalidad \nconcentradohogar %&gt;% \n  #filter(tam_loc==1) %&gt;% \n  with(\n    ks.test(x=ing_per, \n            y=pnorm)\n    )\n\nWarning in ks.test.default(x = ing_per, y = pnorm): ties should not be present\nfor the one-sample Kolmogorov-Smirnov test\n\n\n\n    Asymptotic one-sample Kolmogorov-Smirnov test\n\ndata:  ing_per\nD = 0.9999, p-value &lt; 2.2e-16\nalternative hypothesis: two-sided\n\n\nLa prueba tiene una Ho “La variable es normal”\n¿Qué hacer?\n\n\n7.9.3 Prueba no paramétrica Kruskal-Wallis\nHay una prueba muy parecida que se basa en el orden de las observaciones, y se lee muy parecida a la ANOVA\n\nkruskal&lt;-concentradohogar %&gt;% \n  with(kruskal.test(ing_per ~ as_factor(tam_loc)))\n\nkruskal\n\n\n    Kruskal-Wallis rank sum test\n\ndata:  ing_per by as_factor(tam_loc)\nKruskal-Wallis chi-squared = 10487, df = 3, p-value &lt; 2.2e-16\n\n\nPara ver las comparaciones tenemos que usar el DunnTest(), del paquete {DescTools}\n\nconcentradohogar %&gt;% \n  with(DescTools::DunnTest(ing_per ~ as_factor(tam_loc)))\n\n\n Dunn's test of multiple comparisons using rank sums : holm  \n\n    mean.rank.diff   pval    \n2-1      -8625.345 &lt;2e-16 ***\n3-1     -15205.335 &lt;2e-16 ***\n4-1     -20134.716 &lt;2e-16 ***\n3-2      -6579.990 &lt;2e-16 ***\n4-2     -11509.371 &lt;2e-16 ***\n4-3      -4929.381 &lt;2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n\n\n7.9.3.1 Un gráfiquito accesorio:\n\nconcentradohogar %&gt;% \nmutate(ing_per = ing_per/1000) %&gt;% \nggpubr::ggviolin(x = \"tam_loc\", y = \"ing_per\", fill = \"tam_loc\",\n         add = \"boxplot\", add.params = list(fill = \"white\"))+\n         stat_compare_means(label.y = 3500)  # Add the p-value \n\n\n\n\n\ncomparaciones &lt;- list( c(\"1\", \"2\"), \n                       c(\"1\", \"3\"),\n                       c(\"1\", \"4\"),\n                       c(\"2\", \"3\"), \n                       c(\"2\", \"4\"))\n\nUn gráfiquito accesorio 2:\n\nconcentradohogar %&gt;% \nmutate(ing_per = ing_per/1000) %&gt;% \nggpubr::ggviolin(x = \"tam_loc\", y = \"ing_per\", fill = \"tam_loc\",\n         palette = wesanderson::wes_palette(\"Royal2\", n=4),\n         add = \"boxplot\", add.params = list(fill = \"white\"))+\n  stat_compare_means(comparisons = comparaciones, label = \"p.signif\")+ # Add significance levels\n  stat_compare_means(label.y = 4000)     # Add global the p-value \n\nRegistered S3 method overwritten by 'wesanderson':\n  method        from     \n  print.palette DescTools"
  },
  {
    "objectID": "P7.html#ejercicio",
    "href": "P7.html#ejercicio",
    "title": "7  Cont bivariado e intro a inferencia estadística",
    "section": "7.10 Ejercicio",
    "text": "7.10 Ejercicio\nEste es un ejercicio más libre y para que revisen más la base de datos de su elección y en términos de su trabajo de tesis.\nPresente dos pruebas de hipótesis revisadas en esta práctica con otras variables de su elección.\n!Revise la ayuda de las pruebas para mejor interpretación de sus resultados."
  }
]